
 <!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  
    <title>Edgar&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Edgar">
    

    
    <meta name="description" content="Android | 全栈工程师">
<meta property="og:type" content="website">
<meta property="og:title" content="Edgar's Blog">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Edgar's Blog">
<meta property="og:description" content="Android | 全栈工程师">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Edgar's Blog">
<meta name="twitter:description" content="Android | 全栈工程师">

    
    <link rel="alternative" href="atom.xml" title="Edgar&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/unnamed4_n_mSY_icon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/profile.png">
    <link rel="apple-touch-icon-precomposed" href="/img/profile.png">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Edgar&#39;s Blog">Edgar&#39;s Blog</a></h1>
				<h2 class="blog-motto">等待执剑少年修炼归来！</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜單">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/28/Android-源码分析之HandlerThread/" title="Android-源码分析之HandlerThread" itemprop="url">Android-源码分析之HandlerThread</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-28T03:55:15.000Z" itemprop="datePublished"> 發表於 2016-07-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x4E0A;&#x4E00;&#x7BC7;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD;&#x4E86;Handler &#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4E86;&#x4E00;&#x822C;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x6CA1;&#x6709;&#x6D88;&#x606F;&#x5904;&#x7406;&#x80FD;&#x529B;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x5904;&#x7406;&#x6D88;&#x606F;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x7684;&#x4EE3;&#x7801;&#x6765;&#x7ED9;&#x666E;&#x901A;&#x7684;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Looper&#x3002;
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NonMainThread</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Thread</span> {</span></span><br><span class="line">      public <span class="type">Handler</span> mHandler;</span><br><span class="line">      public void run() {</span><br><span class="line">          <span class="type">Looper</span>.prepare();</span><br><span class="line">          mHandler = <span class="keyword">new</span> <span class="type">Handler</span>() {</span><br><span class="line">              public void handleMessage(<span class="type">Message</span> msg) {</span><br><span class="line">                  <span class="comment">// process incoming messages here</span></span><br><span class="line">              }</span><br><span class="line">          };</span><br><span class="line">          <span class="type">Looper</span>.loop();</span><br><span class="line">      }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x4E2A;&#x770B;&#x4E0A;&#x53BB;&#x4E0D;&#x662F;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x662F;Android&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x4E3A;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;--HandlerThread
&#x9996;&#x5148;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line">mHandlerThread = <span class="keyword">new</span> HandlerThread(<span class="string">&quot;WorkThread&quot;</span>);</span><br><span class="line">mHandlerThread.start();</span><br><span class="line">mThreadHandler = <span class="keyword">new</span> Handler(mHandlerThread.getLooper()) {</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.handleMessage(msg);</span><br><span class="line">         <span class="comment">//&#x3002;&#x3002;&#x3002;&#x3002;&#x3002;</span></span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></table></figure></p>
<p>&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x6765;&#x5206;&#x6790;&#x4E0B;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<p>&#x9996;&#x5148;&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x8FD9;&#x4E2A;HandlerThread&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x63A5;&#x7740;&#x4E3A;&#x6211;&#x4EEC;&#x7684;&#x7EBF;&#x7A0B;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x3002;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HandlerThread</span><span class="params">(String name)</span> </span>{</span><br><span class="line">    <span class="keyword">super</span>(name);</span><br><span class="line">    mPriority = Process.THREAD_PRIORITY_DEFAULT;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HandlerThread</span><span class="params">(String name, <span class="keyword">int</span> priority)</span> </span>{</span><br><span class="line">    <span class="keyword">super</span>(name);</span><br><span class="line">    mPriority = priority;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x7D27;&#x63A5;&#x7740;&#x5728;&#x8C03;&#x7528;start&#x65B9;&#x6CD5;&#x540E;&#xFF0C;run&#x65B9;&#x6CD5;&#x5C06;&#x4F1A;&#x8FD0;&#x884C;&#xFF1A;</p>
<p><figure class="highlight dns"><table><tr><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void run() {</span><br><span class="line">    mTid = Process.myTid()<span class="comment">;</span></span><br><span class="line">    Looper.prepare()<span class="comment">;</span></span><br><span class="line">    synchronized (this) {</span><br><span class="line">        mLooper = Looper.myLooper()<span class="comment">;</span></span><br><span class="line">        notifyAll()<span class="comment">;</span></span><br><span class="line">    }</span><br><span class="line">    Process.setThreadPriority(mPriority)<span class="comment">;</span></span><br><span class="line">    onLooperPrepared()<span class="comment">;</span></span><br><span class="line">    Looper.loop()<span class="comment">;</span></span><br><span class="line">    mTid = -1<span class="comment">;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5F88;&#x719F;&#x6089;&#x5427;&#xFF0C;&#x5176;&#x5B9E;&#x8BE5;&#x535A;&#x5BA2;&#x5F00;&#x5934;&#x63D0;&#x5230;&#x7684;&#x90A3;&#x4E2A;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;onLooperPrepared()&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5982;&#x679C;&#x9700;&#x8981;&#x5728;Looper&#x5FAA;&#x73AF;&#x5F00;&#x59CB;&#x524D;&#x505A;&#x4E9B;&#x5176;&#x4ED6;&#x5904;&#x7406;&#x53EF;&#x4EE5;&#x8986;&#x5199;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8C03;&#x7528;getLooper&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x5DF2;&#x7ECF;&#x5904;&#x4E8E;loop&#x72B6;&#x6001;&#x7684;Looper&#x4E86;&#xFF0C;&#x4E5F;&#x6709;&#x4E86;MessageQueue&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;Handler&#x5904;&#x7406;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;&#x4E86;&#xFF0C;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x8FD9;&#x91CC;&#x662F;&#x4E3A;&#x4E86;&#x8BA9;&#x975E;UI&#x7EBF;&#x7A0B;&#x62E5;&#x6709;&#x5904;&#x7406;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x53D1;&#x9001;&#x8FC7;&#x6765;&#x6D88;&#x606F;&#x80FD;&#x529B;&#x624D;&#x4F7F;&#x7528;HandlerThread&#x7684;&#xFF0C;&#x5982;&#x679C;&#x53EA;&#x9700;&#x8981;&#x5177;&#x6709;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7684;&#x80FD;&#x529B;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E00;&#x5B9A;&#x8981;&#x6E05;&#x695A;&#x3002;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function">Looper <span class="title">getLooper</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (!isAlive()) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// If the thread has been started, wait until the looper has been created.</span></span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</span><br><span class="line">        <span class="keyword">while</span> (isAlive() &amp;&amp; mLooper == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                wait();</span><br><span class="line">            } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> mLooper;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android-源码分析/">Android 源码分析</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/AOSP-源码/">AOSP 源码</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/28/Android-源码分析之HandlerThread/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/28/Android-源码分析之HandlerThread/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/28/Android-源码分析之Handler-MessageQueue-Looper/" title="Android 源码分析之Handler MessageQueue Looper" itemprop="url">Android 源码分析之Handler MessageQueue Looper</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-28T03:19:57.000Z" itemprop="datePublished"> 發表於 2016-07-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x6211;&#x4EEC;&#x9996;&#x5148;&#x770B;&#x4E0B;&#x6211;&#x4EEC;&#x7684;&#x65E5;&#x5E38;&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;
&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#x6211;&#x4EEC;&#x542F;&#x52A8;&#x4E86;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x540E;&#x53F0;&#x4E0A;&#x4F5C;&#x4E00;&#x4E9B;&#x8017;&#x65F6;&#x95F4;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5728;&#x64CD;&#x4F5C;&#x7ED3;&#x675F;&#x540E;&#x901A;&#x8FC7;Handler&#x5411;&#x4E3B;&#x7EBF;&#x7A0B;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x66F4;&#x65B0;&#x6587;&#x672C;&#xFF0C;&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x7740;&#x8FD9;&#x4E2A;&#x60C5;&#x666F;&#x5BF9;Handler&#x6E90;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x5B66;&#x4E60;&#x3002;
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Handler <span class="keyword">handler</span> = <span class="keyword">new</span> Handler() {</span><br><span class="line"></span><br><span class="line">     <span class="annotation">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (msg.what == CHANGE_TEXT) {</span><br><span class="line">            textView.setText(String.valueOf(msg.obj));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">super</span>.handleMessage(msg);</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread() {</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line"></span><br><span class="line">            <span class="comment">//&#x4E00;&#x4E9B;&#x8017;&#x65F6;&#x7684;&#x64CD;&#x4F5C;</span></span><br><span class="line">            Message msg = Message.obtain();</span><br><span class="line">            msg.what = CHANGE_TEXT;</span><br><span class="line">            msg.obj = <span class="string">&quot;Hello Handle&quot;</span> ;</span><br><span class="line">            <span class="keyword">handler</span>.sendMessage(msg);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}.start();</span><br></pre></td></tr></table></figure></p>
<p>&#x9996;&#x5148;&#x662F;&#x8C03;&#x7528;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Handler&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7684;&#x6CE8;&#x91CA;&#x4E2D;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x6709;&#x4EF7;&#x503C;&#x7684;&#x63D0;&#x793A;&#xFF1A;&#x5C31;&#x662F;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6CA1;&#x6709;Looper&#x90A3;&#x4E48;&#x5B83;&#x5C06;&#x4E0D;&#x5177;&#x5907;&#x63A5;&#x53D7;Message&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x5982;&#x679C;&#x5B8C;&#x8FD9;&#x79CD;&#x7EBF;&#x7A0B;&#x4E2D;post&#x6D88;&#x606F;&#x90A3;&#x4E48;&#x5C06;&#x4F1A;&#x6709;&#x5F02;&#x5E38;&#x629B;&#x51FA;&#x3002;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Default constructor associates this handler with the {<span class="doctag">@link</span> Looper} for the</span><br><span class="line"> * current thread.</span><br><span class="line"> *</span><br><span class="line"> * If this thread does not have a looper, this handler won&apos;t be able to receive messages</span><br><span class="line"> * so an exception is thrown.</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">this</span>(<span class="keyword">null</span>, <span class="keyword">false</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x4E0A;&#x9762;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x8C03;&#x7528;&#x4E86;Handler&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p><figure class="highlight monkey"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Handler(Callback callback, boolean async) {</span><br><span class="line">    <span class="keyword">if</span> (FIND_POTENTIAL_LEAKS) {</span><br><span class="line">        <span class="keyword">final</span> <span class="class"><span class="keyword">Class</span>&lt;? <span class="keyword">extends</span> <span class="title">Handler</span>&gt; <span class="title">klass</span> = <span class="title">getClass</span>();</span></span><br><span class="line">        <span class="keyword">if</span> ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp;</span><br><span class="line">                (klass.getModifiers() &amp; Modifier.STATIC) == <span class="number">0</span>) {</span><br><span class="line">            <span class="built_in">Log</span>.w(TAG, <span class="string">&quot;The following Handler class should be static or leaks might occur: &quot;</span> +</span><br><span class="line">                klass.getCanonicalName());</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    mLooper = Looper.myLooper();</span><br><span class="line">    <span class="keyword">if</span> (mLooper == <span class="literal">null</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">            <span class="string">&quot;Can&apos;t create handler inside thread that has not called Looper.prepare()&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    mQueue = mLooper.mQueue;</span><br><span class="line">    mCallback = callback;</span><br><span class="line">    mAsynchronous = async;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x5F00;&#x59CB;&#x90E8;&#x5206;&#x4F1A;&#x5148;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7684;Handler&#x7C7B;&#x662F;&#x5426;&#x662F;&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x6216;&#x8005;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x6210;&#x5458;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x8FD9;&#x4E9B;&#x7684;&#x8BDD;&#x9700;&#x8981;&#x5C06;Handler&#x58F0;&#x660E;&#x6210;static&#xFF0C;&#x8FD9;&#x4E2A;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x5185;&#x5B58;&#x4F18;&#x5316;&#x7684;&#x535A;&#x5BA2;&#x4E2D;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x975E;&#x9759;&#x6001;&#x7684;&#x90A3;&#x4E48;&#x5C06;&#x4F1A;&#x6301;&#x6709;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x9020;&#x6210;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x3002;
&#x7D27;&#x63A5;&#x7740;&#x8C03;&#x7528;
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">Looper.<span class="function"><span class="title">myLooper</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure></p>
<p>&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x662F;&#x5426;&#x6709;Looper&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#x4E86;&#x5982;&#x679C;&#x6CA1;&#x6709;Looper&#x5C31;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x6D88;&#x606F;&#x7684;&#x80FD;&#x529B;&#x3002;&#x90A3;&#x4E48;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x624D;&#x6709;Looper&#x5462;&#xFF1F;
&#x6211;&#x4EEC;&#x770B;&#x4E0B;myLooper&#x65B9;&#x6CD5;&#xFF1A;
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Return the Looper object associated with the current thread.  Returns</span><br><span class="line"> * null if the calling thread is not associated with a Looper.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="annotation">@Nullable</span> <span class="function">Looper <span class="title">myLooper</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">return</span> sThreadLocal.<span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x4ECE;&#x6CE8;&#x91CA;&#x4E0A;&#x770B;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x660E;&#x663E;&#x770B;&#x51FA;&#x5B83;&#x662F;&#x7528;&#x4E8E;&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;Looper&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;Looper&#x662F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8BBE;&#x7F6E;&#x7684;&#x5462;&#xFF1F; &#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x770B;&#xFF1A;
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepare</span>(<span class="params">boolean quitAllowed</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (sThreadLocal.<span class="keyword">get</span>() != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Only one Looper may be created per thread&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    sThreadLocal.<span class="keyword">set</span>(<span class="keyword">new</span> Looper(quitAllowed));</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x4F1A;&#x5148;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6709;Looper&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x90A3;&#x4E48;&#x5C31;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#xFF0C;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x81F3;&#x591A;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;Looper&#x3002;
&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5E76;&#x6CA1;&#x6709;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;prepare&#x65B9;&#x6CD5;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x62A5;&#x9519;&#xFF0C;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#x4E3B;&#x7EBF;&#x7A0B;&#x5728;&#x521B;&#x5EFA;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x5DF2;&#x7ECF;&#x968F;&#x5373;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;MainLooper&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x6E90;&#x4EE3;&#x7801;&#x4E2D;prepare&#x65B9;&#x6CD5;&#x4E0B;&#x9762;&#x7684;prepareMainLooper&#x65B9;&#x6CD5;&#xFF1A;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">prepareMainLooper</span><span class="params">()</span> </span>{</span><br><span class="line">    prepare(<span class="keyword">false</span>);</span><br><span class="line">    <span class="keyword">synchronized</span> (Looper.class) {</span><br><span class="line">        <span class="keyword">if</span> (sMainLooper != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">&quot;The main Looper has already been prepared.&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">        sMainLooper = myLooper();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5B83;&#x4F1A;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;Looper&#x540E;&#x5C06;&#x5176;&#x8D4B;&#x7ED9;sMainLooper&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x4E0B;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5728;&#x54EA;&#x91CC;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;AcitivityThread.java&#x4E2D;&#x7684;main&#x65B9;&#x6CD5;&#x4E2D;&#x6709;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p><figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span>[] args) {</span><br><span class="line">    <span class="comment">//.......</span></span><br><span class="line">    Looper.prepareMainLooper();</span><br><span class="line">    ActivityThread thread = <span class="keyword">new</span> ActivityThread();</span><br><span class="line">    thread.attach(<span class="keyword">false</span>);</span><br><span class="line">    <span class="keyword">if</span> (sMainThreadHandler == <span class="keyword">null</span>) {</span><br><span class="line">        sMainThreadHandler = thread.getHandler();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">false</span>) {</span><br><span class="line">        Looper.myLooper().setMessageLogging(<span class="keyword">new</span></span><br><span class="line">                LogPrinter(Log.DEBUG, <span class="string">&quot;ActivityThread&quot;</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// End of event ActivityThreadMain.</span></span><br><span class="line">    Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</span><br><span class="line">    Looper.<span class="built_in">loop</span>();</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Main thread loop unexpectedly exited&quot;</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;&#x8FD9;&#x91CC;&#x4E3B;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;Looper&#x5E76;&#x6DFB;&#x52A0;&#x5230;sThreadLocal&#x4E2D;&#x3002;</p>
<p>&#x53D1;&#x9001;Message&#xFF1A;
Handler&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x6211;&#x4EEC;&#x4EE5;&#x6700;&#x7B80;&#x5355;&#x7684;sendMessage(Message msg)&#x6765;&#x4F5C;&#x4E3A;&#x5206;&#x6790;&#x5BF9;&#x8C61;&#xFF1A;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">boolean</span> <span class="title">sendMessage</span><span class="params">(Message msg)</span></span>{</span><br><span class="line">    <span class="function"><span class="keyword">return</span> <span class="title">sendMessageDelayed</span><span class="params">(msg, <span class="number">0</span>)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x91CC;&#x4F1A;&#x8C03;&#x7528;sendMessageDelayed(Message msg, long delayMillis)&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#xFF1A;
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">boolean</span> <span class="title">sendMessageDelayed</span><span class="params">(Message msg, <span class="keyword">long</span> delayMillis)</span></span><br><span class="line"></span>{</span><br><span class="line">    <span class="keyword">if</span> (delayMillis &lt; <span class="number">0</span>) {</span><br><span class="line">        delayMillis = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>sendMessageAtTime &#x4F1A;&#x8C03;&#x7528;enqueueMessage&#x65B9;&#x6CD5;&#x5C06;&#x6D88;&#x606F;&#x5165;&#x961F;
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">sendMessageAtTime</span><span class="params">(Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>{</span><br><span class="line">    MessageQueue queue = mQueue;</span><br><span class="line">    <span class="keyword">if</span> (queue == <span class="keyword">null</span>) {</span><br><span class="line">        RuntimeException e = <span class="keyword">new</span> RuntimeException(</span><br><span class="line">                <span class="keyword">this</span> + <span class="string">&quot; sendMessageAtTime() called with no mQueue&quot;</span>);</span><br><span class="line">        Log.w(<span class="string">&quot;Looper&quot;</span>, e.getMessage(), e);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">return</span> <span class="title">enqueueMessage</span><span class="params">(queue, msg, uptimeMillis)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">boolean</span> <span class="title">enqueueMessage</span><span class="params">(MessageQueue queue, Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>{</span><br><span class="line">    msg.<span class="keyword">target</span> = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (mAsynchronous) {</span><br><span class="line">        msg.setAsynchronous(<span class="keyword">true</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">return</span> queue.<span class="title">enqueueMessage</span><span class="params">(msg, uptimeMillis)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="function">boolean <span class="title">enqueueMessage</span>(<span class="params">Message msg, <span class="keyword">long</span> <span class="keyword">when</span></span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (msg.target == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Message must have a target.&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (msg.isInUse()) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(msg + <span class="string">&quot; This message is already in use.&quot;</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    synchronized (<span class="keyword">this</span>) {</span><br><span class="line">        <span class="keyword">if</span> (mQuitting) {</span><br><span class="line">            IllegalStateException e = <span class="keyword">new</span> IllegalStateException(</span><br><span class="line">                    msg.target + <span class="string">&quot; sending message to a Handler on a dead thread&quot;</span>);</span><br><span class="line">            Log.w(TAG, e.getMessage(), e);</span><br><span class="line">            msg.recycle();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        msg.markInUse();</span><br><span class="line">        msg.<span class="keyword">when</span> = <span class="keyword">when</span>;</span><br><span class="line">        Message p = mMessages;</span><br><span class="line">        boolean needWake;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="keyword">null</span> || <span class="keyword">when</span> == <span class="number">0</span> || <span class="keyword">when</span> &lt; p.<span class="keyword">when</span>) {</span><br><span class="line">            <span class="comment">// New head, wake up the event queue if blocked.</span></span><br><span class="line">            msg.next = p;</span><br><span class="line">            mMessages = msg;</span><br><span class="line">            needWake = mBlocked;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// Inserted within the middle of the queue.  Usually we don&apos;t have to wake</span></span><br><span class="line">            <span class="comment">// up the event queue unless there is a barrier at the head of the queue</span></span><br><span class="line">            <span class="comment">// and the message is the earliest asynchronous message in the queue.</span></span><br><span class="line">            needWake = mBlocked &amp;&amp; p.target == <span class="keyword">null</span> &amp;&amp; msg.isAsynchronous();</span><br><span class="line">            Message prev;</span><br><span class="line">            <span class="keyword">for</span> (;;) {</span><br><span class="line">                prev = p;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">if</span> (p == <span class="keyword">null</span> || <span class="keyword">when</span> &lt; p.<span class="keyword">when</span>) {</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (needWake &amp;&amp; p.isAsynchronous()) {</span><br><span class="line">                    needWake = <span class="keyword">false</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            msg.next = p; <span class="comment">// invariant: p == prev.next</span></span><br><span class="line">            prev.next = msg;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// We can assume mPtr != 0 because mQuitting is false.</span></span><br><span class="line">        <span class="keyword">if</span> (needWake) {</span><br><span class="line">            nativeWake(mPtr);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5F53;&#x6536;&#x5230;&#x4E00;&#x4E2A;Message&#x540E;&#x5C06;&#x4F1A;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x5E76;&#x5C06;&#x5F53;&#x524D;&#x6D88;&#x606F;&#x63D2;&#x5165;&#x6309;&#x7167;&#x65F6;&#x95F4;&#x6392;&#x5E8F;&#x597D;&#x7684;&#x961F;&#x5217;&#x4E2D;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x6D88;&#x606F;&#x5DF2;&#x7ECF;&#x8FDB;&#x5165;&#x961F;&#x5217;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x5728;&#x770B;AcitivityThread.java&#x4E2D;&#x7684;main&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x5019;&#x9664;&#x4E86;prepareMainLooer&#x5916;&#x5728;&#x6700;&#x540E;&#x8C03;&#x7528;&#x4E86;loop&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x5FAA;&#x73AF;&#xFF0C;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">final</span> Looper me = myLooper();</span><br><span class="line">    <span class="keyword">if</span> (me == <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;No Looper; Looper.prepare() wasn&apos;t called on this thread.&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">final</span> MessageQueue queue = me.mQueue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Make sure the identity of this thread is that of the local process,</span></span><br><span class="line">    <span class="comment">// and keep track of what that identity token actually is.</span></span><br><span class="line">    Binder.clearCallingIdentity();</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">long</span> ident = Binder.clearCallingIdentity();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (;;) {</span><br><span class="line">        Message msg = queue.next(); <span class="comment">// might block</span></span><br><span class="line">        <span class="keyword">if</span> (msg == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">// No message indicates that the message queue is quitting.</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// This must be in a local variable, in case a UI event sets the logger</span></span><br><span class="line">        Printer logging = me.mLogging;</span><br><span class="line">        <span class="keyword">if</span> (logging != <span class="keyword">null</span>) {</span><br><span class="line">            logging.println(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt; Dispatching to &quot;</span> + msg.<span class="keyword">target</span> + <span class="string">&quot; &quot;</span> +</span><br><span class="line">                    msg.callback + <span class="string">&quot;: &quot;</span> + msg.what);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        msg.<span class="keyword">target</span>.dispatchMessage(msg);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (logging != <span class="keyword">null</span>) {</span><br><span class="line">            logging.println(<span class="string">&quot;&lt;&lt;&lt;&lt;&lt; Finished to &quot;</span> + msg.<span class="keyword">target</span> + <span class="string">&quot; &quot;</span> + msg.callback);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Make sure that during the course of dispatching the</span></span><br><span class="line">        <span class="comment">// identity of the thread wasn&apos;t corrupted.</span></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> newIdent = Binder.clearCallingIdentity();</span><br><span class="line">        <span class="keyword">if</span> (ident != newIdent) {</span><br><span class="line">            Log.wtf(TAG, <span class="string">&quot;Thread identity changed from 0x&quot;</span></span><br><span class="line">                    + Long.toHexString(ident) + <span class="string">&quot; to 0x&quot;</span></span><br><span class="line">                    + Long.toHexString(newIdent) + <span class="string">&quot; while dispatching to &quot;</span></span><br><span class="line">                    + msg.<span class="keyword">target</span>.getClass().getName() + <span class="string">&quot; &quot;</span></span><br><span class="line">                    + msg.callback + <span class="string">&quot; what=&quot;</span> + msg.what);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        msg.recycleUnchecked();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5176;&#x5B9E;&#x4E0D;&#x96BE;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x627E;&#x5230;&#x5173;&#x952E;&#x4EE3;&#x7801;&#xFF1A;
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">msg</span><span class="class">.target</span><span class="class">.dispatchMessage</span>(<span class="tag">msg</span>);</span><br></pre></td></tr></table></figure></p>
<p>msg.target &#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x5176;&#x5B9E;&#x5B83;&#x5C31;&#x662F;&#x5F80;MessageQueue&#x4E2D;post&#x6D88;&#x606F;&#x7684;&#x90A3;&#x4E2A;Handler&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;Looper&#x4F1A;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x627E;&#x5230;&#x6D88;&#x606F;&#x7684;Target&#x7136;&#x540E;&#x8C03;&#x7528;&#x5B83;&#x7684;dispatchMessage&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;dispatchMessage&#x65B9;&#x6CD5;&#xFF0C;&#x5728;dispatchMessage&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x7684;&#x662F;handleMessage&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5199;&#x7684;&#x90A3;&#x4E2A;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">dispatchMessage</span><span class="params">(Message msg)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (msg.callback != <span class="keyword">null</span>) {</span><br><span class="line">        handleCallback(msg);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">if</span> (mCallback != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">if</span> (mCallback.handleMessage(msg)) {</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        handleMessage(msg);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x8BFB;&#x5230;&#x8FD9;&#x91CC;&#x53EF;&#x80FD;&#x7EC6;&#x5FC3;&#x7684;&#x540C;&#x5B66;&#x4F1A;&#x7559;&#x610F;&#x5230;&#x90FD;&#x6CA1;&#x4ECB;&#x7ECD;&#x961F;&#x5217;&#x4E2D;&#x600E;&#x4E48;&#x51B3;&#x5B9A;&#x67D0;&#x4E2A;&#x6D88;&#x606F;&#x4F55;&#x65F6;&#x5904;&#x7406;&#xFF0C;&#x662F;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x662F;&#x901A;&#x8FC7;&#x5728;loop&#x4E2D;&#x8C03;&#x7528;queue.next&#x8FDB;&#x884C;&#x51B3;&#x5B9A;&#x7684;&#x3002;</p>
<p><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">Message <span class="keyword">next</span>() {</span><br><span class="line">    <span class="comment">// Return here if the message loop has already quit and been disposed.</span></span><br><span class="line">    <span class="comment">// This can happen if the application tries to restart a looper after quit</span></span><br><span class="line">    <span class="comment">// which is not supported.</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">long</span> ptr = mPtr;</span><br><span class="line">    <span class="keyword">if</span> (ptr == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> pendingIdleHandlerCount = -<span class="number">1</span>; <span class="comment">// -1 only during first iteration</span></span><br><span class="line">    <span class="keyword">int</span> nextPollTimeoutMillis = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (;;) {</span><br><span class="line">        <span class="keyword">if</span> (nextPollTimeoutMillis != <span class="number">0</span>) {</span><br><span class="line">            Binder.flushPendingCommands();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        nativePollOnce(ptr, nextPollTimeoutMillis);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</span><br><span class="line">            <span class="comment">// Try to retrieve the next message.  Return if found.</span></span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">long</span> now = SystemClock.uptimeMillis();</span><br><span class="line">            Message prevMsg = <span class="keyword">null</span>;</span><br><span class="line">            Message msg = mMessages;</span><br><span class="line">            <span class="keyword">if</span> (msg != <span class="keyword">null</span> &amp;&amp; msg.target == <span class="keyword">null</span>) {</span><br><span class="line">                <span class="comment">// Stalled by a barrier.  Find the next asynchronous message in the queue.</span></span><br><span class="line">                <span class="keyword">do</span> {</span><br><span class="line">                    prevMsg = msg;</span><br><span class="line">                    msg = msg.<span class="keyword">next</span>;</span><br><span class="line">                } <span class="keyword">while</span> (msg != <span class="keyword">null</span> &amp;&amp; !msg.isAsynchronous());</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (msg != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">if</span> (now &lt; msg.when) {</span><br><span class="line">                    <span class="comment">// Next message is not ready.  Set a timeout to wake up when it is ready.</span></span><br><span class="line">                    nextPollTimeoutMillis = (<span class="keyword">int</span>) Math.min(msg.when - now, Integer.MAX_VALUE);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="comment">// Got a message.</span></span><br><span class="line">                    mBlocked = <span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">if</span> (prevMsg != <span class="keyword">null</span>) {</span><br><span class="line">                        prevMsg.<span class="keyword">next</span> = msg.<span class="keyword">next</span>;</span><br><span class="line">                    } <span class="keyword">else</span> {</span><br><span class="line">                        mMessages = msg.<span class="keyword">next</span>;</span><br><span class="line">                    }</span><br><span class="line">                    msg.<span class="keyword">next</span> = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">if</span> (DEBUG) Log.v(TAG, <span class="string">&quot;Returning message: &quot;</span> + msg);</span><br><span class="line">                    msg.markInUse();</span><br><span class="line">                    <span class="keyword">return</span> msg;</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// No more messages.</span></span><br><span class="line">                nextPollTimeoutMillis = -<span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Process the quit message now that all pending messages have been handled.</span></span><br><span class="line">            <span class="keyword">if</span> (mQuitting) {</span><br><span class="line">                dispose();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="comment">// If first time idle, then get the number of idlers to run.</span></span><br><span class="line">            <span class="comment">// Idle handles only run if the queue is empty or if the first message</span></span><br><span class="line">            <span class="comment">// in the queue (possibly a barrier) is due to be handled in the future.</span></span><br><span class="line">            <span class="keyword">if</span> (pendingIdleHandlerCount &lt; <span class="number">0</span></span><br><span class="line">                    &amp;&amp; (mMessages == <span class="keyword">null</span> || now &lt; mMessages.when)) {</span><br><span class="line">                pendingIdleHandlerCount = mIdleHandlers.<span class="keyword">size</span>();</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (pendingIdleHandlerCount &lt;= <span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// No idle handlers to run.  Loop and wait some more.</span></span><br><span class="line">                mBlocked = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mPendingIdleHandlers == <span class="keyword">null</span>) {</span><br><span class="line">                mPendingIdleHandlers = <span class="keyword">new</span> IdleHandler[Math.max(pendingIdleHandlerCount, <span class="number">4</span>)];</span><br><span class="line">            }</span><br><span class="line">            mPendingIdleHandlers = mIdleHandlers.toArray(mPendingIdleHandlers);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Run the idle handlers.</span></span><br><span class="line">        <span class="comment">// We only ever reach this code block during the first iteration.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pendingIdleHandlerCount; i++) {</span><br><span class="line">            <span class="keyword">final</span> IdleHandler idler = mPendingIdleHandlers[i];</span><br><span class="line">            mPendingIdleHandlers[i] = <span class="keyword">null</span>; <span class="comment">// release the reference to the handler</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">boolean</span> keep = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                keep = idler.queueIdle();</span><br><span class="line">            } <span class="keyword">catch</span> (Throwable t) {</span><br><span class="line">                Log.wtf(TAG, <span class="string">&quot;IdleHandler threw exception&quot;</span>, t);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!keep) {</span><br><span class="line">                <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {</span><br><span class="line">                    mIdleHandlers.remove(idler);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Reset the idle handler count to 0 so we do not run them again.</span></span><br><span class="line">        pendingIdleHandlerCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// While calling an idle handler, a new message could have been delivered</span></span><br><span class="line">        <span class="comment">// so go back and look again for a pending message without waiting.</span></span><br><span class="line">        nextPollTimeoutMillis = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x91CC;&#x7684;&#x4EE3;&#x7801;&#x5F88;&#x957F;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x5B9E;&#x5173;&#x952E;&#x7684;&#x903B;&#x8F91;&#x4E0D;&#x96BE;&#xFF0C;&#x5B83;&#x5C31;&#x662F;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x4F1A;&#x53BB;&#x7F16;&#x5386;&#x6574;&#x4E2A;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x67E5;&#x770B;Message&#x4E2D;&#x7684;when&#x5B57;&#x6BB5;&#xFF0C;&#x5E76;&#x548C;&#x5F53;&#x524D;&#x7684;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x6BD4;&#x5BF9;&#xFF0C;&#x5982;&#x679C;&#x8FBE;&#x5230;&#x8981;&#x53D1;&#x9001;&#x7684;&#x65F6;&#x523B;&#x90A3;&#x4E48;&#x5C31;&#x8FD4;&#x56DE;&#x8FD9;&#x4E2A;Message&#x7ED9;Looper&#x3002;&#x5230;&#x6B64;&#x6574;&#x4E2A;Handler&#x6E90;&#x4EE3;&#x7801;&#x5B66;&#x4E60;&#x544A;&#x4E00;&#x4E2A;&#x5C0F;&#x6BB5;&#x843D;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x56DE;&#x987E;&#x4E0B;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<p>&#x9996;&#x5148;&#x5728;AcitivityThread.java&#x7684;main&#x65B9;&#x6CD5;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;Looper.prepareMainLooper();&#x521B;&#x5EFA;&#x4E00;&#x4E2A;MainLooper&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;Looper.loop();&#x5F00;&#x542F;&#x6D88;&#x606F;&#x5FAA;&#x73AF;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x5141;&#x8BB8;Hanlder&#x5F80;&#x4E3B;&#x6D88;&#x606F;&#x961F;&#x5217;&#x6295;&#x9012;&#x6D88;&#x606F;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x521B;&#x5EFA;Hanlder&#xFF0C;&#x5728;&#x5B50;&#x7EBF;&#x7A0B;&#x4E2D;&#x5904;&#x7406;&#x5B8C;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;Handler&#x5B8C;MainLooper&#x4E2D;sentMessage&#xFF0C;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x4F1A;&#x901A;&#x8FC7;&#x8C03;&#x7528;enqueueMessage&#x52A0;&#x5165;&#x5230;&#x6D88;&#x606F;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x7684;Message&#x6301;&#x6709;Handler&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;&#x5C06;&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#x7684;Handler&#x8BBE;&#x7F6E;&#x4E3A;static&#x7684;&#x539F;&#x56E0;&#x4E86;&#xFF0C;&#x5426;&#x5219;Handler&#x4F1A;&#x6301;&#x6709;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x8981;&#x6D88;&#x606F;&#x6CA1;&#x53CA;&#x65F6;&#x5904;&#x7406;&#xFF0C;Handler&#x6240;&#x5728;&#x7684;Activity&#x6216;&#x8005;Service&#x4E00;&#x65E6;&#x9000;&#x51FA;&#x4E86;&#x5C31;&#x4F1A;&#x9020;&#x6210;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x3002;
&#x63A5;&#x4E0B;&#x6765;&#x5728;Looper.looper&#x4E2D;&#x4F1A;&#x5B9A;&#x671F;&#x67E5;&#x770B;&#x6BCF;&#x4E2A;&#x6D88;&#x606F;&#xFF0C;&#x5982;&#x679C;&#x65F6;&#x95F4;&#x5230;&#x4E86;&#x5C31;&#x4F1A;&#x8C03;&#x7528;&#x6D88;&#x606F;&#x6240;&#x7ED1;&#x5B9A;Handler&#x7684;dispatchMessage&#x65B9;&#x6CD5;&#x3002;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x7684;handleMessage&#x3002;</p>
<p>&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="/2016/07/28/Android-&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;Handler-MessageQueue-Looper/2.png" alt=""></p>
<p>&#x518D;&#x6765;&#x7AD9;&#x5728;&#x5168;&#x5C40;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x4E00;&#x5F20;&#x56FE;&#xFF1A;</p>
<p><img src="/2016/07/28/Android-&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;Handler-MessageQueue-Looper/1.png" alt=""></p>
<p>&#x90A3;&#x4E48;&#x5B50;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x6709;&#x5904;&#x7406;&#x6D88;&#x606F;&#x7684;&#x80FD;&#x529B;&#x5417;&#xFF0C;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6211;&#x4EEC;&#x5176;&#x5B9E;&#x5728;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x8BF4;&#x8FC7;&#x4E86;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x662F;&#x6CA1;&#x6709;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;Looper&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E3A;&#x4E00;&#x4E2A;&#x5B50;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Looper&#x8FD9;&#x6837;&#x5C31;&#x6709;&#x4E86;&#x6D88;&#x606F;&#x5904;&#x7406;&#x7684;&#x80FD;&#x529B;&#x4E86;&#x3002;
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NonMainThread</span> <span class="keyword"><span class="keyword">extends</span></span> <span class="title">Thread</span> {</span></span><br><span class="line">      public <span class="type">Handler</span> mHandler;</span><br><span class="line">      public void run() {</span><br><span class="line">          <span class="type">Looper</span>.prepare();</span><br><span class="line">          mHandler = <span class="keyword">new</span> <span class="type">Handler</span>() {</span><br><span class="line">              public void handleMessage(<span class="type">Message</span> msg) {</span><br><span class="line">                  <span class="comment">// process incoming messages here</span></span><br><span class="line">              }</span><br><span class="line">          };</span><br><span class="line">          <span class="type">Looper</span>.loop();</span><br><span class="line">      }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android-源码分析/">Android 源码分析</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/AOSP-源码/">AOSP 源码</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/28/Android-源码分析之Handler-MessageQueue-Looper/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/28/Android-源码分析之Handler-MessageQueue-Looper/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/27/Android-源码分析之ListView/" title="Android-源码分析之ListView" itemprop="url">Android-源码分析之ListView</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-27T02:52:44.000Z" itemprop="datePublished"> 發表於 2016-07-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x5728;&#x4E4B;&#x524D;&#x7684;&#x535A;&#x5BA2;&#x5DF2;&#x7ECF;&#x4ECB;&#x7ECD;&#x4E86;ListView&#x548C;Adapter&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x4E4B;&#x524D;&#x7BC7;&#x6587;&#x7AE0;&#x53EA;&#x662F;&#x7740;&#x773C;&#x4E8E;&#x57FA;&#x672C;&#x7684;&#x4F7F;&#x7528;&#x5E76;&#x6CA1;&#x6709;&#x8BB2;&#x5230;&#x5177;&#x4F53;&#x7684;&#x80CC;&#x540E;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x5C06;&#x4F1A;&#x4EE3;&#x5927;&#x5BB6;&#x8FC7;&#x4E0B;ListView&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x8BA9;&#x5927;&#x5BB6;&#x4E86;&#x89E3;&#x4E0B;&#x6574;&#x4E2A;&#x539F;&#x7406;&#xFF1A;&#x91CD;&#x70B9;&#x662F;ListView &#x7F13;&#x5B58;&#x673A;&#x5236;</p>
<h5>ListView &#x7F13;&#x5B58;&#x673A;&#x5236;&#x7684;&#x5B9E;&#x73B0;</h5>
<h6>RecycleBin&#x539F;&#x7406;&#x6982;&#x8FF0;</h6>
<p>&#x5728;&#x4ECB;&#x7ECD;RecycleBin&#x539F;&#x7406;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x4ECB;&#x7ECD;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;ActiveView&#x548C;ScrapView&#x3002;&#x6211;&#x4EEC;&#x77E5;&#x9053;ListView&#x4E2D;&#x5305;&#x542B;&#x4E24;&#x7C7B;&#x5B50;View&#xFF0C;&#x4E00;&#x7C7B;&#x662F;&#x53EF;&#x89C1;&#x7684;&#xFF0C;&#x663E;&#x793A;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;ActiveView&#xFF0C;&#x53E6;&#x4E00;&#x7C7B;&#x662F;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#x8FD9;&#x4E9B;&#x88AB;&#x79F0;&#x4E3A;ScrapView&#xFF08;Scrap&#x8868;&#x793A;&#x5E9F;&#x5F03;&#x7684;&#x610F;&#x601D;&#xFF09;ListView&#x4F1A;&#x628A;ScrapView&#x5220;&#x9664;&#x7684;&#x540C;&#x65F6;&#x653E;&#x5165;&#x5230;RecycleBin&#x4E2D;&#x7F13;&#x5B58;&#x8D77;&#x6765;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x6ED1;&#x52A8;ListView&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x5143;&#x7D20;&#x8FDB;&#x5165;&#x5C4F;&#x5E55;&#xFF0C;&#x4E00;&#x4E9B;item&#x4ECE;&#x5C4F;&#x5E55;&#x4E2D;&#x79FB;&#x51FA;&#xFF0C;&#x5728;&#x79FB;&#x5165;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x4ECE;RecycleBin&#x4E2D;&#x53D6;&#x51FA;&#x4E00;&#x4E2A;ScrapView&#xFF0C;&#x5C06;&#x5176;&#x4F5C;&#x4E3A;convertView&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;Adapter&#x7684;getView&#x65B9;&#x6CD5;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;View&#x590D;&#x7528;&#x7684;&#x76EE;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x5FC5;&#x5728;Adapter&#x7684;getView&#x65B9;&#x6CD5;&#x4E2D;&#x6267;&#x884C; LayoutInflater.inflate()&#x65B9;&#x6CD5;&#x4E86;&#xFF0C;&#x4ECE;&#x800C;&#x5927;&#x5927;&#x63D0;&#x9AD8;&#x6574;&#x4E2A;&#x6027;&#x80FD;&#xFF0C;&#x5728;&#x7F16;&#x7A0B;&#x7684;&#x4E16;&#x754C;&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#x4E1C;&#x897F;&#x4E00;&#x76F4;&#x662F;&#x77DB;&#x76FE;&#x7684;&#x90A3;&#x5C31;&#x662F;&#x65F6;&#x95F4;&#x548C;&#x7A7A;&#x95F4;&#xFF0C;&#x800C;ListView&#x4E2D;&#x5728;&#x8FD9;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x505A;&#x4E86;&#x5F88;&#x597D;&#x7684;&#x5E73;&#x8861;&#xFF0C;&#x4E2A;&#x4EBA;&#x89C9;&#x5F97;&#x4E4B;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x8FD9;&#x70B9;&#x8FD8;&#x4F9D;&#x8D56;&#x4E8E;ListView item&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x6BCF;&#x4E2A;item&#x7684;&#x5E03;&#x5C40;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x53EA;&#x4E0D;&#x8FC7;&#x6362;&#x4E86;&#x5185;&#x5BB9;&#x3002;</p>
<p><img src="/2016/07/27/Android-&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;ListView/1.png" alt=""></p>
<p><figure class="highlight zephir"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RecycleBin</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">//.....</span></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Views that were on screen at the start of layout. This array is populated at the start of</span><br><span class="line">     * layout, and at the end of layout all view in mActiveViews are moved to mScrapViews.</span><br><span class="line">     * Views in mActiveViews represent a contiguous range of Views, with position of the first</span><br><span class="line">     * view store in mFirstActivePosition.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> View[] mActiveViews = <span class="keyword">new</span> View[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Unsorted views that can be used by the adapter as a convert view.</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;View&gt;[] mScrapViews;</span><br><span class="line">	<span class="comment">//.....</span></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Fill ActiveViews with all of the children of the AbsListView.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> childCount The minimum number of views mActiveViews should hold</span><br><span class="line">     * <span class="doctag">@param</span> firstActivePosition The position of the first view that will be stored in</span><br><span class="line">     *        mActiveViews</span><br><span class="line">     */</span></span><br><span class="line">    void fillActiveViews(<span class="keyword">int</span> childCount, <span class="keyword">int</span> firstActivePosition) {</span><br><span class="line">        <span class="keyword">if</span> (mActiveViews.length &lt; childCount) {</span><br><span class="line">            mActiveViews = <span class="keyword">new</span> View[childCount];</span><br><span class="line">        }</span><br><span class="line">        mFirstActivePosition = firstActivePosition;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//noinspection MismatchedReadAndWriteOfArray</span></span><br><span class="line">        <span class="keyword">final</span> View[] activeViews = mActiveViews;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childCount; i++) {</span><br><span class="line">            View child = getChildAt(i);</span><br><span class="line">            AbsListView.LayoutParams lp = (AbsListView.LayoutParams) child.getLayoutParams();</span><br><span class="line">            <span class="comment">// Don&apos;t put header or footer views into the scrap heap</span></span><br><span class="line">            <span class="keyword">if</span> (lp != <span class="keyword">null</span> &amp;&amp; lp.viewType != ITEM_VIEW_TYPE_HEADER_OR_FOOTER) {</span><br><span class="line">                <span class="comment">// <span class="doctag">Note:</span>  We do place AdapterView.ITEM_VIEW_TYPE_IGNORE in active views.</span></span><br><span class="line">                <span class="comment">//        However, we will NOT place them into scrap views.</span></span><br><span class="line">                activeViews[i] = child;</span><br><span class="line">                <span class="comment">// Remember the position so that setupChild() doesn&apos;t reset state.</span></span><br><span class="line">                lp.scrappedFromPosition = firstActivePosition + i;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Get the view corresponding to the specified position. The view will be removed from</span><br><span class="line">     * mActiveViews if it is found.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> position The position to look up in mActiveViews</span><br><span class="line">     * <span class="doctag">@return</span> The view if it is found, null otherwise</span><br><span class="line">     */</span></span><br><span class="line">    View getActiveView(<span class="keyword">int</span> position) {</span><br><span class="line">        <span class="keyword">int</span> index = position - mFirstActivePosition;</span><br><span class="line">        <span class="keyword">final</span> View[] activeViews = mActiveViews;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;=<span class="number">0</span> &amp;&amp; index &lt; activeViews.length) {</span><br><span class="line">            <span class="keyword">final</span> View match = activeViews[index];</span><br><span class="line">            activeViews[index] = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">return</span> match;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * <span class="doctag">@return</span> A view from the ScrapViews collection. These are unordered.</span><br><span class="line">     */</span></span><br><span class="line">    View getScrapView(<span class="keyword">int</span> position) {</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> whichScrap = mAdapter.getItemViewType(position);</span><br><span class="line">        <span class="keyword">if</span> (whichScrap &lt; <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (mViewTypeCount == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">return</span> retrieveFromScrap(mCurrentScrap, position);</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (whichScrap &lt; mScrapViews.length) {</span><br><span class="line">            <span class="keyword">return</span> retrieveFromScrap(mScrapViews[whichScrap], position);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * Puts a view into the list of scrap views.</span><br><span class="line">     * &lt;p&gt;</span><br><span class="line">     * If the list data hasn&apos;t changed or the adapter has stable IDs, views</span><br><span class="line">     * with transient state will be preserved for later retrieval.</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> scrap The view to add</span><br><span class="line">     * <span class="doctag">@param</span> position The view&apos;s position within its parent</span><br><span class="line">     */</span></span><br><span class="line">    void addScrapView(View scrap, <span class="keyword">int</span> position) {</span><br><span class="line">        <span class="keyword">final</span> AbsListView.LayoutParams lp = (AbsListView.LayoutParams) scrap.getLayoutParams();</span><br><span class="line">        <span class="keyword">if</span> (lp == <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">// Can&apos;t recycle, but we don&apos;t know anything about the view.</span></span><br><span class="line">            <span class="comment">// Ignore it completely.</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        lp.scrappedFromPosition = position;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Remove but don&apos;t scrap header or footer views, or views that</span></span><br><span class="line">        <span class="comment">// should otherwise not be recycled.</span></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> viewType = lp.viewType;</span><br><span class="line">        <span class="keyword">if</span> (!shouldRecycleViewType(viewType)) {</span><br><span class="line">            <span class="comment">// Can&apos;t recycle. If it&apos;s not a header or footer, which have</span></span><br><span class="line">            <span class="comment">// special handling and should be ignored, then skip the scrap</span></span><br><span class="line">            <span class="comment">// heap and we&apos;ll fully detach the view later.</span></span><br><span class="line">            <span class="keyword">if</span> (viewType != ITEM_VIEW_TYPE_HEADER_OR_FOOTER) {</span><br><span class="line">                getSkippedScrap().add(scrap);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        scrap.dispatchStartTemporaryDetach();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The the accessibility state of the view may change while temporary</span></span><br><span class="line">        <span class="comment">// detached and we do not allow detached views to fire accessibility</span></span><br><span class="line">        <span class="comment">// events. So we are announcing that the subtree changed giving a chance</span></span><br><span class="line">        <span class="comment">// to clients holding on to a view in this subtree to refresh it.</span></span><br><span class="line">        notifyViewAccessibilityStateChangedIfNeeded(</span><br><span class="line">                AccessibilityEvent.CONTENT_CHANGE_TYPE_SUBTREE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Don&apos;t scrap views that have transient state.</span></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">boolean</span> scrapHasTransientState = scrap.hasTransientState();</span><br><span class="line">        <span class="keyword">if</span> (scrapHasTransientState) {</span><br><span class="line">            <span class="keyword">if</span> (mAdapter != <span class="keyword">null</span> &amp;&amp; mAdapterHasStableIds) {</span><br><span class="line">                <span class="comment">// If the adapter has stable IDs, we can reuse the view for</span></span><br><span class="line">                <span class="comment">// the same data.</span></span><br><span class="line">                <span class="keyword">if</span> (mTransientStateViewsById == <span class="keyword">null</span>) {</span><br><span class="line">                    mTransientStateViewsById = <span class="keyword">new</span> LongSparseArray&lt;&gt;();</span><br><span class="line">                }</span><br><span class="line">                mTransientStateViewsById.put(lp.itemId, scrap);</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (!mDataChanged) {</span><br><span class="line">                <span class="comment">// If the data hasn&apos;t changed, we can reuse the views at</span></span><br><span class="line">                <span class="comment">// their old positions.</span></span><br><span class="line">                <span class="keyword">if</span> (mTransientStateViews == <span class="keyword">null</span>) {</span><br><span class="line">                    mTransientStateViews = <span class="keyword">new</span> SparseArray&lt;&gt;();</span><br><span class="line">                }</span><br><span class="line">                mTransientStateViews.put(position, scrap);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// Otherwise, we&apos;ll have to remove the view and start over.</span></span><br><span class="line">                getSkippedScrap().add(scrap);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">if</span> (mViewTypeCount == <span class="number">1</span>) {</span><br><span class="line">                mCurrentScrap.add(scrap);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                mScrapViews[viewType].add(scrap);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mRecyclerListener != <span class="keyword">null</span>) {</span><br><span class="line">                mRecyclerListener.onMovedToScrapHeap(scrap);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>RecycleBin&#x7684;&#x4EE3;&#x7801;&#x4E0D;&#x662F;&#x5F88;&#x5927;&#x4F46;&#x662F;&#x5168;&#x90E8;&#x5728;&#x535A;&#x5BA2;&#x8BB2;&#x89E3;&#x6BCF;&#x4E2A;&#x7EC6;&#x8282;&#x4E00;&#x6765;&#x81EA;&#x5DF1;&#x4E5F;&#x4E0D;&#x662F;&#x5B8C;&#x5168;&#x61C2;&#x6BCF;&#x4E2A;&#x7EC6;&#x8282;&#xFF0C;&#x800C;&#x4E14;&#x592A;&#x5173;&#x6CE8;&#x7EC6;&#x8282;&#x6211;&#x4EEC;&#x5E38;&#x5E38;&#x4F1A;&#x9677;&#x5165;&#x7EC6;&#x8282;&#x800C;&#x770B;&#x4E0D;&#x5230;&#x6574;&#x4E2A;&#x539F;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5206;&#x6790;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x4E0D;&#x8981;&#x592A;&#x7EA0;&#x7ED3;&#x7EC6;&#x8282;&#xFF0C;&#x7B49;&#x5230;&#x540E;&#x9762;&#x6709;&#x7591;&#x95EE;&#x6216;&#x8005;&#x9047;&#x5230;&#x95EE;&#x9898;&#x9700;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x65F6;&#x5019;&#x5728;&#x8BA4;&#x771F;&#x5206;&#x6790;&#x5BF9;&#x5E94;&#x7684;&#x7EC6;&#x8282;&#x3002;
&#x597D;&#x4E86;&#x8A00;&#x5F52;&#x6B63;&#x4F20;&#xFF0C;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x8D34;&#x51FA;&#x4E86;RecycleBin&#x7684;&#x5173;&#x952E;&#x4EE3;&#x7801;&#xFF0C;&#x6B63;&#x5982;&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x7684;RecycleBin&#x5305;&#x542B;mActiveViews&#xFF0C;&#x4EE5;&#x53CA;mScrapViews&#x8FD9;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x8FD9;&#x91CC;&#x518D;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x5206;&#x6790;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#xFF1A;&#x5728;&#x5B66;&#x4E60;&#x6E90;&#x4EE3;&#x7801;&#x7684;&#x65F6;&#x5019;&#x5148;&#x770B;&#x82F1;&#x6587;&#x6CE8;&#x91CA;&#xFF0C;&#x4E00;&#x822C;Android&#x4EE3;&#x7801;&#x4E2D;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x6709;&#x6BD4;&#x8F83;&#x8BE6;&#x7EC6;&#x7684;&#x6CE8;&#x91CA;&#x7684;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x6CE8;&#x91CA;&#x5F80;&#x5F80;&#x4F1A;&#x5FEB;&#x901F;&#x4E86;&#x89E3;&#x8FD9;&#x4E1C;&#x897F;&#x5230;&#x5E95;&#x662F;&#x5E72;&#x5417;&#x7684;&#xFF0C;&#x5230;&#x5E95;&#x8981;&#x4E0D;&#x8981;&#x7EE7;&#x7EED;&#x6DF1;&#x5165;&#x770B;&#x4E0B;&#x53BB;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x770B;&#x4E0B;mActiveViews &#x7684;&#x6CE8;&#x91CA;&#xFF1A;</p>
<blockquote>
<p>Views that were on screen at the start of layout. This array is populated at the start of layout, and at the end of layout all view in mActiveViews are moved to mScrapViews.Views in mActiveViews represent a contiguous range of Views, with position of the first view store in mFirstActivePosition.</p>
</blockquote>
<p>&#x5927;&#x4F53;&#x7684;&#x610F;&#x601D;&#x5C31;&#x662F;&#x5B83;&#x7528;&#x4E8E;&#x5B58;&#x653E;&#x7684;&#x662F;&#x5728;&#x6BCF;&#x6B21;&#x5F00;&#x59CB;&#x5E03;&#x5C40;&#x4E4B;&#x524D;&#x4F4D;&#x4E8E;&#x5C4F;&#x5E55;&#x4E0A;&#x7684;&#x90A3;&#x4E9B;item View&#xFF0C;&#x5728;&#x5E03;&#x5C40;&#x7ED3;&#x675F;&#x540E;&#x6240;&#x6709;&#x5B58;&#x5728;&#x4E8E;mActiveViews&#x7684;item View&#x90FD;&#x4F1A;&#x79FB;&#x5230;mScrapViews&#xFF0C;mActiveViews&#x5B58;&#x653E;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x8FDE;&#x7EED;&#x7684;&#x4ECE;mFirstActivePosition&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5230;&#x5C4F;&#x5E55;&#x6240;&#x80FD;&#x663E;&#x793A;&#x4E0B;&#x7684;&#x6700;&#x5927;item&#x6570;&#x76EE;&#x3002;</p>
<p>&#x90A3;&#x4E48;mScrapViews &#x53C8;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>
<blockquote>
<p>Unsorted views that can be used by the adapter as a convert view.</p>
</blockquote>
<p>&#x4ECE;&#x6CE8;&#x91CA;&#x4E2D;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x5230;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x5E8F;&#x6392;&#x5217;&#x7684;&#x5217;&#x8868;&#xFF0C;&#x8FD9;&#x4E9B;&#x89C6;&#x56FE;&#x53EF;&#x4EE5;&#x88AB;&#x4F20;&#x5165;Adapter&#x4E2D;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;convert view.</p>
<ul>
<li>fillActiveViews &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x5C06;AbsListView&#x6240;&#x6709;&#x7684;&#x5B50;item &#x6DFB;&#x52A0;&#x5230;ActiveViews&#x4E2D;&#xFF0C;&#x5B83;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;childCount&#x8868;&#x793A;&#x5C4F;&#x5E55;&#x663E;&#x793A;&#x7684;&#x5B50;item&#x7684;&#x6570;&#x76EE;&#xFF0C;firstActivePosition&#x8868;&#x793A;&#x5C4F;&#x5E55;&#x4E0A;&#x7B2C;&#x4E00;&#x4E2A;item&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x8FD9;&#x4E2A;&#x5F88;&#x7B80;&#x5355;&#x3002;</li>
<li>getActiveView &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C06;&#x4F1A;&#x4F20;&#x5165;&#x4F4D;&#x7F6E;&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x4F1A;&#x4ECE;mActiveViews&#x4E2D;&#x5BFB;&#x627E;&#x5E76;&#x53D6;&#x51FA;item View&#xFF0C;&#x5982;&#x679C;&#x627E;&#x5230;&#x5728;mActiveViews&#x4E2D;&#x5BF9;&#x5E94;&#x7684;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;View&#x5C06;&#x4F1A;&#x88AB;&#x7F6E;&#x4E3A;null</li>
<li>addScrapView &#x8FD9;&#x4E2A;&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x6240;&#x5904;&#x7406;&#x7684;&#x4EFB;&#x52A1;&#x5F88;&#x7B80;&#x5355;&#x5C31;&#x662F;&#x5C06;&#x5E9F;&#x5F03;&#x7684;View&#x6DFB;&#x52A0;&#x5230;mScrapViews&#x4E2D;&#xFF0C;getScrapView&#x76F8;&#x53CD;&#x5C31;&#x662F;&#x4ECE;ScrapView&#x4E2D;&#x53D6;&#x51FA;view&#x3002;</li>
</ul>
<p>&#x5927;&#x5BB6;&#x770B;&#x5B8C;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x4E0D;&#x662F;&#x548C;&#x6211;&#x6709;&#x4E00;&#x6837;&#x7684;&#x611F;&#x89C9;&#xFF0C;&#x8FD9;&#x4EE3;&#x7801;&#x6709;&#x5565;&#x8425;&#x517B;&#xFF1F;&#x786E;&#x5B9E;&#x5982;&#x679C;&#x4E0D;&#x7ED3;&#x5408;ListView&#x4EE3;&#x7801;&#x6765;&#x5206;&#x6790;&#xFF0C;&#x662F;&#x5B8C;&#x5168;&#x770B;&#x4E0D;&#x51FA;RecycleBin&#x7684;&#x539F;&#x7406;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x4E86;&#x89E3;&#x5230;RecycleBin&#x4E2D;&#x6709;&#x4EC0;&#x4E48;&#x4E4B;&#x540E;&#x7686;&#x6765;&#x6765;&#x5C31;&#x9700;&#x8981;&#x770B;&#x5B83;&#x600E;&#x4E48;&#x5728;Listview&#x4E2D;&#x8D77;&#x5230;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x7684;&#x4F5C;&#x7528;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x6765;&#x8BB2;&#x89E3;&#x4E0B;ListView&#x548C;RecycleBin&#x5982;&#x4F55;&#x4EA4;&#x4E92;&#x5B9E;&#x73B0;&#x7F13;&#x5B58;&#x7684;&#xFF1A;</p>
<p>&#x4E3B;&#x8981;&#x5173;&#x6CE8;&#x5982;&#x4E0B;&#x4E24;&#x4E2A;&#x60C5;&#x51B5;&#xFF1A;</p>
<ul>
<li>ListView&#x7684;item View &#x56DE;&#x6536;&#x5230; RecycleBin</li>
<li>&#x4ECE;RecycleBin&#x4E2D;&#x53D6;&#x51FA;View&#x4F5C;&#x4E3A;ListView&#x7684;item View</li>
</ul>
<p>&#x6211;&#x4EEC;&#x4ECE;&#x7ED8;&#x5236;&#x7684;&#x89D2;&#x5EA6;&#x51FA;&#x53D1;&#xFF0C;&#x89C2;&#x5BDF;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5728;&#x7ED8;&#x5236;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x5B9E;&#x73B0;&#x5B50;View&#x7684;&#x7F13;&#x5B58;&#xFF1A;</p>
<p>&#x9996;&#x5148;&#x5728;&#x5206;&#x6790;&#x4EE3;&#x7801;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x4E86;&#x89E3;&#x4E0B;ListView&#x7684;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#xFF0C;&#x8FD9;&#x6837;&#x6709;&#x5229;&#x4E8E;&#x6211;&#x4EEC;&#x5BF9;&#x4EE3;&#x7801;&#x7684;&#x4E86;&#x89E3;&#xFF08;&#x8BF4;&#x767D;&#x4E86;&#x5C31;&#x662F;&#x77E5;&#x9053;&#x5728;&#x5B50;&#x7C7B;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x987A;&#x7740;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x627E;&#xFF09;</p>
<p><figure class="highlight elm"><table><tr><td class="code"><pre><span class="line"><span class="type">ListView</span>-&gt; <span class="type">AbsListView</span> -&gt;<span class="type">AdapterView</span> -&gt; <span class="type">ViewGroup</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> l, <span class="keyword">int</span> t, <span class="keyword">int</span> r, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">super</span>.onLayout(changed, l, t, r, b);</span><br><span class="line">    mInLayout = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> childCount = getChildCount();</span><br><span class="line">    <span class="keyword">if</span> (changed) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childCount; i++) {</span><br><span class="line">            getChildAt(i).forceLayout();</span><br><span class="line">        }</span><br><span class="line">        mRecycler.markChildrenDirty();</span><br><span class="line">    }</span><br><span class="line">    layoutChildren();</span><br><span class="line">    mInLayout = <span class="keyword">false</span>;</span><br><span class="line">    mOverscrollMax = (b - t) / OVERSCROLL_LIMIT_DIVISOR;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Move somewhere sane. This doesn&apos;t belong in onLayout().</span></span><br><span class="line">    <span class="keyword">if</span> (mFastScroll != <span class="keyword">null</span>) {</span><br><span class="line">        mFastScroll.onItemCountChanged(getChildCount(), mItemCount);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>onlayout&#x65B9;&#x6CD5;&#x662F;&#x5728;AbsListView&#x4E2D;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;ListView&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x8FD9;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#x5C5E;&#x4E8E;GridView&#x4EE5;&#x53CA;ListView&#x901A;&#x7528;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5C06;&#x5176;&#x653E;&#x5728;&#x7236;&#x7C7B;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x5728;&#x5E03;&#x5C40;&#x5927;&#x5C0F;&#x6216;&#x8005;&#x4F4D;&#x7F6E;&#x7B49;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x65F6;&#x5019;&#x5C06;&#x4F1A;&#x8C03;&#x7528;onLayout()&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x4F1A;&#x5F3A;&#x5236;&#x8981;&#x6C42;&#x6240;&#x6709;&#x5B50;item&#x8FDB;&#x884C;&#x91CD;&#x7ED8;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4ED4;&#x7EC6;&#x770B;&#x4F1A;&#x53D1;&#x73B0;layoutChildren()&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x770B;&#x4E0B;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">@Override</span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> layoutChildren() {</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">		<span class="comment">//......</span></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> childrenTop = mListPadding.top;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> childrenBottom = mBottom - mTop - mListPadding.bottom;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> childCount = getChildCount();</span><br><span class="line">        <span class="keyword">int</span> <span class="keyword">index</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> delta = <span class="number">0</span>;</span><br><span class="line">        View sel;</span><br><span class="line">        View oldSel = <span class="keyword">null</span>;</span><br><span class="line">        View oldFirst = <span class="keyword">null</span>;</span><br><span class="line">        View newSel = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// Remember stuff we will need down below</span></span><br><span class="line">        <span class="keyword">switch</span> (mLayoutMode) {</span><br><span class="line">  		<span class="comment">//......</span></span><br><span class="line">        <span class="keyword">case</span> LAYOUT_MOVE_SELECTION:</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="comment">// Remember the previously selected view</span></span><br><span class="line">            <span class="keyword">index</span> = mSelectedPosition - mFirstPosition;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">index</span> &gt;= <span class="number">0</span> &amp;&amp; <span class="keyword">index</span> &lt; childCount) {</span><br><span class="line">                oldSel = getChildAt(<span class="keyword">index</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// Remember the previous first child</span></span><br><span class="line">            oldFirst = getChildAt(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (mNextSelectedPosition &gt;= <span class="number">0</span>) {</span><br><span class="line">                delta = mNextSelectedPosition - mSelectedPosition;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// Caution: newSel might be null</span></span><br><span class="line">            newSel = getChildAt(<span class="keyword">index</span> + delta);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">boolean</span> dataChanged = mDataChanged;</span><br><span class="line">        <span class="keyword">if</span> (dataChanged) {</span><br><span class="line">            handleDataChanged();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">       <span class="comment">//......</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> firstPosition = mFirstPosition;</span><br><span class="line">        <span class="keyword">final</span> RecycleBin recycleBin = mRecycler;</span><br><span class="line">        <span class="keyword">if</span> (dataChanged) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childCount; i++) {</span><br><span class="line">                recycleBin.addScrapView(getChildAt(i), firstPosition+i);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            recycleBin.fillActiveViews(childCount, firstPosition);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Clear out old views</span></span><br><span class="line">        detachAllViewsFromParent();</span><br><span class="line">        recycleBin.removeSkippedScrap();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (mLayoutMode) {</span><br><span class="line">        <span class="comment">//......</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">if</span> (childCount == <span class="number">0</span>) {</span><br><span class="line">                <span class="keyword">if</span> (!mStackFromBottom) {</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> position = lookForSelectablePosition(<span class="number">0</span>, <span class="keyword">true</span>);</span><br><span class="line">                    setSelectedPositionInt(position);</span><br><span class="line">                    sel = fillFromTop(childrenTop);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> position = lookForSelectablePosition(mItemCount - <span class="number">1</span>, <span class="keyword">false</span>);</span><br><span class="line">                    setSelectedPositionInt(position);</span><br><span class="line">                    sel = fillUp(mItemCount - <span class="number">1</span>, childrenBottom);</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">if</span> (mSelectedPosition &gt;= <span class="number">0</span> &amp;&amp; mSelectedPosition &lt; mItemCount) {</span><br><span class="line">                    sel = fillSpecific(mSelectedPosition,</span><br><span class="line">                            oldSel == <span class="keyword">null</span> ? childrenTop : oldSel.getTop());</span><br><span class="line">                } <span class="keyword">else</span> <span class="keyword">if</span> (mFirstPosition &lt; mItemCount) {</span><br><span class="line">                    sel = fillSpecific(mFirstPosition,</span><br><span class="line">                            oldFirst == <span class="keyword">null</span> ? childrenTop : oldFirst.getTop());</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    sel = fillSpecific(<span class="number">0</span>, childrenTop);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Flush any cached views that did not get reused above</span></span><br><span class="line">        recycleBin.scrapActiveViews();</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">    } <span class="keyword">finally</span> {</span><br><span class="line">       <span class="comment">//......</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;&#x4ECB;&#x7ECD;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E0B;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x7247;&#xFF1A;
<figure class="highlight oxygene"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> int firstPosition = mFirstPosition;</span><br><span class="line"><span class="keyword">final</span> RecycleBin recycleBin = mRecycler;</span><br><span class="line"><span class="keyword">if</span> (dataChanged) <span class="comment">{</span><br><span class="line">    for (int i = 0; i &lt; childCount; i++) {</span><br><span class="line">        recycleBin.addScrapView(getChildAt(i), firstPosition+i);</span><br><span class="line">    }</span></span><br><span class="line">} <span class="keyword">else</span> <span class="comment">{</span><br><span class="line">    recycleBin.fillActiveViews(childCount, firstPosition);</span><br><span class="line">}</span></span><br></pre></td></tr></table></figure></p>
<p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x4E0B;dataChanged&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#x600E;&#x4E48;&#x63A7;&#x5236;&#x7684;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#x5728;Adapter&#x8C03;&#x7528;&#x4E86;notifyDataSetChanged&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x77E5;Adapter&#x7684;&#x6570;&#x636E;&#x6E90;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#xFF0C;&#x6B64;&#x65F6;dataChanged&#x53D8;&#x91CF;&#x5C31;&#x4E3A;true&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x4F1A;&#x5C06;&#x5F53;&#x524D;&#x7684;&#x6240;&#x6709;&#x53EF;&#x89C6;item &#x901A;&#x8FC7;RecycleBin&#x7684;addScrapView&#x65B9;&#x6CD5;&#x5C06;&#x5176;&#x653E;&#x5165;RecycleBin&#x7684;&#x5E9F;&#x5F03;List&#x4E2D;&#xFF0C;&#x4F9B;&#x540E;&#x7EED;&#x590D;&#x7528;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x8BA9;&#x5927;&#x5BB6;&#x5730;&#x66F4;&#x6E05;&#x695A;&#x6211;&#x628A;&#x90A3;&#x4E9B;&#x65E0;&#x7528;&#x7684;&#x4EE3;&#x7801;&#x5220;&#x9664;&#x6389;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x4ECE;&#x7B2C;&#x4E00;&#x6B21;layout&#x7684;&#x60C5;&#x5F62;&#x8FDB;&#x884C;&#x5206;&#x6790;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;layout&#x7684;&#x65F6;&#x5019;&#x5E03;&#x5C40;&#x4E0A;&#x662F;&#x6CA1;&#x6709;&#x5B50;&#x5143;&#x7D20;&#x7684;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;dataChanged = false&#xFF0C;childCount = 0&#x6240;&#x4EE5;fillActiveViews&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E5F;&#x662F;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4F5C;&#x7528;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x6574;&#x4E2A;&#x5173;&#x952E;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (childCount == <span class="number">0</span>) {</span><br><span class="line">    <span class="keyword">if</span> (!mStackFromBottom) {</span><br><span class="line">        final <span class="keyword">int</span> position = lookForSelectablePosition(<span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">        setSelectedPositionInt(position);</span><br><span class="line">        sel = fillFromTop(childrenTop);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        final <span class="keyword">int</span> position = lookForSelectablePosition(mItemCount - <span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line">        setSelectedPositionInt(position);</span><br><span class="line">        sel = fillUp(mItemCount - <span class="number">1</span>, childrenBottom);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5C31;&#x662F;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x7684;&#x65B9;&#x5411;&#x6765;&#x8C03;&#x7528;fillFromTop&#x8FD8;&#x662F;fillUp&#x8FD9;&#x4E24;&#x4E2A;&#x5176;&#x5B9E;&#x529F;&#x80FD;&#x90FD;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x533A;&#x522B;&#x53EA;&#x662F;&#x5728;&#x4E8E;&#x65B9;&#x5411;&#x800C;&#x5DF2;&#xFF0C;&#x6211;&#x4EEC;&#x4EE5;fillFromTop&#x6765;&#x5206;&#x6790;&#xFF1A;</p>
<p><figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">/<span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line"> <span class="keyword">*</span> Fills the list from top to bottom, starting with mFirstPosition</span><br><span class="line"> <span class="keyword">*</span></span><br><span class="line"> <span class="keyword">*</span> <span class="comment">@param nextTop The location where the top of the first item should be</span></span><br><span class="line"> <span class="keyword">*</span>        drawn</span><br><span class="line"> <span class="keyword">*</span></span><br><span class="line"> <span class="keyword">*</span> <span class="comment">@return The view that is currently selected</span></span><br><span class="line"> <span class="keyword">*</span>/</span><br><span class="line">private View fillFromTop(int nextTop) {</span><br><span class="line">    mFirstPosition = Math.min(mFirstPosition, mSelectedPosition);</span><br><span class="line">    mFirstPosition = Math.min(mFirstPosition, mItemCount - 1);</span><br><span class="line">    if (mFirstPosition <span class="variable">&lt; 0) {</span><br><span class="line">        mFirstPosition = 0;</span><br><span class="line">    }</span><br><span class="line">    return fillDown(mFirstPosition, nextTop);</span><br><span class="line">}</span></span><br></pre></td></tr></table></figure></p>
<p>&#x7247;&#x6BB5;&#x6CA1;&#x5B9E;&#x5728;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x5B9E;&#x9645;&#x7684;&#x529F;&#x80FD;&#x4F4D;&#x4E8E;fillDown&#x4E2D;&#x3002;</p>
<p><figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="label">private</span> View fillDown(int pos, int nextTop) {</span><br><span class="line">    View <span class="keyword">selectedView </span>= null<span class="comment">;</span></span><br><span class="line">    int <span class="preprocessor">end</span> = (mBottom - mTop)<span class="comment">;</span></span><br><span class="line">    <span class="preprocessor">if</span> ((mGroupFlags &amp; CLIP_TO_PADDING_MASK) == CLIP_TO_PADDING_MASK) {</span><br><span class="line">        <span class="preprocessor">end</span> -= mListPadding.<span class="keyword">bottom;</span><br><span class="line"></span>    }</span><br><span class="line">    <span class="preprocessor">while</span> (nextTop &lt; <span class="preprocessor">end</span> &amp;&amp; pos &lt; mItemCount) {</span><br><span class="line">        // is this the <span class="keyword">selected </span><span class="keyword">item?</span><br><span class="line"></span>        <span class="keyword">boolean </span><span class="keyword">selected </span>= pos == mSelectedPosition<span class="comment">;</span></span><br><span class="line">        View child = makeAndAddView(pos, nextTop, true, mListPadding.left, <span class="keyword">selected);</span><br><span class="line"></span>        nextTop = child.getBottom() + mDividerHeight<span class="comment">;</span></span><br><span class="line">        <span class="preprocessor">if</span> (<span class="keyword">selected) </span>{</span><br><span class="line">            <span class="keyword">selectedView </span>= child<span class="comment">;</span></span><br><span class="line">        }</span><br><span class="line">        pos++<span class="comment">;</span></span><br><span class="line">    }</span><br><span class="line">    setVisibleRangeHint(mFirstPosition, mFirstPosition + getChildCount() - <span class="number">1</span>)<span class="comment">;</span></span><br><span class="line">    return <span class="keyword">selectedView;</span><br><span class="line"></span>}</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;fillDown&#x4E2D;&#x4F1A;&#x4ECE;&#x5C4F;&#x5E55;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5F00;&#x59CB;&#xFF0C;&#x904D;&#x5386;&#x586B;&#x5145;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x8FD9;&#x91CC;&#x6700;&#x5173;&#x952E;&#x7684;&#x4EE3;&#x7801;&#x662F;makeAndAddView</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function">View <span class="title">makeAndAddView</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">int</span> y, <span class="keyword">boolean</span> flow, <span class="keyword">int</span> childrenLeft,</span><br><span class="line">        <span class="keyword">boolean</span> selected)</span> </span>{</span><br><span class="line">    View child;</span><br><span class="line">    <span class="keyword">if</span> (!mDataChanged) {</span><br><span class="line">        <span class="comment">// Try to use an existing view for this position</span></span><br><span class="line">        child = mRecycler.getActiveView(position);</span><br><span class="line">        <span class="keyword">if</span> (child != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">// Found it -- we&apos;re using an existing child</span></span><br><span class="line">            <span class="comment">// This just needs to be positioned</span></span><br><span class="line">            setupChild(child, position, y, flow, childrenLeft, selected, <span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">return</span> child;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Make a new view for this position, or convert an unused view if possible</span></span><br><span class="line">    child = obtainView(position, mIsScrap);</span><br><span class="line">    <span class="comment">// This needs to be positioned and measured</span></span><br><span class="line">    setupChild(child, position, y, flow, childrenLeft, selected, mIsScrap[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> child;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;makeAndAddView&#x65B9;&#x6CD5;&#x4E2D;&#x5C1D;&#x8BD5;&#x4ECE;&#x4ECE;RecycleBin&#x5F53;&#x4E2D;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;ActiveView&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x5E03;&#x5C40;&#x65F6;&#x5019;RecycleBin&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x8FD4;&#x56DE;&#x7684;&#x662F;null&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x76F4;&#x63A5;&#x8C03;&#x7528;obtainView&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x6216;&#x8005;&#x5C1D;&#x8BD5;&#x4ECE;ScropView&#x4E2D;&#x6216;&#x5176;&#x4E00;&#x4E2A;&#x5B50;View&#x6765;&#x590D;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x65F6;&#x5019;ScropView&#x6570;&#x7EC4;&#x4E5F;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x5728;obtainView&#x65B9;&#x6CD5;&#x4E2D;&#x5B9E;&#x73B0;&#x7684;&#x903B;&#x8F91;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x8FD9;&#x91CC;&#x63D0;&#x4E0B;&#xFF0C;&#x7D27;&#x63A5;&#x7740;&#x5C31;&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x5B50;View&#x901A;&#x8FC7;setupChild&#x6DFB;&#x52A0;&#x5230;ListView&#x4E2D;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x91CD;&#x70B9;&#x5173;&#x6CE8;&#x4E0B;obtainView&#xFF1A;</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="function">View <span class="title">obtainView</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">boolean</span>[] isScrap)</span> </span>{</span><br><span class="line">	<span class="comment">//.......</span></span><br><span class="line">    <span class="keyword">final</span> View scrapView = mRecycler.getScrapView(position);</span><br><span class="line">    <span class="keyword">final</span> View child = mAdapter.getView(position, scrapView, <span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">if</span> (scrapView != <span class="keyword">null</span>) {</span><br><span class="line">        <span class="keyword">if</span> (child != scrapView) {</span><br><span class="line">            <span class="comment">// Failed to re-bind the data, return scrap to the heap.</span></span><br><span class="line">            mRecycler.addScrapView(scrapView, position);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            isScrap[<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">            <span class="comment">// Finish the temporary detach started in addScrapView().</span></span><br><span class="line">            child.dispatchFinishTemporaryDetach();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">	<span class="comment">//.......</span></span><br><span class="line">    <span class="keyword">return</span> child;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>obtainView&#x65B9;&#x6CD5;&#x4E5F;&#x662F;&#x53C8;&#x81ED;&#x53C8;&#x957F;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53EA;&#x770B;&#x5173;&#x952E;&#x7684;&#x3002;&#x5B83;&#x4F1A;&#x8C03;&#x7528;getScrapView&#x4ECE;mRecycler&#x7684;ScrapView&#x4E2D;&#x83B7;&#x53D6;&#x53EF;&#x4EE5;&#x590D;&#x7528;&#x7684;scrapView&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x4EC0;&#x4E48;&#x90FD;&#x6CA1;&#x6709;&#xFF0C;&#x6240;&#x4EE5;scrapView&#x4E3A;null&#x3002;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x5927;&#x5BB6;&#x719F;&#x6089;&#x4E86;&#x628A;&#xFF0C;
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> View child = mAdapter.getView(position, scrapView, <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure></p>
<p>&#x4EC0;&#x4E48;&#x4E0D;&#x719F;&#x6089;&#xFF1F;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;&#x8C03;&#x7528;Adapter&#x7684;getView&#x65B9;&#x6CD5;&#x554A;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x63D0;&#x5230;&#x7684;convertView&#x3002;&#x60F3;&#x5FC5;&#x770B;&#x4E86;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5927;&#x5BB6;&#x90FD;&#x4F1A;&#x6709;&#x5370;&#x8C61;&#x5427;&#xFF1A;
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> View getView(<span class="built_in">int</span> position, View convertView, ViewGroup parent) {</span><br><span class="line">    ViewHolder holder = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (convertView == <span class="keyword">null</span>) {</span><br><span class="line">        holder=<span class="keyword">new</span> ViewHolder();</span><br><span class="line">        convertView = mInflater.inflate(R.layout.vlist2, <span class="keyword">null</span>);</span><br><span class="line">        holder.img = (ImageView)convertView.findViewById(R.id.img);</span><br><span class="line">        holder.title = (TextView)convertView.findViewById(R.id.title);</span><br><span class="line">        holder.info = (TextView)convertView.findViewById(R.id.info);</span><br><span class="line">        holder.viewBtn =(Button)convertView.findViewById(R.id.view_btn);</span><br><span class="line">        convertView.setTag(holder);</span><br><span class="line">    }<span class="keyword">else</span> {</span><br><span class="line">        holder = (ViewHolder)convertView.getTag();</span><br><span class="line">    }</span><br><span class="line">    holder.img.setBackgroundResource((Integer)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">&quot;img&quot;</span>));</span><br><span class="line">    holder.title.setText((<span class="keyword">String</span>)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">&quot;title&quot;</span>));</span><br><span class="line">    holder.info.setText((<span class="keyword">String</span>)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">&quot;info&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> convertView;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x7B2C;&#x4E00;&#x6B21;layout&#x7684;&#x65F6;&#x5019;&#x6211;&#x4EEC;convertView&#x4E3A;&#x7A7A;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;inflate&#x4E00;&#x4E2A;&#x4F5C;&#x4E3A;convertView&#x5E76;&#x8FD4;&#x56DE;&#x3002;makeAndAddView#setupChild&#x5C31;&#x5C06;&#x8FD9;&#x4E2A;convertView&#x6DFB;&#x52A0;&#x5230;&#x5E03;&#x5C40;&#x4E2D;&#x3002;</p>
<p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setupChild</span><span class="params">(View child, <span class="keyword">int</span> position, <span class="keyword">int</span> y, boolean flowDown, <span class="keyword">int</span> childrenLeft,</span><br><span class="line">        boolean selected, boolean recycled)</span> </span>{</span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line">    <span class="keyword">if</span> ((recycled &amp;&amp; !p.forceAdd) || (p.recycledHeaderFooter</span><br><span class="line">            &amp;&amp; p.viewType == AdapterView.ITEM_VIEW_TYPE_HEADER_OR_FOOTER)) {</span><br><span class="line">        attachViewToParent(child, flowDown ? -<span class="number">1</span> : <span class="number">0</span>, p);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        p.forceAdd = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (p.viewType == AdapterView.ITEM_VIEW_TYPE_HEADER_OR_FOOTER) {</span><br><span class="line">            p.recycledHeaderFooter = <span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line">        addViewInLayout(child, flowDown ? -<span class="number">1</span> : <span class="number">0</span>, p, <span class="literal">true</span>);</span><br><span class="line">    }</span><br><span class="line"> 	<span class="comment">//......</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>setupChild&#x65B9;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x4E86;addViewInLayout&#x5C06;convertView&#x6DFB;&#x52A0;&#x5230;ListView&#x4E2D;&#x3002;</p>
<p><img src="/2016/07/27/Android-&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;ListView/2.png" alt=""></p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x5728;&#x7ECF;&#x8FC7;&#x7B2C;&#x4E00;&#x6B21;layout&#x540E;&#xFF0C;&#x5F80;&#x540E;&#x7684;&#x5E03;&#x5C40;&#x548C;&#x4E4B;&#x524D;&#x7684;&#x5E03;&#x5C40;&#x6709;&#x4EC0;&#x4E48;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x5730;&#x65B9;&#x3002;
&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x4ECE;layoutChildren&#x5F00;&#x59CB;&#xFF0C;&#x8FD9;&#x91CC;&#x548C;&#x4E0A;&#x9762;&#x7684;&#x533A;&#x522B;&#x662F;&#x7531;&#x4E8E;childCount&#x4E0D;&#x4E3A;0&#x6240;&#x4EE5;fillActiveViews&#x4F1A;&#x5C06;Child Item&#x6DFB;&#x52A0;&#x5230;ActiviteView&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;
&#x7D27;&#x63A5;&#x7740;&#x8C03;&#x7528;fillSpecific&#xFF0C;&#x8FD9;&#x4E2A;&#x4F1A;&#x4ECE;&#x6307;&#x5B9A;&#x7684;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x52A0;&#x8F7D;Child item&#x3002;&#x7D27;&#x63A5;&#x7740;&#x8C03;&#x7528;makeAndAddView&#xFF0C;&#x8FD9;&#x65F6;&#x5019;makeAndAddView&#x8DD1;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x548C;&#x4E4B;&#x524D;&#x4E0D;&#x4E00;&#x6837;&#x4E86;&#xFF0C;&#x7531;&#x4E8E;mDataChanged&#x4E3A;false&#xFF08;&#x5047;&#x8BBE;&#x5F53;&#x524D;&#x6570;&#x636E;&#x96C6;&#x6BCF;&#x53D8;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6CA1;&#x6709;&#x5BF9;&#x6570;&#x636E;&#x96C6;&#x8FDB;&#x884C;&#x589E;&#x5220;&#x7684;&#x64CD;&#x4F5C;&#xFF09;&#x8FD9;&#x6B21;&#x8C03;&#x7528;mRecycler.getActiveView&#x7684;&#x65F6;&#x5019;&#x8FD4;&#x56DE;&#x7684;&#x5C31;&#x4E0D;&#x662F;&#x7A7A;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x4E86;RecycleBin&#x7684;fillActiveViews()&#x65B9;&#x6CD5;&#x6765;&#x7F13;&#x5B58;ChildView&#x3002;&#x6240;&#x4EE5;&#x5C31;&#x4E0D;&#x4F1A;&#x518D;&#x8FDB;&#x5165;obtainView()&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x662F;&#x4F1A;&#x76F4;&#x63A5;&#x8C03;&#x7528;setupChild()&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x907F;&#x514D;&#x4E86;&#x91CD;&#x65B0;inflate&#x3002;
&#x63A5;&#x4E0B;&#x6765;&#x770B;&#x4E0B;setupChild()&#xFF0C;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#x8C03;&#x7528;&#x4E86;detachAllViewsFromParent&#x6240;&#x4EE5;&#x5B50;View&#x5E94;&#x8BE5;&#x8C03;&#x7528;attachViewToParent()&#x65B9;&#x6CD5;&#x3002;&#x800C;&#x4E0D;&#x662F;&#x524D;&#x9762;&#x63D0;&#x5230;&#x7684;addViewInLayout&#x65B9;&#x6CD5;&#x3002;
<img src="/2016/07/27/Android-&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B;ListView/3.png" alt=""></p>
<p>&#x597D;&#x4E86;&#x6211;&#x4EEC;&#x770B;&#x5B8C;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x53EF;&#x80FD;&#x89C9;&#x5F97;&#x8FD8;&#x662F;&#x6CA1;&#x6709;&#x63A5;&#x89E6;&#x5230;&#x6700;&#x6838;&#x5FC3;&#x7684;&#x7F13;&#x5B58;&#x673A;&#x5236;&#xFF0C;&#x6700;&#x5173;&#x952E;&#x7684;&#x90E8;&#x5206;&#x662F;&#x5728;&#x6ED1;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x5982;&#x4F55;&#x7F13;&#x5B58;&#x7684;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x8FD9;&#x90E8;&#x5206;&#x903B;&#x8F91;&#xFF1A;
&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x7684;&#x4EA4;&#x4E92;&#x4E8B;&#x4EF6;&#x90FD;&#x4F1A;&#x88AB;&#x4F20;&#x9012;&#x5230;onTouchEvent&#x4E2D;&#xFF0C;&#x5728;ListView&#x4E5F;&#x4E0D;&#x4F8B;&#x5916;&#xFF0C;onTouchEvent&#x6709;&#x5F88;&#x591A;&#x4E8B;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x5173;&#x6CE8;ACTION_MOVE,&#x5728;&#x8FD9;&#x90E8;&#x5206;&#x4EE3;&#x7801;&#x4E2D;&#x6211;&#x4EEC;&#x91CD;&#x70B9;&#x5173;&#x6CE8;trackMotionScroll&#x65B9;&#x6CD5;&#xFF1A;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x987E;&#x540D;&#x601D;&#x4E49;&#x5C31;&#x662F;&#x8DDF;&#x8E2A;&#x6ED1;&#x52A8;&#x4E8B;&#x4EF6;&#xFF1A;&#x8FD9;&#x4E2A;&#x4EE3;&#x7801;&#x4E5F;&#x5F88;&#x957F;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x4ECE;&#x4E2D;&#x5173;&#x6CE8;&#x91CD;&#x70B9;&#x3002;</p>
<p><figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="built_in">boolean</span> trackMotionScroll(<span class="built_in">int</span> deltaY, <span class="built_in">int</span> incrementalDeltaY) {</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> childCount = getChildCount();</span><br><span class="line">    <span class="keyword">if</span> (childCount == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> firstTop = getChildAt(<span class="number">0</span>).getTop();</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> lastBottom = getChildAt(childCount - <span class="number">1</span>).getBottom();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> Rect listPadding = mListPadding;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &quot;effective padding&quot; In this case is the amount of padding that affects</span></span><br><span class="line">    <span class="comment">// how much space should not be filled by items. If we don&apos;t clip to padding</span></span><br><span class="line">    <span class="comment">// there is no effective padding.</span></span><br><span class="line">    <span class="built_in">int</span> effectivePaddingTop = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> effectivePaddingBottom = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> ((mGroupFlags &amp; CLIP_TO_PADDING_MASK) == CLIP_TO_PADDING_MASK) {</span><br><span class="line">        effectivePaddingTop = listPadding.top;</span><br><span class="line">        effectivePaddingBottom = listPadding.bottom;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">     <span class="comment">// FIXME account for grid vertical spacing too?</span></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> spaceAbove = effectivePaddingTop - firstTop;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> end = getHeight() - effectivePaddingBottom;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> spaceBelow = lastBottom - end;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> <span class="variable">height</span> = getHeight() - mPaddingBottom - mPaddingTop;</span><br><span class="line">    <span class="keyword">if</span> (deltaY &lt; <span class="number">0</span>) {</span><br><span class="line">        deltaY = Math.<span class="built_in">max</span>(-(<span class="variable">height</span> - <span class="number">1</span>), deltaY);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        deltaY = Math.<span class="built_in">min</span>(<span class="variable">height</span> - <span class="number">1</span>, deltaY);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (incrementalDeltaY &lt; <span class="number">0</span>) {</span><br><span class="line">        incrementalDeltaY = Math.<span class="built_in">max</span>(-(<span class="variable">height</span> - <span class="number">1</span>), incrementalDeltaY);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        incrementalDeltaY = Math.<span class="built_in">min</span>(<span class="variable">height</span> - <span class="number">1</span>, incrementalDeltaY);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> firstPosition = mFirstPosition;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update our guesses for where the first and last views are</span></span><br><span class="line">    <span class="keyword">if</span> (firstPosition == <span class="number">0</span>) {</span><br><span class="line">        mFirstPositionDistanceGuess = firstTop - listPadding.top;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        mFirstPositionDistanceGuess += incrementalDeltaY;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (firstPosition + childCount == mItemCount) {</span><br><span class="line">        mLastPositionDistanceGuess = lastBottom + listPadding.bottom;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        mLastPositionDistanceGuess += incrementalDeltaY;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">boolean</span> cannotScrollDown = (firstPosition == <span class="number">0</span> &amp;&amp;</span><br><span class="line">            firstTop &gt;= listPadding.top &amp;&amp; incrementalDeltaY &gt;= <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">boolean</span> cannotScrollUp = (firstPosition + childCount == mItemCount &amp;&amp;</span><br><span class="line">            lastBottom &lt;= getHeight() - listPadding.bottom &amp;&amp; incrementalDeltaY &lt;= <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cannotScrollDown || cannotScrollUp) {</span><br><span class="line">        <span class="keyword">return</span> incrementalDeltaY != <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">boolean</span> down = incrementalDeltaY &lt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">boolean</span> inTouchMode = isInTouchMode();</span><br><span class="line">    <span class="keyword">if</span> (inTouchMode) {</span><br><span class="line">        hideSelector();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> headerViewsCount = getHeaderViewsCount();</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> footerViewsStart = mItemCount - getFooterViewsCount();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> start = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (down) {</span><br><span class="line">        <span class="built_in">int</span> top = -incrementalDeltaY;</span><br><span class="line">        <span class="keyword">if</span> ((mGroupFlags &amp; CLIP_TO_PADDING_MASK) == CLIP_TO_PADDING_MASK) {</span><br><span class="line">            top += listPadding.top;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; childCount; i++) {</span><br><span class="line">            <span class="keyword">final</span> View child = getChildAt(i);</span><br><span class="line">            <span class="keyword">if</span> (child.getBottom() &gt;= top) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                count++;</span><br><span class="line">                <span class="built_in">int</span> position = firstPosition + i;</span><br><span class="line">                <span class="keyword">if</span> (position &gt;= headerViewsCount &amp;&amp; position &lt; footerViewsStart) {</span><br><span class="line">                    <span class="comment">// The view will be rebound to new data, clear any</span></span><br><span class="line">                    <span class="comment">// system-managed transient state.</span></span><br><span class="line">                    child.clearAccessibilityFocus();</span><br><span class="line">                    mRecycler.addScrapView(child, position);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="built_in">int</span> bottom = getHeight() - incrementalDeltaY;</span><br><span class="line">        <span class="keyword">if</span> ((mGroupFlags &amp; CLIP_TO_PADDING_MASK) == CLIP_TO_PADDING_MASK) {</span><br><span class="line">            bottom -= listPadding.bottom;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = childCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {</span><br><span class="line">            <span class="keyword">final</span> View child = getChildAt(i);</span><br><span class="line">            <span class="keyword">if</span> (child.getTop() &lt;= bottom) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                start = i;</span><br><span class="line">                count++;</span><br><span class="line">                <span class="built_in">int</span> position = firstPosition + i;</span><br><span class="line">                <span class="keyword">if</span> (position &gt;= headerViewsCount &amp;&amp; position &lt; footerViewsStart) {</span><br><span class="line">                    <span class="comment">// The view will be rebound to new data, clear any</span></span><br><span class="line">                    <span class="comment">// system-managed transient state.</span></span><br><span class="line">                    child.clearAccessibilityFocus();</span><br><span class="line">                    mRecycler.addScrapView(child, position);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    mMotionViewNewTop = mMotionViewOriginalTop + deltaY;</span><br><span class="line">    mBlockLayoutRequests = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (count &gt; <span class="number">0</span>) {</span><br><span class="line">        detachViewsFromParent(start, count);</span><br><span class="line">        mRecycler.removeSkippedScrap();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// invalidate before moving the children to avoid unnecessary invalidate</span></span><br><span class="line">    <span class="comment">// calls to bubble up from the children all the way to the top</span></span><br><span class="line">    <span class="keyword">if</span> (!awakenScrollBars()) {</span><br><span class="line">       invalidate();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    offsetChildrenTopAndBottom(incrementalDeltaY);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (down) {</span><br><span class="line">        mFirstPosition += count;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> absIncrementalDeltaY = Math.<span class="built_in">abs</span>(incrementalDeltaY);</span><br><span class="line">    <span class="keyword">if</span> (spaceAbove &lt; absIncrementalDeltaY || spaceBelow &lt; absIncrementalDeltaY) {</span><br><span class="line">        fillGap(down);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!inTouchMode &amp;&amp; mSelectedPosition != INVALID_POSITION) {</span><br><span class="line">        <span class="keyword">final</span> <span class="built_in">int</span> childIndex = mSelectedPosition - mFirstPosition;</span><br><span class="line">        <span class="keyword">if</span> (childIndex &gt;= <span class="number">0</span> &amp;&amp; childIndex &lt; getChildCount()) {</span><br><span class="line">            positionSelector(mSelectedPosition, getChildAt(childIndex));</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (mSelectorPosition != INVALID_POSITION) {</span><br><span class="line">        <span class="keyword">final</span> <span class="built_in">int</span> childIndex = mSelectorPosition - mFirstPosition;</span><br><span class="line">        <span class="keyword">if</span> (childIndex &gt;= <span class="number">0</span> &amp;&amp; childIndex &lt; getChildCount()) {</span><br><span class="line">            positionSelector(INVALID_POSITION, getChildAt(childIndex));</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        mSelectorRect.setEmpty();</span><br><span class="line">    }</span><br><span class="line">    mBlockLayoutRequests = <span class="keyword">false</span>;</span><br><span class="line">    invokeOnItemScrollListener();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F20;&#x5165;&#x4E24;&#x4E2A;&#x53C2;&#x6570;deltaY&#x8868;&#x793A;&#x4ECE;&#x624B;&#x6307;&#x6700;&#x521D;&#x6309;&#x4E0B;&#x65F6;&#x7684;&#x4F4D;&#x7F6E;&#x5230;&#x5F53;&#x524D;&#x624B;&#x6307;&#x6240;&#x5904;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;incrementalDeltaY&#x5219;&#x8868;&#x793A;&#x76F8;&#x90BB;&#x4E24;&#x6B21;&#x5728;Y&#x65B9;&#x5411;&#x4E0A;&#x4F4D;&#x7F6E;&#x7684;&#x6539;&#x53D8;&#x91CF;&#xFF0C;incrementalDeltaY&#x7684;&#x6B63;&#x8D1F;&#x503C;&#x5C31;&#x53EF;&#x4EE5;&#x5224;&#x65AD;&#x6211;&#x4EEC;&#x5F53;&#x524D;&#x7684;&#x6ED1;&#x52A8;&#x65B9;&#x5411;&#x4E86;&#x3002;&#xFF08;incrementalDeltaY&#x5C0F;&#x4E8E;0&#xFF0C;&#x8868;&#x793A;&#x5411;&#x4E0B;&#x6ED1;&#x52A8;&#xFF0C;&#x5927;&#x4E8E;0&#x5C31;&#x662F;&#x5411;&#x4E0A;&#x6ED1;&#x52A8;&#xFF09;&#x5728;&#x8FD9;&#x4E2A;&#x90E8;&#x5206;&#x903B;&#x8F91;&#x4E2D;&#x5C06;&#x4F1A;&#x6839;&#x636E;&#x8FB9;&#x7F18;&#x4F5C;&#x4E3A;&#x5224;&#x65AD;&#x4F9D;&#x636E;&#x5982;&#x679C;&#x5B50;View&#x7684;bottom&#x503C;&#x5C0F;&#x4E8E;top&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8BF4;&#x660E;&#x8FD9;&#x4E2A;&#x5B50;View&#x79FB;&#x51FA;&#x5C4F;&#x5E55;&#x4E86;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x8C03;&#x7528;RecycleBin&#x7684;addScrapView()&#x65B9;&#x6CD5;&#x5C06;&#x8FD9;&#x4E2A;View&#x52A0;&#x5165;&#x5230;&#x5E9F;&#x5F03;&#x7F13;&#x5B58;&#x5F53;&#x4E2D;&#xFF0C;&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x4E86;&#x79FB;&#x51FA;&#x5C4F;&#x5E55;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x7531;&#x4E8E;&#x754C;&#x9762;&#x663E;&#x793A;&#x7684;&#x5B50;View&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x6240;&#x4EE5;&#x6709;&#x79FB;&#x51FA;&#x5C31;&#x6709;&#x79FB;&#x5165;&#xFF0C;&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x770B;&#x4E0B;&#x8FD9;&#x90E8;&#x5206;&#x903B;&#x8F91;&#xFF1A;
&#x5982;&#x679C;ListView&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;View&#x7684;&#x5E95;&#x90E8;&#x5DF2;&#x7ECF;&#x79FB;&#x5165;&#x4E86;&#x5C4F;&#x5E55;&#xFF0C;&#x6216;&#x8005;ListView&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;View&#x7684;&#x9876;&#x90E8;&#x79FB;&#x5165;&#x4E86;&#x5C4F;&#x5E55;&#xFF0C;&#x5C31;&#x4F1A;&#x8C03; &#x7528;fillGap()&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> fillGap(<span class="keyword">boolean</span> down) {</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> <span class="keyword">count</span> = getChildCount();</span><br><span class="line">    <span class="keyword">if</span> (down) {</span><br><span class="line">        <span class="keyword">int</span> paddingTop = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> ((mGroupFlags &amp; CLIP_TO_PADDING_MASK) == CLIP_TO_PADDING_MASK) {</span><br><span class="line">            paddingTop = getListPaddingTop();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> startOffset = <span class="keyword">count</span> &gt; <span class="number">0</span> ? getChildAt(<span class="keyword">count</span> - <span class="number">1</span>).getBottom() + mDividerHeight :</span><br><span class="line">                paddingTop;</span><br><span class="line">        fillDown(mFirstPosition + <span class="keyword">count</span>, startOffset);</span><br><span class="line">        correctTooHigh(getChildCount());</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">int</span> paddingBottom = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> ((mGroupFlags &amp; CLIP_TO_PADDING_MASK) == CLIP_TO_PADDING_MASK) {</span><br><span class="line">            paddingBottom = getListPaddingBottom();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> startOffset = <span class="keyword">count</span> &gt; <span class="number">0</span> ? getChildAt(<span class="number">0</span>).getTop() - mDividerHeight :</span><br><span class="line">                getHeight() - paddingBottom;</span><br><span class="line">        fillUp(mFirstPosition - <span class="number">1</span>, startOffset);</span><br><span class="line">        correctTooLow(getChildCount());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x989D;&#xFF0C;&#x53C8;&#x56DE;&#x5230;&#x4E4B;&#x524D;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x5728;fillGap&#x53C8;&#x8C03;&#x7528;&#x4E86;fillDown/fillUp&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x8FD9;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x8C03;&#x7528;makeAndAddView&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x65F6;&#x5019;&#x7684;makeAndAddView&#x6D41;&#x7A0B;&#x53C8;&#x548C;&#x4E0A;&#x9762;&#x4E0D;&#x5927;&#x4E00;&#x6837;&#x4E86;&#x3002;&#x8FD9;&#x65F6;&#x5019;mRecycler.getActiveView&#x8FD4;&#x56DE;&#x7684;&#x662F;null</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function">View <span class="title">makeAndAddView</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">int</span> y, <span class="keyword">boolean</span> flow, <span class="keyword">int</span> childrenLeft,</span><br><span class="line">        <span class="keyword">boolean</span> selected)</span> </span>{</span><br><span class="line">    View child;</span><br><span class="line">    <span class="keyword">if</span> (!mDataChanged) {</span><br><span class="line">        <span class="comment">// Try to use an existing view for this position</span></span><br><span class="line">        child = mRecycler.getActiveView(position);</span><br><span class="line">        <span class="keyword">if</span> (child != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="comment">// Found it -- we&apos;re using an existing child</span></span><br><span class="line">            <span class="comment">// This just needs to be positioned</span></span><br><span class="line">            setupChild(child, position, y, flow, childrenLeft, selected, <span class="keyword">true</span>);</span><br><span class="line">            <span class="keyword">return</span> child;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Make a new view for this position, or convert an unused view if possible</span></span><br><span class="line">    child = obtainView(position, mIsScrap);</span><br><span class="line">    <span class="comment">// This needs to be positioned and measured</span></span><br><span class="line">    setupChild(child, position, y, flow, childrenLeft, selected, mIsScrap[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">return</span> child;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x662F;null&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E0B;getActiveView&#xFF1A;
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">View getActiveView(<span class="keyword">int</span> position) {</span><br><span class="line">    <span class="keyword">int</span> <span class="keyword">index</span> = position - mFirstActivePosition;</span><br><span class="line">    <span class="keyword">final</span> View[] activeViews = mActiveViews;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">index</span> &gt;=<span class="number">0</span> &amp;&amp; <span class="keyword">index</span> &lt; activeViews.length) {</span><br><span class="line">        <span class="keyword">final</span> View match = activeViews[<span class="keyword">index</span>];</span><br><span class="line">        activeViews[<span class="keyword">index</span>] = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> match;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x7531;&#x4E8E;&#x4E4B;&#x524D;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x88AB;&#x8C03;&#x7528;&#x8FC7;&#x4E86;&#x5B83;&#x4F1A;&#x5C06;activeViews[index]&#x7F6E;&#x4E3A;null&#x6240;&#x4EE5;&#x8FD8;&#x4F1A;&#x8C03;&#x7528;obtainView&#xFF0C;&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x5BF9;&#x8BE5;&#x65B9;&#x6CD5;&#x505A;&#x4E86;&#x5206;&#x6790;&#xFF0C;&#x5B83;&#x4F1A;&#x8C03;&#x7528;getScrapView()&#x65B9;&#x6CD5;&#x6765;&#x5C1D;&#x8BD5;&#x4ECE;&#x5E9F;&#x5F03;&#x7F13;&#x5B58;&#x4E2D;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;View&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7684;&#x8BDD;&#x5219;&#x4F1A;inflate&#x4E00;&#x4E2A;&#x8FD4;&#x56DE;&#x3002;</p>
<h5>ListView&#x7684;&#x4F18;&#x5316;</h5>
<p>&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x53EA;&#x662F;ListView&#x7684;&#x7F13;&#x5B58;&#x673A;&#x5236;&#xFF0C;&#x4E86;&#x89E3;&#x4E86;&#x6574;&#x4E2A;&#x7F13;&#x5B58;&#x673A;&#x5236;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5145;&#x5206;&#x5229;&#x7528;convertView&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;inflate&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x6574;&#x4E2A;ListView&#x53EA;&#x52A0;&#x8F7D;&#x4E00;&#x5C4F;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x4E4B;&#x540E;&#x6ED1;&#x52A8;&#x51FA;&#x6765;&#x7684;item&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4E4B;&#x524D;&#x5DF2;&#x7ECF;&#x52A0;&#x8F7D;&#x7684;&#x5E03;&#x5C40;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x4E0B;&#x9762;&#x7684;getView&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;ViewHolder&#xFF0C;&#x8FD8;&#x6709;set/getTag&#x8FD9;&#x662F;&#x5E72;&#x5565;&#x7528;&#x7684;&#xFF1F;</p>
<p><figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> View getView(<span class="built_in">int</span> position, View convertView, ViewGroup parent) {</span><br><span class="line">    ViewHolder holder = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (convertView == <span class="keyword">null</span>) {</span><br><span class="line">        holder=<span class="keyword">new</span> ViewHolder();</span><br><span class="line">        convertView = mInflater.inflate(R.layout.vlist2, <span class="keyword">null</span>);</span><br><span class="line">        holder.img = (ImageView)convertView.findViewById(R.id.img);</span><br><span class="line">        holder.title = (TextView)convertView.findViewById(R.id.title);</span><br><span class="line">        holder.info = (TextView)convertView.findViewById(R.id.info);</span><br><span class="line">        holder.viewBtn =(Button)convertView.findViewById(R.id.view_btn);</span><br><span class="line">        convertView.setTag(holder);</span><br><span class="line">    }<span class="keyword">else</span> {</span><br><span class="line">        holder = (ViewHolder)convertView.getTag();</span><br><span class="line">    }</span><br><span class="line">    holder.img.setBackgroundResource((Integer)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">&quot;img&quot;</span>));</span><br><span class="line">    holder.title.setText((<span class="keyword">String</span>)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">&quot;title&quot;</span>));</span><br><span class="line">    holder.info.setText((<span class="keyword">String</span>)mData.<span class="built_in">get</span>(position).<span class="built_in">get</span>(<span class="string">&quot;info&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> convertView;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5176;&#x5B9E;&#x4F7F;&#x7528;ViewHolder&#xFF0C;&#x8FD8;&#x6709;set/getTag&#x662F;&#x4E3A;&#x4E86;&#x8282;&#x7701;findViewById&#x7684;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;ViewHolder&#xFF0C;&#x6BCF;&#x6B21;getView&#x7684;&#x65F6;&#x5019;&#x90FD;&#x9700;&#x8981;&#x5F97;&#x5230;&#x4E00;&#x6B21;&#x5B50;&#x5E03;&#x5C40;&#xFF0C;&#x800C;&#x8FD9;&#x4E5F;&#x662F;&#x5F88;&#x8017;&#x65F6;&#x5E76;&#x4E14;&#x8017;&#x8D44;&#x6E90;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E86;ViewHolder&#x4F5C;&#x4E3A;&#x5B50;&#x5E03;&#x5C40;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x4F7F;&#x7528;View&#x7684;setTag&#x65B9;&#x6CD5;&#x5C06;&#x7F13;&#x5B58;&#x4E0E;&#x6BCF;&#x4E2A;item&#x7ED1;&#x5B9A;&#xFF0C;&#x5219;&#x4E5F;&#x53EF;&#x4EE5;&#x7701;&#x53BB;&#x4E86;findViewById&#x7684;&#x65F6;&#x95F4;&#xFF08;&#x8FD9;&#x91CC;&#x6211;&#x4E2A;&#x4EBA;&#x7684;&#x7406;&#x89E3;&#x662F;&#x5C06;id&#x4E0E;ViewHolder&#x4E2D;&#x7684;View&#x7ED1;&#x5B9A;&#x8D77;&#x6765;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x7406;&#x89E3;&#x9519;&#x8BEF;&#x6B22;&#x8FCE;&#x66F4;&#x6B63;&#xFF09;
&#x8FD9;&#x91CC;&#x8FD8;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x70B9;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x9700;&#x8981;&#x5C06;ViewHolder&#x8BBE;&#x7F6E;&#x4E3A;&#x9759;&#x6001;&#x7684;&#x56E0;&#x4E3A;&#x56E0;&#x4E3A;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x4E0D;&#x6301;&#x6709;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x3002;</p>
<p>&#x603B;&#x7ED3;&#x5982;&#x4E0B;&#xFF1A;&#x57FA;&#x672C;&#x7684;&#x4F18;&#x5316;&#x65B9;&#x5F0F;</p>
<ul>
<li>&#x4F7F;&#x7528;ConvertView&#x590D;&#x7528;&#x673A;&#x5236;</li>
<li>&#x4F7F;&#x7528;ViewHolder</li>
<li>&#x4F7F;&#x7528;set/getTag</li>
</ul>
<p>ListView Item&#x5E26;&#x6709;&#x56FE;&#x7247;&#x7684;&#x60C5;&#x51B5;&#xFF1A;</p>
<p>&#x6211;&#x4EEC;&#x5728;&#x5F00;&#x53D1;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x9047;&#x5230;ListView&#x4E2D;&#x6BCF;&#x4E2A;item&#x90FD;&#x6709;&#x4E00;&#x4E2A;Image&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8FD9;&#x4E2A;&#x5728;Music&#x5E94;&#x7528;&#x4E2D;&#x5341;&#x5206;&#x5E38;&#x89C1;&#xFF0C;
&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x5BF9;&#x8FD9;&#x4E9B;&#x56FE;&#x50CF;&#x7684;&#x52A0;&#x8F7D;&#x4F7F;&#x7528;&#x56FE;&#x7247;&#x7F13;&#x5B58;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x52A0;&#x8F7D;&#x8FD9;&#x4E9B;&#x56FE;&#x7247;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E5F;&#x9762;&#x4E34;&#x8FD9;&#x7A7A;&#x95F4;&#x548C;&#x65F6;&#x95F4;&#x7684;&#x5E73;&#x8861;&#x95EE;&#x9898;&#x3002;
&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x9488;&#x5BF9;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x6BD4;&#x5982;&#x5728;&#x56FE;&#x7247;&#x89E3;&#x7801;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x964D;&#x4F4E;&#x50CF;&#x7D20;&#x989C;&#x8272;&#x4FE1;&#x606F;&#xFF0C;&#x53BB;&#x6389;&#x900F;&#x660E;&#x5EA6;&#x7B49;&#xFF0C;&#x6216;&#x8005;&#x5728;&#x8BBE;&#x8BA1;&#x8D44;&#x6E90;&#x7684;&#x65F6;&#x5019;&#x5C3D;&#x91CF;&#x51CF;&#x5C0F;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x7684;&#x5C3A;&#x5BF8;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x4E0D;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x5728;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x5728;&#x6ED1;&#x52A8;&#x4E0D;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#x6ED1;&#x52A8;&#x505C;&#x6B62;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x8F7D;&#x56FE;&#x7247;
&#x4E0B;&#x9762;&#x662F;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x4F8B;&#x5B50;&#xFF1A;
&#x8F6C;&#x8F7D;&#x81EA; http://blog.csdn.net/yy1300326388/article/details/45153813</p>
<p><figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="comment">//&#x5B9A;&#x4E49;&#x5F53;&#x524D;listview&#x662F;&#x5426;&#x5728;&#x6ED1;&#x52A8;&#x72B6;&#x6001;</span></span><br><span class="line"><span class="keyword">private</span>  <span class="keyword">boolean</span> scrollState=<span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">setScrollState</span><span class="params">(<span class="keyword">boolean</span> scrollState)</span> </span>{</span><br><span class="line">    <span class="keyword">this</span>.scrollState = scrollState;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//&#x5B9E;&#x4F53;&#x7C7B;</span></span><br><span class="line">UserEnity userEnity=lists.<span class="keyword">get</span>(position);</span><br><span class="line"><span class="keyword">if</span> (!scrollState){<span class="comment">//&#x5982;&#x679C;&#x5F53;&#x524D;&#x4E0D;&#x662F;&#x6ED1;&#x52A8;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6211;&#x4EEC;&#x586B;&#x5145;&#x771F;&#x6570;&#x636E;</span></span><br><span class="line">    <span class="comment">//&#x586B;&#x5145;&#x6570;&#x636E;</span></span><br><span class="line">    viewHolder.tv_name.setText(userEnity.getName());</span><br><span class="line">    <span class="comment">//&#x8BBE;&#x7F6E;Tag&#x4E2D;&#x6570;&#x636E;&#x4E3A;&#x7A7A;&#x8868;&#x793A;&#x6570;&#x636E;&#x5DF2;&#x586B;&#x5145;</span></span><br><span class="line">    viewHolder.tv_name.setTag(<span class="literal">null</span>);</span><br><span class="line">    <span class="comment">//&#x52A0;&#x8F7D;&#x56FE;&#x7247;</span></span><br><span class="line">    ImageLoader.getInstance().displayImage(img_url,viewHolder.iv_icon);</span><br><span class="line">    <span class="comment">//&#x8BBE;&#x7F6E;tag&#x4E3A;1&#x8868;&#x793A;&#x5DF2;&#x52A0;&#x8F7D;&#x8FC7;&#x6570;&#x636E;</span></span><br><span class="line">    viewHolder.iv_icon.setTag(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">}<span class="keyword">else</span>{<span class="comment">//&#x5982;&#x679C;&#x5F53;&#x524D;&#x662F;&#x6ED1;&#x52A8;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6211;&#x4EEC;&#x586B;&#x5145;&#x5047;&#x6570;&#x636E;</span></span><br><span class="line">    viewHolder.tv_name.setText(<span class="string">&quot;&#x52A0;&#x8F7D;&#x4E2D;&quot;</span>);</span><br><span class="line">    <span class="comment">//&#x5C06;&#x6570;&#x636E;name&#x4FDD;&#x5B58;&#x5728;Tag&#x5F53;&#x4E2D;</span></span><br><span class="line">    viewHolder.tv_name.setTag(userEnity.getName());</span><br><span class="line">    <span class="comment">//&#x5C06;&#x6570;&#x636E;image_url&#x4FDD;&#x5B58;&#x5728;Tag&#x5F53;&#x4E2D;</span></span><br><span class="line">    viewHolder.iv_icon.setTag(img_url);</span><br><span class="line">    <span class="comment">//&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x663E;&#x793A;&#x56FE;&#x7247;&#xFF08;&#x6700;&#x597D;&#x662F;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x7684;&#x56FE;&#x7247;&#xFF09;</span></span><br><span class="line">    viewHolder.iv_icon.setImageResource(R.mipmap.ic_launcher);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">&#x8BBE;&#x7F6E;&#x76D1;&#x542C;</span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="typename">void</span> onScrollStateChanged(AbsListView view, <span class="typename">int</span> scrollState) {</span><br><span class="line">    <span class="keyword">switch</span> (scrollState){</span><br><span class="line">        <span class="keyword">case</span> AbsListView.OnScrollListener.<span class="string">SCROLL_STATE_IDLE:</span><span class="comment">//&#x505C;&#x6B62;&#x6EDA;&#x52A8;</span></span><br><span class="line">        {</span><br><span class="line">            <span class="comment">//&#x8BBE;&#x7F6E;&#x4E3A;&#x505C;&#x6B62;&#x6EDA;&#x52A8;</span></span><br><span class="line">            myAdapter.setScrollState(<span class="literal">false</span>);</span><br><span class="line">            <span class="comment">//&#x5F53;&#x524D;&#x5C4F;&#x5E55;&#x4E2D;listview&#x7684;&#x5B50;&#x9879;&#x7684;&#x4E2A;&#x6570;</span></span><br><span class="line">            <span class="typename">int</span> count = view.getChildCount();</span><br><span class="line">            Log.e(<span class="string">&quot;MainActivity&quot;</span>,count+<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="typename">int</span> i = <span class="number">0</span>; i &lt; count; i++) {</span><br><span class="line">                <span class="comment">//&#x83B7;&#x53D6;&#x5230;item&#x7684;name</span></span><br><span class="line">                TextView tv_name = (TextView) view.getChildAt(i).findViewById(R.id.main_item_tv_name);</span><br><span class="line">                <span class="comment">//&#x83B7;&#x53D6;&#x5230;item&#x7684;&#x5934;&#x50CF;</span></span><br><span class="line">                ImageView iv_show= (ImageView) view.getChildAt(i).findViewById(R.id.main_item_iv_icon);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (tv_name.getTag() != <span class="literal">null</span>) { <span class="comment">//&#x975E;null&#x8BF4;&#x660E;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x6570;&#x636E;</span></span><br><span class="line">                    tv_name.setText(tv_name.getTag().toString());<span class="comment">//&#x76F4;&#x63A5;&#x4ECE;Tag&#x4E2D;&#x53D6;&#x51FA;&#x6211;&#x4EEC;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;name&#x5E76;&#x4E14;&#x8D4B;&#x503C;</span></span><br><span class="line">                    tv_name.setTag(<span class="literal">null</span>);<span class="comment">//&#x8BBE;&#x7F6E;&#x4E3A;&#x5DF2;&#x52A0;&#x8F7D;&#x8FC7;&#x6570;&#x636E;</span></span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (!iv_show.getTag().equals(<span class="string">&quot;1&quot;</span>)){<span class="comment">//!=&quot;1&quot;&#x8BF4;&#x660E;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x6570;&#x636E;</span></span><br><span class="line">                    String image_url=iv_show.getTag().toString();<span class="comment">//&#x76F4;&#x63A5;&#x4ECE;Tag&#x4E2D;&#x53D6;&#x51FA;&#x6211;&#x4EEC;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;image&#x2014;&#x2014;url</span></span><br><span class="line">                    ImageLoader.getInstance().displayImage(image_url, iv_show);<span class="comment">//&#x663E;&#x793A;&#x56FE;&#x7247;</span></span><br><span class="line">                    iv_show.setTag(<span class="string">&quot;1&quot;</span>);<span class="comment">//&#x8BBE;&#x7F6E;&#x4E3A;&#x5DF2;&#x52A0;&#x8F7D;&#x8FC7;&#x6570;&#x636E;</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> AbsListView.OnScrollListener.<span class="string">SCROLL_STATE_FLING:</span><span class="comment">//&#x6EDA;&#x52A8;&#x505A;&#x51FA;&#x4E86;&#x629B;&#x7684;&#x52A8;&#x4F5C;</span></span><br><span class="line">        {</span><br><span class="line">            <span class="comment">//&#x8BBE;&#x7F6E;&#x4E3A;&#x6B63;&#x5728;&#x6EDA;&#x52A8;</span></span><br><span class="line">            myAdapter.setScrollState(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> AbsListView.OnScrollListener.<span class="string">SCROLL_STATE_TOUCH_SCROLL:</span><span class="comment">//&#x6B63;&#x5728;&#x6EDA;&#x52A8;</span></span><br><span class="line">        {</span><br><span class="line">            <span class="comment">//&#x8BBE;&#x7F6E;&#x4E3A;&#x6B63;&#x5728;&#x6EDA;&#x52A8;</span></span><br><span class="line">            myAdapter.setScrollState(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5C40;&#x90E8;&#x66F4;&#x65B0;&#xFF1A;
http://blog.csdn.net/nupt123456789/article/details/39432781
http://www.cnblogs.com/liuling/p/2015-10-20-01.html
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> void updateProgressPartly(<span class="built_in">int</span> progress,<span class="built_in">int</span> <span class="keyword">position</span>){</span><br><span class="line">    <span class="built_in">int</span> firstVisiblePosition = listview.getFirstVisiblePosition();</span><br><span class="line">    <span class="built_in">int</span> lastVisiblePosition = listview.getLastVisiblePosition();</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">position</span>&gt;=firstVisiblePosition &amp;&amp; <span class="keyword">position</span>&lt;=lastVisiblePosition){</span><br><span class="line">        View view = listview.getChildAt(<span class="keyword">position</span> - firstVisiblePosition);</span><br><span class="line">        <span class="keyword">if</span>(view.getTag() instanceof ViewHolder){</span><br><span class="line">            ViewHolder vh = (ViewHolder)view.getTag();</span><br><span class="line">            vh.pb.setProgress(progress);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#xFF1A;</p>
<p>&#x5176;&#x5B9E;ListView&#x4F18;&#x5316;&#x7684;&#x6700;&#x6839;&#x672C;&#x9014;&#x5F84;&#x5728;&#x4E8E;getView&#x65B9;&#x6CD5;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4F18;&#x5316;&#x5C31;&#x9700;&#x8981;&#x5C06;&#x4E00;&#x5207;&#x8017;&#x65F6;&#x7684;&#x64CD;&#x4F5C;&#x4ECE;getView&#x4E2D;&#x62BD;&#x79BB;&#xFF0C;&#x6BD4;&#x5982;&#x56FE;&#x7247;&#x52A0;&#x8F7D;&#xFF0C;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#xFF0C;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x3002;
&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x51E0;&#x79CD;&#x9014;&#x5F84;&#x6765;&#x4F18;&#x5316;&#xFF1A;</p>
<ol>
<li>&#x542F;&#x52A8;&#x7EBF;&#x7A0B;&#x6765;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#xFF0C;&#x5728;&#x56FE;&#x7247;&#x5C1A;&#x672A;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x4E4B;&#x524D;&#x5148;&#x7528;&#x7A7A;&#x767D;&#x56FE;&#x7247;&#x5360;&#x4F4D;</li>
<li>&#x6ED1;&#x52A8;&#x65F6;&#x4E0D;&#x52A0;&#x8F7D;&#x56FE;&#x7247;&#xFF0C;&#x505C;&#x6B62;&#x6ED1;&#x52A8;&#x65F6;&#x52A0;&#x8F7D;</li>
<li>&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x673A;&#x5236;&#x5C06;&#x5176;&#x7F13;&#x5B58;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF08;&#x6CE8;&#x610F;&#x4F7F;&#x7528;&#x5F31;&#x5F15;&#x7528;&#xFF09;</li>
<li>&#x5C40;&#x90E8;&#x5237;&#x65B0;</li>
<li>Item&#x4E2D;&#x7684;&#x63A7;&#x4EF6;&#x5BBD;&#x9AD8;&#x5C3D;&#x91CF;&#x5199;&#x6210;&#x56FA;&#x5B9A;&#x7684;&#x503C;&#x6216;&#x8005;math_parent&#xFF0C;&#x907F;&#x514D;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x63A7;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#x5BFC;&#x81F4;&#x91CD;&#x65B0;&#x7ED8;&#x5236;</li>
<li>&#x51CF;&#x5C11;&#x5E03;&#x5C40;&#x5C42;&#x6B21;&#xFF0C;&#x7F29;&#x77ED;&#x7ED8;&#x5236;&#x65F6;&#x95F4;&#x3002;&#x614E;&#x7528; layout_weight &#x7C7B;&#x4F3C;&#x5C5E;&#x6027;&#xFF0C;&#x4EE5;&#x4FBF;&#x7F29;&#x77ED;&#x5E03;&#x5C40;&#x7684; Measure &#x65F6;&#x95F4;&#x3002;</li>
<li>&#x4F7F;&#x7528;RecyclerView&#xFF0C;RecyclerView&#x63D0;&#x4F9B;&#x4E86;&#x539F;&#x751F;&#x7684;&#x5C40;&#x90E8;&#x5237;&#x65B0;&#x529F;&#x80FD;</li>
<li>&#x5728;&#x52A0;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E3A;ImageView&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;Tag&#xFF0C;&#x6BD4;&#x5982;imageView.setTag(image_url),&#x4E0B;&#x4E00;&#x6B21;&#x518D;&#x52A0;&#x8F7D;&#x4E4B;&#x524D;&#xFF0C;&#x9996;&#x5148;&#x83B7;&#x53D6;Tag&#xFF0C;&#x6BD4;&#x5982;imageUrl = imageView.getTag(),&#x5982;&#x679C;&#x6B64;&#x65F6;&#x7684;&#x5730;&#x5740;&#x548C;&#x4E4B;&#x524D;&#x7684;&#x5730;&#x5740;&#x4E00;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x518D;&#x52A0;&#x8F7D;&#x3002;</li>
</ol>
<p>&#x6700;&#x540E;&#x662F;&#x4E4B;&#x524D;&#x5F00;&#x53D1;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x4E24;&#x79CD;ListView&#x9519;&#x4F4D;&#x7684;&#x95EE;&#x9898;&#xFF1A;
&#x4E0B;&#x9762;&#x662F;&#x5F53;&#x65F6;&#x7684;&#x53C2;&#x8003;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x540E;&#x7EED;&#x6709;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x518D;&#x5BF9;&#x8FD9;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x4E13;&#x95E8;&#x603B;&#x7ED3;&#xFF1A;
http://www.cnblogs.com/lesliefang/p/3619223.html
http://www.runoob.com/w3cnote/android-tutorial-listview-checkbox.html
http://www.trinea.cn/android/android-listview-display-error-image-when-scroll/</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android-源码分析/">Android 源码分析</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/AOSP-源码/">AOSP 源码</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/27/Android-源码分析之ListView/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/27/Android-源码分析之ListView/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/26/Android-进阶之软引用和弱引用/" title="Android 进阶之软引用和弱引用" itemprop="url">Android 进阶之软引用和弱引用</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-26T02:56:36.000Z" itemprop="datePublished"> 發表於 2016-07-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4>&#x4E09;&#x79CD;&#x5F15;&#x7528;&#x5BF9;&#x6BD4;</h4>
<table>
<thead>
<tr>
<th>&#x5F15;&#x7528;&#x7C7B;&#x578B;</th>
<th>&#x56DE;&#x6536;&#x65F6;&#x671F;</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x5F3A;&#x5F15;&#x7528;</td>
<td>&#x5F53;&#x4EE3;&#x7801;&#x4E2D;&#x663E;&#x793A;&#x6807;&#x793A;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td>&#x8F6F;&#x5F15;&#x7528;</td>
<td>&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x7684;&#x65F6;&#x5019;</td>
</tr>
<tr>
<td>&#x5F31;&#x5F15;&#x7528;</td>
<td>&#x4E0D;&#x7BA1;&#x5185;&#x5B58;&#x662F;&#x5426;&#x5145;&#x8DB3;&#xFF0C;&#x53EA;&#x8981;&#x6267;&#x884C;gc&#x7684;&#x65F6;&#x5019;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x88AB;&#x56DE;&#x6536;</td>
</tr>
</tbody>
</table>
<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x9664;&#x4E86;&#x5F3A;&#x5F15;&#x7528;&#x5916;&#x5176;&#x4ED6;&#x4E24;&#x79CD;&#x5F15;&#x7528;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x9700;&#x8981;&#x5224;&#x65AD;&#x662F;&#x5426;&#x88AB;&#x56DE;&#x6536;&#x3002;</p>
<h4>&#x8F6F;&#x5F15;&#x7528;&#x548C;&#x5F31;&#x5F15;&#x7528;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E0A;&#x7684;&#x533A;&#x522B;&#xFF1A;</h4>
<p>&#x5982;&#x679C;&#x53EA;&#x662F;&#x60F3;&#x907F;&#x514D;OutOfMemory&#x5F02;&#x5E38;&#x7684;&#x53D1;&#x751F;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8F6F;&#x5F15;&#x7528;&#x3002;&#x5982;&#x679C;&#x5BF9;&#x4E8E;&#x5E94;&#x7528;&#x7684;&#x6027;&#x80FD;&#x66F4;&#x5728;&#x610F;&#xFF0C;&#x60F3;&#x5C3D;&#x5FEB;&#x56DE;&#x6536;&#x4E00;&#x4E9B;&#x5360;&#x7528;&#x5185;&#x5B58;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5F31;&#x5F15;&#x7528;&#x3002;
&#x53E6;&#x5916;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x6765;&#x5224;&#x65AD;&#x9009;&#x62E9;&#x8F6F;&#x5F15;&#x7528;&#x8FD8;&#x662F;&#x5F31;&#x5F15;&#x7528;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x5BF9;&#x8C61;&#x53EF;&#x80FD;&#x4F1A;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x5C31;&#x5C3D;&#x91CF;&#x7528;&#x8F6F;&#x5F15;&#x7528;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x5BF9;&#x8C61;&#x4E0D;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x66F4;&#x5927;&#x4E9B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x5F31;&#x5F15;&#x7528;&#x3002;</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android进阶/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/编程技巧/">编程技巧</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/26/Android-进阶之软引用和弱引用/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/26/Android-进阶之软引用和弱引用/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/25/Android-进阶之加快启动速度/" title="Android 进阶之加快启动速度" itemprop="url">Android 进阶之加快启动速度</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-25T03:10:48.000Z" itemprop="datePublished"> 發表於 2016-07-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4>&#x4E24;&#x79CD;&#x542F;&#x52A8;&#x65B9;&#x5F0F;</h4>
<p>&#x5728;Android&#x7CFB;&#x7EDF;&#x4E2D;&#x6709;&#x4E24;&#x79CD;&#x542F;&#x52A8;&#x65B9;&#x5F0F;&#x5206;&#x522B;&#x4E3A;&#x51B7;&#x542F;&#x52A8;&#x548C;&#x70ED;&#x542F;&#x52A8;&#xFF0C;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x51B7;&#x542F;&#x52A8;&#xFF1A;&#x51B7;&#x542F;&#x52A8;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x70B9;&#x51FB;&#x684C;&#x9762;&#x56FE;&#x6807;&#x542F;&#x52A8;&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x79CD;&#x542F;&#x52A8;&#x65B9;&#x5F0F;&#x7531;&#x4E8E;&#x540E;&#x53F0;&#x6CA1;&#x6709;&#x8BE5;&#x5E94;&#x7528;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x4ECE;Zygote&#x8FDB;&#x7A0B;&#x4E2D;fork&#x521B;&#x5EFA;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#x5206;&#x914D;&#x7ED9;&#x8BE5;&#x5E94;&#x7528;&#xFF0C;&#x4E4B;&#x540E;&#x4F1A;&#x4F9D;&#x6B21;&#x521B;&#x5EFA;&#x548C;&#x521D;&#x59CB;&#x5316;Application&#x7C7B;&#x3001;&#x521B;&#x5EFA;MainActivity&#x7C7B;&#x3001;&#x52A0;&#x8F7D;&#x4E3B;&#x9898;&#x6837;&#x5F0F;Theme&#x4E2D;&#x7684;windowBackground&#x7B49;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x7ED9;MainActivity&#x4EE5;&#x53CA;&#x914D;&#x7F6E;Activity&#x5C42;&#x7EA7;&#x4E0A;&#x7684;&#x4E00;&#x4E9B;&#x5C5E;&#x6027;&#x3001;&#x518D;inflate&#x5E03;&#x5C40;&#x3001;&#x5F53;onCreate/onStart/onResume&#x65B9;&#x6CD5;&#x90FD;&#x8D70;&#x5B8C;&#x4E86;&#x540E;&#x6700;&#x540E;&#x624D;&#x8FDB;&#x884C;contentView&#x7684;measure/layout/draw&#x663E;&#x793A;&#x5728;&#x754C;&#x9762;&#x4E0A;&#x3002;
&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</li>
</ul>
<p><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">Application&#x6784;&#x9020; &#x2014;&#x2014;&gt; <span class="function"><span class="title">attachBaseContext</span><span class="params">()</span></span>&#x2014;&#x2014;&gt;<span class="function"><span class="title">onCreate</span><span class="params">()</span></span>&#x2014;&#x2014;&gt;Activity&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x2014;&#x2014;&gt;<span class="function"><span class="title">onCreate</span><span class="params">()</span></span>&#x2014;&#x2014;&gt;&#x914D;&#x7F6E;&#x4E3B;&#x9898;&#x4E2D;&#x80CC;&#x666F;&#x7B49;&#x5C5E;&#x6027;&#x2014;&#x2014;&gt;<span class="function"><span class="title">onStart</span><span class="params">()</span></span>&#x2014;&#x2014;&gt;<span class="function"><span class="title">onResume</span><span class="params">()</span></span>&#x2014;&#x2014;&gt;&#x6D4B;&#x91CF;&#x5E03;&#x5C40;&#x7ED8;&#x5236;&#x663E;&#x793A;&#x5728;&#x754C;&#x9762;&#x4E0A;&#x3002;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>&#x70ED;&#x542F;&#x52A8;&#xFF1A;&#x5F53;&#x542F;&#x52A8;&#x5E94;&#x7528;&#x65F6;&#xFF0C;&#x540E;&#x53F0;&#x5DF2;&#x6709;&#x8BE5;&#x5E94;&#x7528;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5DF2;&#x6709;&#x8FDB;&#x7A0B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x79CD;&#x542F;&#x52A8;&#x4F1A;&#x4ECE;&#x5DF2;&#x6709;&#x7684;&#x8FDB;&#x7A0B;&#x4E2D;&#x6765;&#x542F;&#x52A8;&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EB;&#x70ED;&#x542F;&#x52A8;&#x3002;&#x70ED;&#x542F;&#x52A8;&#x56E0;&#x4E3A;&#x4F1A;&#x4ECE;&#x5DF2;&#x6709;&#x7684;&#x8FDB;&#x7A0B;&#x4E2D;&#x6765;&#x542F;&#x52A8;&#xFF0C;&#x6240;&#x4EE5;&#x70ED;&#x542F;&#x52A8;&#x5C31;&#x4E0D;&#x4F1A;&#x8D70;Application&#x8FD9;&#x6B65;&#x4E86;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x8D70;MainActivity&#xFF08;&#x5305;&#x62EC;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x6D4B;&#x91CF;&#x3001;&#x5E03;&#x5C40;&#x3001;&#x7ED8;&#x5236;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x70ED;&#x542F;&#x52A8;&#x7684;&#x8FC7;&#x7A0B;&#x53EA;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x548C;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;MainActivity&#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x800C;&#x4E0D;&#x5FC5;&#x521B;&#x5EFA;&#x548C;&#x521D;&#x59CB;&#x5316;Application&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x4ECE;&#x65B0;&#x8FDB;&#x7A0B;&#x7684;&#x521B;&#x5EFA;&#x5230;&#x8FDB;&#x7A0B;&#x7684;&#x9500;&#x6BC1;&#xFF0C;Application&#x53EA;&#x4F1A;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x6B21;&#x3002;</li>
</ul>
<h4>&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x548C;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x7684;&#x6D4B;&#x91CF;</h4>
<p>&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x6307;&#x7684;&#x662F;&#x4ECE;&#x70B9;&#x51FB;&#x5E94;&#x7528;&#x7684;&#x542F;&#x52A8;&#x56FE;&#x6807;&#x5F00;&#x59CB;&#x76F4;&#x5230;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x4E86;&#x754C;&#x9762;&#x7684;&#x7B2C;&#x4E00;&#x5E27;&#xFF0C;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5C31;&#x662F;&#x5E94;&#x7528;&#x7684;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x3002;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x6D4B;&#x91CF;&#xFF1A;</p>
<p><figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line">adb shell am start -W <span class="string">[packageName]</span>/<span class="string">[packageName.MainActivity]</span></span><br></pre></td></tr></table></figure></p>
<h4>&#x51CF;&#x5C0F;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x7684;&#x65B9;&#x6CD5;</h4>
<ul>
<li>&#x5728;Application&#x7684;onCreate()&#x65B9;&#x6CD5;&#x4E2D;&#x4E0D;&#x8981;&#x8FDB;&#x884C;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5C3D;&#x91CF;&#x5C06;&#x8017;&#x65F6;&#x95F4;&#x64CD;&#x4F5C;&#x653E;&#x5728;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x3002;</li>
<li>&#x5BF9;&#x4E8E;MainActivity&#xFF0C;&#x7531;&#x4E8E;&#x5728;&#x83B7;&#x53D6;&#x5230;&#x7B2C;&#x4E00;&#x5E27;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x5E03;&#x5C40;&#x8FDB;&#x884C;&#x6D4B;&#x91CF;&#x7ED8;&#x5236;&#x64CD;&#x4F5C;&#x6240;&#x4EE5;&#x5C3D;&#x91CF;&#x51CF;&#x5C11;&#x5E03;&#x5C40;&#x7684;&#x5C42;&#x6B21;&#xFF0C;&#x4EE5;&#x53CA;&#x91C7;&#x7528;ViewStab&#x5EF6;&#x8FDF;&#x52A0;&#x8F7D;&#x7B56;&#x7565;&#xFF0C;&#x5E76;&#x5728;onCreate&#x3001;onStart&#x3001;onResume&#x65B9;&#x6CD5;&#x4E2D;&#x907F;&#x514D;&#x505A;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x7531;&#x4E8E;&#x5728;&#x51B7;&#x542F;&#x52A8;&#x65F6;&#x523B;&#xFF0C;WindowManager&#x4F1A;&#x5148;&#x52A0;&#x8F7D;app&#x4E3B;&#x9898;&#x6837;&#x5F0F;&#x4E2D;&#x7684;windowBackground&#x505A;&#x4E3A;app&#x7684;&#x9884;&#x89C8;&#x5143;&#x7D20;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x771F;&#x6B63;&#x53BB;&#x52A0;&#x8F7D;activity&#x7684;layout&#x5E03;&#x5C40;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7ED9;windowBackground&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x5728;&#x89C6;&#x89C9;&#x4E0A;&#x6765;&#x9A97;&#x8FC7;&#x7528;&#x6237;</li>
</ul>
<p>&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x6211;&#x8FD9;&#x8FB9;&#x5C1D;&#x8BD5;&#x4E86;&#x4E0B;&#x8FD8;&#x662F;&#x6709;&#x6548;&#x679C;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x672C;&#x8EAB;&#x5E94;&#x7528;&#x5728;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5982;&#x679C;&#x5C31;&#x6CA1;&#x5904;&#x7406;&#x4EC0;&#x4E48;&#x4E8B;&#x60C5;&#xFF0C;&#x5C31;&#x6BD4;&#x8F83;&#x96BE;&#x770B;&#x51FA;&#x8FD9;&#x4E2A;&#x6548;&#x679C;&#x4E86;&#xFF1A;
https://github.com/DreaminginCodeZH/MaterialColdStart</p>
<p>&#x82F1;&#x6587;&#x4E0D;&#x597D;&#x7684;&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x4E0B;&#x9762;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#xFF1A;
http://blog.csdn.net/ccsutofly/article/details/49990939</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android进阶/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android性能优化/">Android性能优化</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/25/Android-进阶之加快启动速度/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/25/Android-进阶之加快启动速度/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/25/Android进阶之Assets-目录与res目录的使用的区别/" title="Android-进阶之Assets 目录与res目录的使用的区别" itemprop="url">Android-进阶之Assets 目录与res目录的使用的区别</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-25T02:52:26.000Z" itemprop="datePublished"> 發表於 2016-07-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <table>
<thead>
<tr>
<th>&#x5BF9;&#x6BD4;&#x9879;</th>
<th>assets</th>
<th>res/raw</th>
<th>res/drawable</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#x65B9;&#x5F0F;</td>
<td>&#x8DEF;&#x5F84;+&#x6587;&#x4EF6;&#x540D;&#xFF08;&#x8FD9;&#x91CC;&#x7684;&#x8DEF;&#x5F84;&#x662F;&#x76F8;&#x5BF9;&#x4E8E;assets&#x7684;&#x8DEF;&#x5F84;&#xFF09;</td>
<td>R.raw.xxx</td>
<td>R.drawable.xxx</td>
</tr>
<tr>
<td>&#x662F;&#x5426;&#x88AB;&#x538B;&#x7F29;</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
</tr>
<tr>
<td>&#x662F;&#x5426;&#x652F;&#x6301;&#x591A;&#x7EA7;&#x5B50;&#x76EE;&#x5F55;</td>
<td>YES</td>
<td>NO</td>
<td>NO</td>
</tr>
</tbody>
</table>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android进阶/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/杂类/">杂类</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/25/Android进阶之Assets-目录与res目录的使用的区别/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/25/Android进阶之Assets-目录与res目录的使用的区别/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/25/Android-进阶之推出当前应用的方式/" title="Android-进阶之退出当前应用的方式" itemprop="url">Android-进阶之退出当前应用的方式</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-25T02:26:13.000Z" itemprop="datePublished"> 發表於 2016-07-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <ol>
<li>&#x6BD4;&#x8F83;&#x7C97;&#x9C81;&#x7684;&#x65B9;&#x5F0F;-&#x6740;&#x8FDB;&#x7A0B;</li>
</ol>
<p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">android</span><span class="class">.os</span><span class="class">.Process</span><span class="class">.killProcess</span>(<span class="tag">android</span><span class="class">.os</span><span class="class">.Process</span><span class="class">.myPid</span>());</span><br><span class="line"><span class="tag">System</span><span class="class">.exit</span>(0);</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>&#x4F7F;&#x7528;ActivityManager&#x7684;restartPackage&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x5728;Android 1.5 API Level&#x4E3A;3&#x4EE5;&#x4E0A;&#x624D;&#x53EF;&#x4EE5;&#xFF0C;&#x5E76;&#x4E14;&#x9700;&#x8981;&#x6743;&#x9650;</li>
</ol>
<p><figure class="highlight dns"><table><tr><td class="code"><pre><span class="line">ActivityManager am = (ActivityManager)getSystemService (Context.ACTIVITY_SERVICE)<span class="comment">;</span></span><br><span class="line">am.restartPackage(getPackageName())<span class="comment">;</span></span><br></pre></td></tr></table></figure></p>
<p>&#x6240;&#x9700;&#x6743;&#x9650;&#xFF1A;
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">uses-permission</span> <span class="attribute">android:name</span>=<span class="value">&quot;android.permission.RESTART_PACKAGES&quot;</span>&gt;</span><span class="tag">&lt;/<span class="title">uses-permission</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>&#x4F7F;&#x7528;FLAG_ACTIVITY_CLEAR_TOP &#x65B9;&#x5F0F;</li>
</ol>
<p>&#x4F7F;&#x7528;FLAG_ACTIVITY_CLEAR_TOP &#x542F;&#x52A8;&#x7B2C;&#x4E00;&#x4E2A;Activity&#x4E5F;&#x5C31;&#x662F;MAIN&#x7684;&#x90A3;&#x4E2A;Activity&#x7136;&#x540E;&#x5728;&#x9700;&#x8981;&#x5168;&#x90E8;&#x9000;&#x51FA;&#x65F6;&#x8C03;&#x7528;finish
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="type">intent</span> = new <span class="type">Intent</span>(); </span><br><span class="line"><span class="type">intent</span>.setClass(xxxx,xxxxx); </span><br><span class="line"><span class="type">intent</span>.setFlags(<span class="type">Intent</span>.FLAG_ACTIVITY_CLEAR_TOP); </span><br><span class="line">startActivity(<span class="type">intent</span>);</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x4E4B;&#x524D;&#x5199;&#x7684;&#x4E00;&#x4E2A;&#x9000;&#x51FA;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x7684;&#x662F;ActivityLifeCycleCallback + &#x5355;&#x4F8B;&#x4E5F;&#x662F;&#x4E2A;&#x4EBA;&#x6BD4;&#x8F83;&#x63A8;&#x5D07;&#x7684;&#x65B9;&#x5F0F;&#xFF1A;</p>
<p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>{</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Activity&gt; mActivityList = <span class="keyword">new</span> LinkedList&lt;Activity&gt;();</span><br><span class="line">	<span class="annotation">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">super</span>.onCreate();</span><br><span class="line">		<span class="keyword">if</span>(mActivityList!= <span class="keyword">null</span>) {</span><br><span class="line">			mActivityList.clear();</span><br><span class="line">		}</span><br><span class="line">		registerActivityLifecycleCallbacks (<span class="keyword">new</span> Application.ActivityLifecycleCallbacks() {</span><br><span class="line"></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>	<span class="title">onActivityCreated</span><span class="params">(Activity activity, Bundle savedInstanceState)</span> </span>{</span><br><span class="line">				<span class="keyword">if</span>(mActivityList != <span class="keyword">null</span>) {</span><br><span class="line">					mActivityList.add(activity);</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>	<span class="title">onActivityDestroyed</span><span class="params">(Activity activity)</span> </span>{</span><br><span class="line">				<span class="keyword">if</span>(mActivityList != <span class="keyword">null</span> &amp;&amp; mActivityList.contains(activity)) {</span><br><span class="line">					mActivityList.remove(activity);</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>	<span class="title">onActivityPaused</span><span class="params">(Activity activity)</span> </span>{</span><br><span class="line">			}</span><br><span class="line">	</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>	<span class="title">onActivityResumed</span><span class="params">(Activity activity)</span> </span>{</span><br><span class="line"></span><br><span class="line">			}</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>	<span class="title">onActivitySaveInstanceState</span><span class="params">(Activity activity, Bundle outState)</span> </span>{}</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>	<span class="title">onActivityStarted</span><span class="params">(Activity activity)</span> </span>{</span><br><span class="line">			}</span><br><span class="line">			</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span>	<span class="title">onActivityStopped</span><span class="params">(Activity activity)</span> </span>{</span><br><span class="line">			}</span><br><span class="line">		});</span><br><span class="line">	}</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span>  <span class="title">exitAppication</span><span class="params">(MixEngineService.callbackBefore callbackBefore)</span> </span>{</span><br><span class="line">		<span class="keyword">if</span>(mActivityList != <span class="keyword">null</span>) {</span><br><span class="line">			<span class="keyword">int</span> activityCount = mActivityList.size();</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;activityCount;i++) {</span><br><span class="line">				Activity activity = mActivityList.get(i);</span><br><span class="line">				<span class="keyword">if</span>(activity != <span class="keyword">null</span>) {</span><br><span class="line">					activity.finish();</span><br><span class="line">					activity.overridePendingTransition(<span class="number">0</span>, R.anim.exitapplication_anim);</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">			System.exit(<span class="number">0</span>);</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android进阶/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/编程技巧/">编程技巧</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/25/Android-进阶之推出当前应用的方式/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/25/Android-进阶之推出当前应用的方式/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/21/那一年成长是肆无忌惮的一件事情-而如今成才着痛并快乐着/" title="那一年成长是肆无忌惮的一件事情,而如今有一种成长叫痛并快乐着" itemprop="url">那一年成长是肆无忌惮的一件事情,而如今有一种成长叫痛并快乐着</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-21T09:03:31.000Z" itemprop="datePublished"> 發表於 2016-07-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>*** &#x90A3;&#x4E00;&#x5E74;&#x4E00;&#x76F4;&#x544A;&#x8BEB;&#x81EA;&#x5DF1;&#x4E0D;&#x8981;&#x592A;&#x6025;&#x7740;&#x627E;&#x59B9;&#x5B50;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x65F6;&#x575A;&#x4FE1;&#x90A3;&#x65F6;&#x7684;&#x957F;&#x76F8;&#x4E00;&#x5B9A;&#x662F;&#x5904;&#x4E8E;&#x4EBA;&#x751F;&#x7684;&#x4F4E;&#x8C37;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E9B;&#x5E74;&#x65F6;&#x5149;&#x4E00;&#x76F4;&#x7528;&#x90A3;&#x628A;&#x6740;&#x732A;&#x5200;&#x544A;&#x8BC9;&#x6211;&#x201C;&#x54E5;&#xFF0C;&#x90A3;&#x65F6;&#x7684;&#x957F;&#x76F8;&#x624D;&#x662F;&#x5904;&#x4E8E;&#x5DC5;&#x5CF0;&#x65F6;&#x671F;&#xFF0C;&#x4F60;&#x5374;&#x82B1;&#x5728;&#x6CE1;&#x56FE;&#x4E66;&#x9986;&#xFF0C;&#x6CE1;&#x5B9E;&#x9A8C;&#x5BA4;&#xFF0C;&#x773C;&#x7741;&#x7741;&#x5F97;&#x770B;&#x7740;&#x4E00;&#x4E2A;&#x4E2A;&#x59B9;&#x5B50;&#x88AB;&#x5E26;&#x8D70;&#x201D; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/1.png" alt=""></p>
<hr>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x6709;&#x79CD;&#x81EA;&#x4F5C;&#x81EA;&#x53D7;&#x53EB;&#x505A;&#x201C;&#x548C;&#x961F;&#x5458;&#x4EEC;&#x6CE1;&#x4E86;&#x4E09;&#x4E2A;&#x6708;&#x7684;&#x5B9E;&#x9A8C;&#x5BA4;&#xFF0C;&#x4E00;&#x8D77;&#x8DF7;&#x8BFE;&#xFF0C;&#x4E00;&#x8D77;&#x7F51;&#x4E0A;&#x901A;&#x5BB5;&#x8C03;&#x8BD5;&#xFF0C;&#x4E0A;&#x8BFE;&#x96C6;&#x4F53;&#x7761;&#x89C9;&#xFF0C;&#x53EA;&#x4E3A;&#x4E86;&#x8FD9;&#x4E9B;&#x8BC1;&#x4E66;&#xFF0C;&#x548C;&#x90A3;&#x8F86;&#x81F3;&#x4ECA;&#x8BB0;&#x5FC6;&#x72B9;&#x65B0;&#x7684;&#x5C0F;&#x8F66;&#x201D; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/2.png" alt="">
*** &#x90A3;&#x4E00;&#x5929;&#x5B83;&#x8DD1;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x5B83;&#x80FD;&#x8EB2;&#x907F;&#x969C;&#x788D;&#x7269;&#x4E86;&#xFF0C;&#x8001;&#x5E08;&#x8BF4;&#x5F53;&#x65F6;&#x7684;&#x6211;&#x6BD4;&#x770B;&#x5230;&#x81EA;&#x5DF1;&#x5B69;&#x5B50;&#x4F1A;&#x8D70;&#x8DEF;&#x4E86;&#x8FD8;&#x5F00;&#x5FC3; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/3.png" alt="">
*** &#x90A3;&#x4E00;&#x5929;&#x5B83;&#x7EC8;&#x4E8E;&#x4E0A;&#x573A;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x9AD8;&#x5174;&#x574F;&#x4E86;&#xFF0C;&#x7ED3;&#x675F;&#x7684;&#x90A3;&#x4E00;&#x523B;&#x6211;&#x4EEC;&#x4E09;&#x4E2A;&#x4EBA;&#x773C;&#x775B;&#x540C;&#x65F6;&#x8FDB;&#x6C99;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x5F7C;&#x6B64;&#x7528;&#x7684;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x501F;&#x53E3;&#x201C;&#x798F;&#x5DDE;&#x7684;&#x6C99;&#x5B50;&#x592A;&#x591A;&#x4E86;&#x201D; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/4.png" alt=""></p>
<hr>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x6211;&#x4EEC;&#x79BB;&#x5F00;&#x4E86;&#x6821;&#x56ED;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x4E66;&#x672C;&#x8BBA;&#x65A4;&#x4E70;&#x4E86;&#xFF0C;&#x5927;&#x4F19;&#x8150;&#x8D25;&#x4E86;&#x4E00;&#x987F;&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x4E9B;&#x5C0F;&#x672C;&#x672C;&#x52A0;&#x8D77;&#x6765;&#x8FD8;&#x4E0D;&#x591F;&#x4E00;&#x672C;&#x4E66;&#x7684;&#x91CD;&#x91CF;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x7559;&#x7740;&#x4E86; ***
*** &#x90A3;&#x4E00;&#x5E74;&#x77E5;&#x9053;&#x4E86;&#x8FD9;&#x4E9B;&#x7EA2;&#x672C;&#x672C;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x7528;&#x5904;&#x662F;&#xFF1A;&#x672C;&#x672C;&#x591A;&#x4E86;&#xFF0C;&#x5728;&#x6BCF;&#x4E00;&#x5C4A;&#x65B0;&#x751F;&#x4EA4;&#x6D41;&#x4F1A;&#x4E0A;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x7FA4;&#x61F5;&#x61C2;&#x7684;&#x5B66;&#x59B9;&#x9762;&#x524D;&#x5439;&#x5618;&#x4F60;&#x90A3;&#x4E9B;&#x6240;&#x8C13;&#x7684;&#x5149;&#x8363;&#x5386;&#x53F2; ***
*** &#x90A3;&#x4E00;&#x5E74;&#x542C;&#x8BF4;&#x4E00;&#x4E2A;&#x9AD8;&#x6821;&#x54E5;&#x4EEC;&#x9760;&#x66FF;&#x5E08;&#x59B9;&#x505A;C&#x8BED;&#x97F3;&#x4F5C;&#x4E1A;&#xFF0C;&#x6F5C;&#x89C4;&#x5219;&#x4E86;&#x5E08;&#x59B9;&#x540E;&#xFF0C;&#x5F53;&#x65F6;&#x89C9;&#x5F97;&#x81EA;&#x5DF1;&#x662F;&#x591A;&#x4E48;&#x7684;&#x7EAF;&#x6D01;&#xFF0C;&#x7EAF;&#x6D01;&#x5230;&#x5E08;&#x59B9;&#x7559;&#x7684;&#x7535;&#x8BDD;&#x53F7;&#x7801;&#x4E00;&#x76F4;&#x4E0D;&#x6562;&#x62E8;&#x6253;&#x7684;&#x5730;&#x6B65;&#xFF0C;&#x4F46;&#x662F;&#x73B0;&#x5728;&#x53EF;&#x80FD;&#x4F1A;&#x609F;&#x5230;&#x90A3;&#x4E2A;&#x54E5;&#x4EEC;&#x4F30;&#x8BA1;&#x4E0D;&#x4F1A;C&#x8BED;&#x97F3;&#x4E5F;&#x4F1A;&#x641E;&#x5230;&#x90A3;&#x4E2A;&#x5E08;&#x59B9;&#xFF0C;&#x4E0E;&#x4F1A;&#x4E0D;&#x4F1A;C&#x8BED;&#x97F3;&#x6CA1;&#x6709;&#x534A;&#x5206;&#x94B1;&#x5173;&#x7CFB; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/5.png" alt=""></p>
<hr>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x5927;&#x5BB6;&#x90FD;&#x5728;&#x5FD9;&#x7740;&#x5728;&#x6293;&#x4F4F;&#x9752;&#x6625;&#x7684;&#x5C3E;&#x5DF4;&#x5728;&#x6BD5;&#x4E1A;&#x5B63;&#x5F7B;&#x5E95;&#x7684;&#x72C2;&#x6B22;&#x4E00;&#x628A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x603B;&#x6709;&#x4E00;&#x4E9B;&#x4EBA;&#x4E0D;&#x7518;&#x8FD9;&#x4E48;&#x65E9;&#x65E9;&#x5730;&#x8C22;&#x5E55;&#xFF0C;&#x9009;&#x62E9;&#x4E86;&#x5728;&#x56FE;&#x4E66;&#x9986;&#x5730;&#x4E0B;&#x5BA4;&#x6B7B;&#x542D;&#xFF0C;&#x4E09;&#x4E2A;&#x6708;&#x540E;&#x53C8;&#x51FA;&#x73B0;&#x5728;&#x4E86;&#x6821;&#x56ED;&#x7684;&#x821E;&#x53F0;&#xFF0C;&#x7EED;&#x5199;&#x7740;&#x9752;&#x6625;&#x7684;&#x5E8F;&#x66F2;&#xFF0C;&#x53EF;&#x662F;&#x5728;&#x6536;&#x5230;&#x5F55;&#x53D6;&#x901A;&#x77E5;&#x4E66;&#x540E;&#x77E5;&#x9053;&#x67D0;&#x67D0;&#x540C;&#x5B66;&#x5728;&#x4E00;&#x8D77;&#x4E86;&#xFF0C;&#x67D0;&#x67D0;&#x540C;&#x5B66;&#x6000;&#x5B55;&#x4E86;&#xFF0C;&#x4E00;&#x5207;&#x90FD;&#x53D1;&#x751F;&#x5728;&#x90A3;&#x4E09;&#x4E2A;&#x6708;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E8E;&#x662F;&#x4E4E;&#x611F;&#x53F9;&#xFF0C;&#x6C38;&#x8FDC;&#x4E0D;&#x8981;&#x592A;&#x5F97;&#x745F;&#xFF0C;&#x4E0D;&#x8981;&#x592A;&#x4F4E;&#x4F30;&#x9752;&#x6625;&#x7684;&#x8377;&#x5C14;&#x8499;&#x529B;&#x91CF;&#xFF0C;&#x90A3;&#x65F6;&#x548C;&#x56DB;&#x5E74;&#x7684;&#x5927;&#x5B66;&#x751F;&#x6DAF;&#x4F9D;&#x4F9D;&#x4E0D;&#x820D;&#x5730;&#x9053;&#x522B;&#xFF0C;&#x4E0D;&#x5E26;&#x8D70;&#x4E00;&#x4E2A;&#x59B9;&#x5B50; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/6.png" alt=""></p>
<hr>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x62FF;&#x7740;&#x4E09;&#x4E2A;&#x6708;&#x6362;&#x6765;&#x7684;&#x95E8;&#x7968;&#x6765;&#x5230;&#x4E86;&#x53A6;&#x95E8;&#xFF0C;&#x4E00;&#x5207;&#x90FD;&#x4E00;&#x6837;&#xFF0C;&#x5B9E;&#x9A8C;&#x5BA4;&#xFF0C;&#x56FE;&#x4E66;&#x9986;&#xFF0C;&#x5B9E;&#x9A8C;&#x5BA4;&#xFF0C;&#x56FE;&#x4E66;&#x9986;&#xFF0C;&#x552F;&#x4E00;&#x7684;&#x533A;&#x522B;&#x8981;&#x65F6;&#x4E0D;&#x65F6;&#x7684;&#x51FA;&#x5DEE;&#x8C03;&#x8BD5; ***
*** &#x90A3;&#x4E00;&#x5E74;&#x591A;&#x4E8F;&#x4E86;&#x5BFC;&#x5E08;&#x7684;&#x7737;&#x987E;&#x548C;&#x5B9E;&#x9A8C;&#x5BA4;&#x7684;&#x552F;&#x4E00;&#x59B9;&#x5B50;&#x4E00;&#x8D77;&#x8D1F;&#x8D23;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x7136;&#x540E;&#x90A3;&#x4E2A;&#x59B9;&#x5B50;&#x6210;&#x4E86;&#x6211;&#x7684;&#x521D;&#x604B;&#xFF0C;&#x6210;&#x4E86;&#x6211;&#x73B0;&#x5728;&#x7684;&#x5AB3;&#x5987; ***
*** &#x90A3;&#x4E00;&#x5E74;&#x672C;&#x8BE5;&#x662F;&#x8377;&#x5C14;&#x8499;&#x8FF8;&#x53D1;&#x7684;&#x65F6;&#x523B;&#xFF0C;&#x672C;&#x8BE5;&#x662F;&#x82B1;&#x524D;&#x6708;&#x4E0B;&#x5145;&#x6EE1;&#x8BD7;&#x610F;&#x7684;&#x65F6;&#x5149;&#xFF0C;&#x53EF;&#x662F;&#x4F9D;&#x65E7;&#x9700;&#x8981;&#x4E09;&#x70B9;&#x4E00;&#x7EBF;&#xFF0C;&#x7136;&#x800C;&#x6709;&#x4E86;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7684;&#x611F;&#x53D7; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/8.png" alt="">
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/7.png" alt=""></p>
<hr>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x5B83;&#x8DD1;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x6211;&#x5FEB;&#x7D2F;&#x8DB4;&#x4E86; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/9.png" alt="">
*** &#x90A3;&#x4E00;&#x5E74;&#x6211;&#x7528;&#x8FD9;&#x672C;&#x516B;&#x5341;&#x591A;&#x9875;&#x7684;&#x672C;&#x672C;&#xFF0C;&#x5E26;&#x8D70;&#x4E86;&#x6211;&#x7684;&#x59B9;&#x5B50;&#xFF0C;&#x5BFC;&#x5E08;&#x5728;&#x6700;&#x540E;&#x7684;&#x8C22;&#x5E08;&#x5BB4;&#x4E0A;&#x624D;&#x77E5;&#x9053;&#x539F;&#x6765;&#x6211;&#x7684;&#x6548;&#x7387;&#x662F;&#x5982;&#x6B64;&#x4E4B;&#x9AD8;&#x4E0D;&#x4F46;&#x641E;&#x5B9A;&#x4E86;&#x9879;&#x76EE;&#xFF0C;&#x4E5F;&#x641E;&#x5B9A;&#x4E86;&#x5B9E;&#x9A8C;&#x5BA4;&#x7684;&#x5BA4;&#x82B1;&#xFF0C;&#x81F3;&#x4ECA;&#x60F3;&#x60F3;&#x4F9D;&#x65E7;&#x4F1A;&#x5077;&#x5077;&#x5730;&#x50BB;&#x7B11; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/10.png" alt=""></p>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x4E0D;&#x7BA1;&#x6709;&#x591A;&#x5C11;&#x4E2A;&#x4E09;&#x6708;&#x90FD;&#x4E0D;&#x80FD;&#x518D;&#x7EED;&#x5199;&#x9752;&#x6625;&#x7684;&#x5267;&#x672C;&#xFF0C;&#x62D6;&#x7740;&#x884C;&#x674E;&#x5F00;&#x59CB;&#x4E86;&#x53E6;&#x4E00;&#x6BB5;&#x65C5;&#x7A0B; ***</p>
<hr>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x6211;&#x4EEC;&#x56DE;&#x5230;&#x76F8;&#x8BC6;&#x7684;&#x57CE;&#x5E02;&#x9886;&#x8BC1;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x670B;&#x53CB;&#x5708;&#x91CC;&#x53D1;&#x4E86;&#x4E2A;&#x72B6;&#x6001; &#x201C;&#x6211;&#x4EEC;&#x5728;&#x7231;&#x60C5;&#x7684;&#x8DD1;&#x9053;&#x8F6C;&#x4E86;&#x4E00;&#x5708;&#xFF0C;&#x56DE;&#x5230;&#x4E86;&#x8D77;&#x70B9;&#x91CD;&#x65B0;&#x51FA;&#x53D1;&#x201D; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/11.png" alt=""></p>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x6211;&#x4EEC;&#x6709;&#x4E86;&#x53EF;&#x4EE5;&#x628A;&#x9152;&#x8A00;&#x6B22;&#x7684;&#x670B;&#x53CB;&#xFF0C;&#x4ED6;&#x80A5;&#x4E86;&#xFF0C;&#x6211;&#x4F9D;&#x65E7;&#x7626;&#x7740;&#xFF0C;&#x8EAB;&#x5904;&#x4E24;&#x5730;&#x4F9D;&#x65E7;&#x76F8;&#x4E92;&#x652F;&#x6301;&#xFF0C;&#x76F8;&#x4E92;&#x9F13;&#x52B1; ***
<img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/12.png" alt=""></p>
<hr>
<p>*** &#x90A3;&#x4E00;&#x5E74;&#x6211;&#x4EEC;&#x7684;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;,&#x800C;&#x5982;&#x4ECA;&#x6709;&#x4E00;&#x79CD;&#x6210;&#x957F;&#x53EB;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740; ***</p>
<p><img src="/2016/07/21/&#x90A3;&#x4E00;&#x5E74;&#x6210;&#x957F;&#x662F;&#x8086;&#x65E0;&#x5FCC;&#x60EE;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;-&#x800C;&#x5982;&#x4ECA;&#x6210;&#x624D;&#x7740;&#x75DB;&#x5E76;&#x5FEB;&#x4E50;&#x7740;/14.png" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/21/那一年成长是肆无忌惮的一件事情-而如今成才着痛并快乐着/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/21/那一年成长是肆无忌惮的一件事情-而如今成才着痛并快乐着/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/19/两年工作总结/" title="两年工作总结" itemprop="url">两年工作总结</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-19T14:20:38.000Z" itemprop="datePublished"> 發表於 2016-07-19</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>&#x8F6C;&#x773C;&#x5DF2;&#x7ECF;&#x5DE5;&#x4F5C;&#x4E24;&#x5E74;&#x4E86;&#xFF0C;&#x4E0A;&#x4E2A;&#x6708;&#x5411;&#x516C;&#x53F8;&#x9012;&#x4EA4;&#x4E86;&#x79BB;&#x804C;&#x7533;&#x8BF7;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x8F9E;&#x804C;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x88F8;&#x8F9E;&#xFF0C;&#x5728;&#x79BB;&#x804C;&#x9762;&#x8C08;&#x7684;&#x65F6;&#x5019;HR&#x5F88;&#x8BE7;&#x5F02;&#x5730;&#x5BF9;&#x6211;&#x8BF4;&#xFF1A;&#x201D;&#x516C;&#x53F8;&#x8D70;&#x7684;&#x4EBA;&#x5927;&#x591A;&#x6570;&#x90FD;&#x662F;&#x627E;&#x597D;&#x4E0B;&#x5BB6;&#x540E;&#x518D;&#x63D0;&#x4EA4;&#x8F9E;&#x804C;&#x7533;&#x8BF7;&#x7684;&#xFF0C;&#x4F60;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x73B0;&#x5728;&#x8FD9;&#x91CC;&#x627E;&#x5230;&#x4E0B;&#x5BB6;&#x4E00;&#x4E0B;&#x518D;&#x8D70;&#x5462;&#x201C;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x4E5F;&#x7B97;&#x5F97;&#x4E0A;&#x6211;&#x81EA;&#x5DF1;&#x5BF9;&#x7B2C;&#x4E00;&#x4EFD;&#x5DE5;&#x4F5C;&#x7684;&#x8BA4;&#x771F;&#x5427;&#xFF0C;&#x62FF;&#x7740;&#x516C;&#x53F8;&#x7684;&#x85AA;&#x6C34;&#x627E;&#x4E0B;&#x5BB6;&#xFF0C;&#x81EA;&#x5DF1;&#x5FC3;&#x91CC;&#x4E0D;&#x662F;&#x5F88;&#x8212;&#x5766;&#xFF0C;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x5BF9;&#x4E8E;&#x5DE5;&#x4F5C;&#x8BB8;&#x4E45;&#x7684;&#x4EBA;&#x6765;&#x8BF4;&#x8FD9;&#x7B97;&#x4E0D;&#x4E0A;&#x5929;&#x771F;&#xFF0C;&#x5982;&#x679C;&#x7B97;&#x5929;&#x771F;&#xFF0C;&#x4E5F;&#x5C31;&#x5929;&#x771F;&#x4E00;&#x56DE;&#x5427;&#xFF0C;7&#x6708;20&#x53F7;&#x4E5F;&#x5C31;&#x662F;&#x660E;&#x5929;&#x662F;&#x6211;&#x5728;&#x56E2;&#x961F;&#x4E2D;&#x4E0A;&#x73ED;&#x7684;&#x6700;&#x540E;&#x4E00;&#x5929;&#xFF0C;&#x4E5F;&#x76F8;&#x5F53;&#x4E8E;&#x5BF9;&#x4E8E;&#x516C;&#x53F8;&#x7684;&#x4E00;&#x4EFD;&#x611F;&#x6069;&#x5427;&#xFF0C;&#x53EF;&#x4EE5;&#x80AF;&#x5B9A;&#x7684;&#x662F;&#x8FD9;&#x4E0D;&#x662F;&#x51FA;&#x4E8E;&#x81EA;&#x4FE1;&#xFF0C;&#x4F46;&#x662F;&#x4E2A;&#x4EBA;&#x59CB;&#x7EC8;&#x575A;&#x4FE1;&#x4E00;&#x70B9;&#x201D;&#x8BA4;&#x771F;&#x201C;&#xFF0C;&#x201D;&#x52AA;&#x529B;&#x201C;&#xFF0C;&#x201D;&#x575A;&#x6301;&#x201C;&#x8FD9;&#x4E09;&#x6837;&#x505A;&#x5230;&#x4E86;&#xFF0C;&#x7ED3;&#x679C;&#x90FD;&#x4E0D;&#x4F1A;&#x5F88;&#x5DEE;&#xFF0C;&#x5269;&#x4E0B;&#x5C31;&#x9760;&#x673A;&#x9047;&#x4E86;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4F1A;&#x4E00;&#x8FB9;&#x627E;&#x5DE5;&#x4F5C;&#x4E00;&#x8FB9;&#x501F;&#x7740;&#x8FD9;&#x4E2A;&#x7A7A;&#x6863;&#x671F;&#x7ED9;&#x81EA;&#x5DF1;&#x7684;&#x4E0B;&#x4E00;&#x9636;&#x6BB5;&#x5145;&#x5145;&#x7535;&#x3002;</p>
<p>&#x8FD9;&#x4E24;&#x5E74;&#x53D1;&#x751F;&#x4E86;&#x597D;&#x591A;&#x4E8B;&#x60C5;&#xFF0C;&#x4E00;&#x5411;&#x575A;&#x5F3A;&#x7684;&#x7238;&#x7238;&#x505A;&#x4E86;&#x5FC3;&#x810F;&#x8D77;&#x640F;&#x5668;&#x690D;&#x5165;&#x7684;&#x624B;&#x672F;&#xFF0C;&#x5F53;&#x65F6;&#x6211;&#x8FDE;&#x7EED;&#x5931;&#x7720;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x5988;&#x5988;&#x624B;&#x6454;&#x9AA8;&#x6298;&#x4E86;&#xFF0C;&#x867D;&#x7136;&#x90FD;&#x597D;&#x4E86;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x5FC3;&#x6709;&#x4F59;&#x60B8;&#xFF0C;&#x5F53;&#x7136;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x6536;&#x83B7;&#xFF1A;&#x6211;&#x548C;&#x76F8;&#x604B;&#x56DB;&#x5E74;&#x7684;&#x5973;&#x670B;&#x53CB;&#x7ED3;&#x5A5A;&#x4E86;&#xFF0C;&#x6CA1;&#x6709;&#x94BB;&#x6212;&#xFF0C;&#x6CA1;&#x6709;&#x5A5A;&#x793C;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x81EA;&#x5DF1;&#x6240;&#x6709;&#x7684;&#x79EF;&#x84C4;&#x4ED8;&#x4E86;&#x623F;&#x5B50;&#x9996;&#x4ED8;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5728;&#x660E;&#x5E74;&#x5C06;&#x7238;&#x7238;&#x5988;&#x5988;&#x63A5;&#x8FC7;&#x6765;&#x3002;</p>
<p>&#x5728;&#x5DE5;&#x4F5C;&#xFF0C;&#x6280;&#x672F;&#x63D0;&#x5347;&#x65B9;&#x9762;&#x9664;&#x4E86;&#x516C;&#x53F8;&#x65E5;&#x5E38;&#x5DE5;&#x4F5C;&#x5916;&#xFF0C;&#x4E0B;&#x73ED;&#x7684;8&#x4E2A;&#x5C0F;&#x65F6;&#x4E5F;&#x88AB;&#x5145;&#x5206;&#x5730;&#x5229;&#x7528;&#x8D77;&#x6765;&#x7684;&#x4E86;&#xFF0C;&#x6BCF;&#x5929;&#x5199;&#x5199;&#x535A;&#x5BA2;&#xFF0C;&#x5199;&#x5199;&#x4EE3;&#x7801;&#xFF0C;&#x8BA4;&#x8BC6;&#x4E86;&#x4E00;&#x4E9B;&#x4EA7;&#x54C1;&#x65B9;&#x9762;&#x7684;&#x540C;&#x4E8B;&#xFF0C;&#x5728;&#x7A7A;&#x4F59;&#x65F6;&#x95F4;&#x4E5F;&#x4F1A;&#x5411;&#x4ED6;&#x4EEC;&#x6C9F;&#x901A;&#x4EA7;&#x54C1;&#x8BBE;&#x8BA1;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x4E8B;&#x60C5;&#x3002;&#x6211;&#x4E5F;&#x4F1A;&#x7ED9;&#x4ED6;&#x4EEC;&#x5206;&#x4EAB;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x4E0A;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x4E5F;&#x662F;&#x57FA;&#x4E8E;&#x8FD9;&#x79CD;&#x5206;&#x4EAB;&#x7684;&#x5FEB;&#x4E50;&#x6240;&#x4EE5;&#x6709;&#x4E86;&#x8FD9;&#x4E2A;&#x4E13;&#x95E8;&#x7684;&#x535A;&#x5BA2;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x535A;&#x5BA2;&#x662F;&#x5728;&#x4ECA;&#x5E74;&#x4E8C;&#x6708;&#x4EFD;&#x5F00;&#x59CB;&#x5199;&#x7684;&#xFF0C;&#x4E4B;&#x524D;&#x90FD;&#x662F;&#x5728;&#x672C;&#x5730;&#x7B14;&#x8BB0;&#x4E0A;&#x8BB0;&#x5F55;&#x81EA;&#x5DF1;&#x7684;&#x77E5;&#x8BC6;&#x79EF;&#x7D2F;&#xFF0C;&#x5728;&#x8BFB;&#x4E66;&#x7684;&#x65F6;&#x5019;&#x5305;&#x62EC;&#x521A;&#x521A;&#x5F00;&#x59CB;&#x5DE5;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#x7279;&#x522B;&#x8BA8;&#x538C;&#x5199;&#x6587;&#x6863;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x89C9;&#x5F97;&#x4E70;&#x4E2A;&#x6280;&#x672F;&#x4E66;&#x7C4D;&#x7528;&#x5F97;&#x65F6;&#x5019;&#x67E5;&#x9605;&#x5C31;OK&#x4E86;&#x4F55;&#x5FC5;&#x82B1;&#x65F6;&#x95F4;&#x53BB;&#x505A;&#x8FD9;&#x79CD;&#x522B;&#x4EBA;&#x5DF2;&#x7ECF;&#x505A;&#x597D;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x81EA;&#x5DF1;&#x5DE5;&#x4F5C;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x611F;&#x89C9;&#x90A3;&#x4E9B;&#x6280;&#x672F;&#x4E66;&#x7C4D;&#x5305;&#x62EC;&#x535A;&#x5BA2;&#x4E0A;&#x7684;&#x4E1C;&#x897F;&#x5C31;&#x8D8A;&#x6765;&#x8D8A;&#x51CC;&#x4E71;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x522B;&#x4EBA;&#x535A;&#x5BA2;&#x4E0A;&#x7684;&#x4E0D;&#x4E00;&#x5B9A;&#x90FD;&#x662F;&#x6B63;&#x786E;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x4E86;&#x6574;&#x7406;&#x81EA;&#x5DF1;&#x77E5;&#x8BC6;&#x4F53;&#x7CFB;&#x7684;&#x60F3;&#x6CD5;&#xFF0C;&#x8D77;&#x521D;&#x7684;&#x65F6;&#x5019;&#x7528;&#x7684;&#x662F;&#x7B14;&#x8BB0;&#x8F6F;&#x4EF6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#x535A;&#x5BA2;&#x7684;&#x539F;&#x59CB;&#x7D20;&#x6750;&#xFF0C;&#x540E;&#x6765;&#x5728;&#x65E0;&#x610F;&#x4E2D;&#x597D;&#x53CB; pf18 &#x5411;&#x6211;&#x63A8;&#x8350;&#x4E86;Hexo&#xFF0C;&#x4E5F;&#x5C31;&#x5728;&#x4ECA;&#x5E74;&#x4E8C;&#x6708;&#x4EFD;&#x5F00;&#x59CB;&#xFF0C;&#x5F00;&#x59CB;&#x6162;&#x6162;&#x6574;&#x7406;&#x81EA;&#x5DF1;&#x7684;&#x7B14;&#x8BB0;&#xFF0C;&#x5E76;&#x5199;&#x6210;&#x535A;&#x6587;&#xFF0C;&#x5199;&#x7B14;&#x8BB0;&#x548C;&#x5199;&#x6280;&#x672F;&#x535A;&#x5BA2;&#x662F;&#x6709;&#x5F88;&#x5927;&#x7684;&#x533A;&#x522B;&#x7684;&#xFF0C;&#x5199;&#x7B14;&#x8BB0;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x6BD4;&#x8F83;&#x968F;&#x610F;&#xFF0C;&#x53EA;&#x8981;&#x81EA;&#x5DF1;&#x770B;&#x5F97;&#x660E;&#x767D;&#x5C31;&#x597D;&#xFF0C;&#x4E0D;&#x7528;&#x63D2;&#x56FE;&#xFF0C;&#x4F46;&#x662F;&#x535A;&#x5BA2;&#x5C31;&#x4E0D;&#x4E00;&#x6837;&#x4E86;&#xFF0C;&#x5FC5;&#x987B;&#x8BA4;&#x771F;&#x5730;&#x8868;&#x8FF0;&#xFF0C;&#x8BA4;&#x771F;&#x7422;&#x78E8;&#x3002;&#x6240;&#x4EE5;&#x7ECF;&#x8FC7;&#x521D;&#x671F;&#x7684;&#x8BA1;&#x5212;&#xFF0C;&#x5C31;&#x5F00;&#x59CB;&#x5229;&#x7528;&#x4E0B;&#x73ED;&#x65F6;&#x95F4;&#x5199;&#x535A;&#x5BA2;&#x3002;&#x535A;&#x5BA2;&#x8BA1;&#x5212;&#x4E3B;&#x8981;&#x5206;&#x6210;&#x516D;&#x4E2A;&#x90E8;&#x5206;&#xFF1A;</p>
<p>&#x76EE;&#x524D;&#x662F;&#x5904;&#x4E8E;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E00;&#x4E9B;Android&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x5E38;&#x7528;&#x6280;&#x672F;&#x3002;
&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x4F1A;&#x662F;&#x57FA;&#x4E8E;AOSP &#x7684; &#x6E90;&#x7801;&#x5206;&#x6790;&#x7531;&#x4E8E;&#x4E4B;&#x524D;&#x662F;&#x5728;&#x505A;&#x591A;&#x5A92;&#x4F53;&#x5C0F;&#x7EC4;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x4FA7;&#x91CD;&#x4E8E;MediaPlayer &#x64AD;&#x653E;&#x6846;&#x67B6;&#xFF0C;MediaRecorder&#xFF0C;MediaScanner&#xFF0C;Music&#xFF0C;Video&#xFF0C;Camera&#xFF0C;SoundRecorder&#xFF0C; MediaProject&#xFF0C;&#x6D41;&#x5A92;&#x4F53;&#x65B9;&#x9762;&#x7684;&#x6E90;&#x7801;&#x89E3;&#x6790;&#x3002;
&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x4F1A;&#x662F;&#x4E00;&#x4E9B;&#x5F00;&#x6E90;&#x5E93;&#x7684;&#x4EE3;&#x7801;&#x5206;&#x6790;
&#x7B2C;&#x56DB;&#x90E8;&#x5206;&#x4F1A;&#x662F;&#x4E00;&#x4E9B;&#x81EA;&#x5B9A;&#x4E49;View&#x548C;&#x81EA;&#x5B9A;&#x4E49;&#x52A8;&#x753B;&#x7684;&#x535A;&#x5BA2;
&#x7B2C;&#x4E94;&#x90E8;&#x5206;&#x662F;OpenCV&#xFF0C;OpenGL&#xFF0C;ffmpeg&#x7684;&#x5B66;&#x4E60;&#x603B;&#x7ED3;
&#x7B2C;&#x516D;&#x90E8;&#x5206;&#x4F1A;&#x662F;&#x4E00;&#x4E9B;&#x4EA7;&#x54C1;&#x8BBE;&#x8BA1;&#x65B9;&#x9762;&#x7684;&#x603B;&#x7ED3;
&#x8FD9;&#x4E9B;&#x5185;&#x5BB9;&#x4F1A;&#x6709;&#x8BA1;&#x5212;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x5B9A;&#x671F;&#x5F97;&#x53D1;&#x5E03;,&#x5E0C;&#x671B;&#x81EA;&#x5DF1;&#x80FD;&#x591F;&#x575A;&#x6301;&#x4E0B;&#x6765;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x535A;&#x6587;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x5171;117&#x7BC7;&#xFF0C;&#x6DB5;&#x76D6;&#x4E86;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x6240;&#x9700;&#x7684;&#x5404;&#x4E2A;&#x65B9;&#x9762;&#x6280;&#x672F;&#xFF0C;&#x76F4;&#x5230;&#x4EA7;&#x54C1;&#x53D1;&#x5E03;&#x4E3A;&#x6B62;&#x3002;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x535A;&#x5BA2;&#x4E2D;&#x6709;&#x53C2;&#x8003;&#x4E86;&#x5F88;&#x591A;&#x4F18;&#x79C0;&#x7684;&#x535A;&#x5BA2;&#xFF0C;&#x4E5F;&#x8C22;&#x8C22;&#x4ED6;&#x4EEC;&#x7684;&#x5206;&#x4EAB;&#x7CBE;&#x795E;&#x8BA9;&#x81EA;&#x5DF1;&#x5728;&#x6280;&#x672F;&#x65B9;&#x9762;&#x6709;&#x4E86;&#x8F83;&#x5927;&#x7684;&#x63D0;&#x9AD8;&#x3002;&#x4E5F;&#x662F;&#x51FA;&#x4E8E;&#x611F;&#x6069;&#xFF0C;&#x6709;&#x4E86;&#x4E0B;&#x9762;&#x7684;&#x535A;&#x5BA2;&#x3002;</p>
<p>Android&#x521D;&#x6B65;&#x7CFB;&#x5217;&#x5171;&#x6709;21&#x7BC7;</p>
<p><figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android </span>&#x4F53;&#x7CFB;&#x7ED3;&#x6784; </span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android </span>SDK &#x76EE;&#x5F55;&#x7ED3;&#x6784; </span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android&#x7EC4;&#x4EF6; </span>&#x6982;&#x56FE; </span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android&#x7EC4;&#x4EF6; </span>Context </span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android&#x7EC4;&#x4EF6; </span>Activity</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android&#x7EC4;&#x4EF6; </span>Service</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android&#x7EC4;&#x4EF6; </span><span class="keyword">BroadcastReceiver</span><br><span class="line"></span>* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android&#x7EC4;&#x4EF6; </span>Intent</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android&#x7EC4;&#x4EF6; </span>Content Provider</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android&#x7EC4;&#x4EF6; </span>Fragment</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;&#x5E03;&#x5C40;&#x7BA1;&#x7406;</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;&#x8D44;&#x6E90;&#x7684;&#x4F7F;&#x7528;</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;&#x6570;&#x636E;&#x5B58;&#x50A8;</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;Adapter &#x4E0E; ListView</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;Timmer &amp;&amp; AlarmManager</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;&#x7F51;&#x7EDC;&#x4E0E;&#x5B9A;&#x4F4D;&#x670D;&#x52A1; </span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B; &#x4F7F;&#x7528;<span class="keyword">Android </span>studio &#x5F00;&#x53D1; AIDL</span><br><span class="line">* <span class="keyword">Android </span>studio &#x4E0B;&#x4F7F;&#x7528;JNI</span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;<span class="keyword">Android </span>&#x5B89;&#x5168;&#x673A;&#x5236; </span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;&#x526A;&#x8D34;&#x677F; </span><br><span class="line">* <span class="keyword">Android </span>&#x521D;&#x6B65;&#x4E4B;&#x8BED;&#x97F3;&#x6717;&#x8BFB;&#x548C;&#x8BED;&#x97F3;&#x8BC6;&#x522B;</span><br></pre></td></tr></table></figure></p>
<p>Android &#x8FDB;&#x9636;&#x7CFB;&#x5217;&#x5171;&#x6709;96&#x7BC7;&#xFF1A;
<figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;<span class="keyword">Android </span>&#x7ED8;&#x56FE; &#x96F6; &#x5927;&#x7EB2;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;<span class="keyword">Android </span>&#x7ED8;&#x56FE; &#x4E00; <span class="keyword">Android&#x5750;&#x6807;&#x4F53;&#x7CFB;&#x53CA;&#x5C4F;&#x5E55;&#x5C3A;&#x5BF8;&#x76F8;&#x5173;&#x6982;&#x5FF5;</span><br><span class="line"></span>* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;<span class="keyword">Android </span>&#x7ED8;&#x56FE; &#x4E8C; &#x753B;&#x7B14;Paint</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;<span class="keyword">Android </span>&#x7ED8;&#x56FE; &#x4E09; &#x753B;&#x5E03;Canvs&#x4EE5;&#x53CA;SurfaceView</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;<span class="keyword">Android </span>&#x7ED8;&#x56FE; &#x56DB; &#x56FE;&#x50CF;&#x5BB9;&#x5668;<span class="keyword">Bitmap </span>Drawable&#x4EE5;&#x53CA;&#x56FE;&#x50CF;&#x53D8;&#x6362;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;<span class="keyword">Android </span>&#x7ED8;&#x56FE; &#x4E94; &#x786C;&#x4EF6;&#x52A0;&#x901F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x4E8B;&#x4EF6;&#x4EA4;&#x4E92; &#x4E00; &#x89E6;&#x6478;&#x4E8B;&#x4EF6;&#x548C;&#x952E;&#x76D8;&#x4E8B;&#x4EF6;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x4E8B;&#x4EF6;&#x4EA4;&#x4E92; &#x4E8C; &#x6ED1;&#x52A8;&#x4E8B;&#x4EF6;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x52A8;&#x753B; &#x96F6; &#x5927;&#x7EB2;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x52A8;&#x753B; &#x4E00; &#x89C6;&#x56FE;&#x52A8;&#x753B;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x52A8;&#x753B; &#x4E8C; &#x9010;&#x5E27;&#x52A8;&#x753B;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x52A8;&#x753B; &#x4E09; &#x5C5E;&#x6027;&#x52A8;&#x753B;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x52A8;&#x753B; &#x56DB; &#x5E03;&#x5C40;&#x52A8;&#x753B;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x52A8;&#x753B; &#x4E94; &#x52A8;&#x753B;&#x96C6;&#x5408;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x52A8;&#x753B; &#x516D; &#x52A8;&#x753B;&#x4E8B;&#x4EF6;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x52A8;&#x753B; &#x4E03; &#x63D2;&#x503C;&#x5668;</span><br><span class="line">* <span class="keyword">Android-&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x5B9A;&#x4E49;View </span>&#x4E00; &#x81EA;&#x5B9A;&#x4E49;View &#x6D41;&#x7A0B;</span><br><span class="line">* <span class="keyword">Android-&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x5B9A;&#x4E49;View </span>&#x4E8C; View&#x7684;&#x5237;&#x65B0;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android-&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x5B9A;&#x4E49;View </span>&#x4E09; &#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;View&#x7684;&#x65B9;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x5B9A;&#x4E49;View &#x56DB; &#x81EA;&#x5B9A;&#x4E49;ViewGroup</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x4E00; MVC&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x4E8C; MVP&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x4E09; MVVM&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x4E09; MVVM&#x6A21;&#x5F0F; DataBinding [&#x4E00;] &#x642D;&#x5EFA;&#x5F00;&#x53D1;&#x73AF;&#x5883;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x4E09; MVVM&#x6A21;&#x5F0F;- DataBinding[&#x4E8C;]</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; (&#x8F6C;)<span class="keyword">Android-CleanArchitecture</span><br><span class="line"></span>* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x516D;&#x5927;&#x539F;&#x5219;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;-&#x5355;&#x4F8B;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x539F;&#x578B;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x5916;&#x89C2;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x547D;&#x4EE4;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x4EE3;&#x7406;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x4EAB;&#x5143;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F; &amp;&amp; &#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F; &#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x91CD;&#x8981;&#x7684;&#x63A7;&#x4EF6; CardView</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x91CD;&#x8981;&#x7684;&#x63A7;&#x4EF6; RecycleView</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x91CD;&#x8981;&#x7684;&#x63A7;&#x4EF6; Toolbar</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x6027;&#x80FD;&#x4F18;&#x5316; UI&#x89C6;&#x56FE;&#x4F18;&#x5316;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x6027;&#x80FD;&#x4F18;&#x5316; &#x5185;&#x5B58;&#x4F18;&#x5316;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x6027;&#x80FD;&#x4F18;&#x5316; &#x7535;&#x91CF;&#x4F18;&#x5316;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x6027;&#x80FD;&#x4F18;&#x5316; &#x7F51;&#x7EDC;&#x4F18;&#x5316;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x6027;&#x80FD;&#x4F18;&#x5316; &#x4EE3;&#x7801;&#x7EA7;&#x4F18;&#x5316;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; <span class="keyword">butterknife</span><br><span class="line"></span>* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; Picasso</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; Glide</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; Fresco</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; Gson</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; Realm [&#x4E00;] &#x57FA;&#x7840;&#x7528;&#x6CD5;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; Realm [&#x4E8C;] &#x8FDB;&#x9636;&#x7528;&#x6CD5;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; Retrofit</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; RxJava &amp;&amp; RxAndroid &#x4E00; [&#x4E8B;&#x4EF6;&#x6E90;Observable]</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; RxJava &amp;&amp; RxAndroid &#x4E8C; [&#x4E8B;&#x4EF6;&#x6E90;&#x7684;&#x8FC7;&#x6EE4;]</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; RxJava &amp;&amp; RxAndroid &#x4E09; [&#x4E8B;&#x4EF6;&#x6E90;&#x7684;&#x8F6C;&#x6362;]</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; RxJava &amp;&amp; RxAndroid &#x56DB; [&#x4E8B;&#x4EF6;&#x6E90;&#x7684;&#x7EC4;&#x5408;]</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; RxJava &amp;&amp; RxAndroid &#x4E94; [&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;]</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; RxJava &amp;&amp; RxAndroid &#x516D; [&#x8F6C;]RxJava&#x4F7F;&#x7528;&#x573A;&#x666F;&#x5C0F;&#x7ED3;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x7684;&#x4ECB;&#x7ECD; RxJava &amp;&amp; RxAndroid &#x4E03; [&#x5B66;&#x4E60;RxJava&#x5FC5;&#x5907;&#x7684;&#x6587;&#x7AE0;]</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;<span class="keyword">Android&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x8D28;&#x91CF;&#x8DDF;&#x8E2A;&#x5DE5;&#x5177;</span><br><span class="line"></span>* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528; Findbugs</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528; LeakCanary</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528; Lint</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528;Checkstyle</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528; TraceView</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B; &#x6DF7;&#x6DC6;&#x6280;&#x672F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B; &#x53CD;&#x7F16;&#x8BD1;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x52A8;&#x5316;&#x6784;&#x5EFA;&#x5DE5;&#x5177;Travis CI</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5; &#x4E4B; <span class="keyword">AndroidJunitRunner</span><br><span class="line"></span>* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5; Junit</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5; Monkey&#x6D4B;&#x8BD5;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5;Espreso</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5; UIAutomator</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5;Robolectric</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x7248;&#x672C;&#x91CA;&#x653E;&#x6D41;&#x7A0B;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;Apk&#x7B7E;&#x540D;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;&#x591A;&#x7EBF;&#x7A0B;&#x6280;&#x672F;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;JNI &#x5F00;&#x53D1; &#x4E00; &#x6982;&#x8FF0;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B; NDK &#x5F00;&#x53D1;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;JNI &#x5F00;&#x53D1; &#x4E8C; JNI&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4ECB;&#x7ECD;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;JNI &#x5F00;&#x53D1; &#x4E09; &#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x548C;&#x6210;&#x5458;&#x65B9;&#x6CD5;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;JNI &#x5F00;&#x53D1; &#x56DB; &#x5C40;&#x90E8;&#x5F15;&#x7528;&#xFF0C;&#x5168;&#x5C40;&#x5F15;&#x7528;&#x548C;&#x5F31;&#x5168;&#x5C40;&#x5F15;&#x7528;</span><br><span class="line">* <span class="keyword">Android </span>&#x8FDB;&#x9636;&#x4E4B;JNI &#x5F00;&#x53D1; &#x4E94; JNI &#x5F02;&#x5E38;&#x5904;&#x7406;</span><br></pre></td></tr></table></figure></p>
<p>&#x5982;&#x679C;&#x5927;&#x5BB6;&#x89C9;&#x5F97;&#x5199;&#x5F97;&#x4E0D;&#x597D;&#x6216;&#x8005;&#x6709;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x5EFA;&#x8BAE;&#x7684;&#x53EF;&#x4EE5;&#x7ED9;&#x6211;&#x7559;&#x8A00;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x5BB6;&#x89C9;&#x5F97;&#x5199;&#x5F97;&#x4E0D;&#x9519;&#x7684;&#x8BDD;&#x4E5F;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x5728;&#x8F6C;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#x5E2E;&#x6211;&#x63A8;&#x5E7F;&#x4E0B;&#xFF0C;&#x5728;&#x8F6C;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#x5C06;&#x4E0B;&#x9762;&#x7684;&#x8D34;&#x5230;&#x535A;&#x5BA2;&#x4E0A;&#x65B9;&#x5373;&#x53EF;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4EFD;&#x575A;&#x6301;&#x4E5F;&#x9700;&#x8981;&#x6709;&#x5927;&#x5BB6;&#x7684;&#x9F13;&#x52B1;&#x3002;&#x535A;&#x5BA2;&#x7684;About &#x662F;&#x6211;&#x7684;&#x4E2A;&#x4EBA;&#x7B80;&#x4ECB;&#x53CA;&#x7B80;&#x5386;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x5FD7;&#x540C;&#x9053;&#x5408;&#x7684;&#x670B;&#x53CB;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;&#x548C;&#x6211;&#x53D6;&#x5F97;&#x8054;&#x7CFB;&#x3002;
&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5728;&#x6280;&#x672F;&#x6210;&#x957F;&#x7684;&#x9053;&#x8DEF;&#x4E0A;&#x80FD;&#x591F;&#x7ED9;&#x5927;&#x5BB6;&#x529B;&#x6240;&#x80FD;&#x53CA;&#x7684;&#x5E2E;&#x52A9;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x80FD;&#x591F;&#x5F97;&#x5230;&#x5927;&#x5BB6;&#x7684;&#x610F;&#x89C1;&#x548C;&#x5EFA;&#x8BAE;&#x3002;</p>
<p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">&#x6587;&#xFF0F;tbfungeek</span><br><span class="line">&#x7F51;&#x7AD9;&#x94FE;&#x63A5;&#xFF1A;http:<span class="comment">//tbfungeek.github.io/</span></span><br><span class="line">&#x90AE;&#x7BB1;&#xFF1A;tbfungeek@<span class="number">163.</span>com</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/工作总结/">工作总结</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/工作总结/">工作总结</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/19/两年工作总结/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/19/两年工作总结/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/11/Android-进阶之JNI-开发-五-JNI-异常处理/" title="Android 进阶之JNI 开发 五 JNI 异常处理" itemprop="url">Android 进阶之JNI 开发 五 JNI 异常处理</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Edgar" target="_blank" itemprop="author">Edgar</a>
		
  <p class="article-time">
    <time datetime="2016-07-11T15:15:22.000Z" itemprop="datePublished"> 發表於 2016-07-11</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>JNI&#x5F02;&#x5E38;&#x548C;Java&#x5F02;&#x5E38;&#x6709;&#x4E00;&#x70B9;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x533A;&#x522B;&#x662F;&#xFF1A;</p>
<p>&#x5F53;Java&#x4E2D;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x65F6;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;try&#x2026;catch&#x6765;&#x6355;&#x83B7;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x7A0B;&#x5E8F;Crash&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x540E;&#x7EED;&#x7684;&#x4EE3;&#x7801;&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#x3002;&#x800C;&#x5728;&#x8C03;&#x7528;JNI&#x63A5;&#x53E3;&#x7684;&#x65F6;&#x5019;&#x5982;&#x679C;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x90A3;&#x4E48;&#x540E;&#x7EED;&#x7684;&#x4EE3;&#x7801;&#x4E0D;&#x4F1A;&#x505C;&#x6B62;&#xFF0C;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x5F80;&#x4E0B;&#x6267;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x9700;&#x8981;&#x4F7F;&#x7528;return&#x9000;&#x51FA;&#x540E;&#x7EED;&#x6267;&#x884C;&#x3002;
&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5178;&#x578B;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#xFF1A;</p>
<p><figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">JNIEXPORT void JNICALL</span><br><span class="line">Java_com_idealist_myapplication_MainActivity_callMethodWithException(JNIEnv <span class="variable">*env</span>,</span><br><span class="line">                                                                     jobject <span class="keyword">instance</span>) {</span><br><span class="line">    <span class="comment">//&#x8C03;&#x7528;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x7684;&#x65B9;&#x6CD5;</span></span><br><span class="line">    jclass  cls = (<span class="variable">*env</span>)-&gt;GetObjectClass(<span class="keyword">env</span>,<span class="keyword">instance</span>);</span><br><span class="line">    jmethodID methodid = (<span class="variable">*env</span>)-&gt;GetMethodID(<span class="keyword">env</span>,cls,<span class="string">&quot;methodWithException&quot;</span>,<span class="string">&quot;()V&quot;</span>);</span><br><span class="line">    (<span class="variable">*env</span>)-&gt;CallVoidMethod(<span class="keyword">env</span>, <span class="keyword">instance</span>, methodid);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//&#x68C0;&#x67E5;&#x8C03;&#x7528;&#x4E0A;&#x8FF0;&#x65B9;&#x6CD5;&#x540E;&#x5F02;&#x5E38;&#x662F;&#x5426;&#x629B;&#x51FA;</span></span><br><span class="line">    jthrowable exception = (<span class="variable">*env</span>)-&gt;ExceptionOccurred(<span class="keyword">env</span>);</span><br><span class="line">    <span class="comment">//&#x5982;&#x679C;&#x6709;&#x5F02;&#x5E38;</span></span><br><span class="line">    <span class="keyword">if</span>(exception) {</span><br><span class="line">        <span class="comment">//&#x91CA;&#x653E;&#x8D44;&#x6E90;</span></span><br><span class="line">        (<span class="variable">*env</span>)-&gt;DeleteLocalRef(<span class="keyword">env</span>,cls);</span><br><span class="line">        <span class="comment">//&#x6253;&#x5370;&#x5F02;&#x5E38;&#x4FE1;&#x606F;</span></span><br><span class="line">        (<span class="variable">*env</span>)-&gt;ExceptionDescribe(<span class="keyword">env</span>);</span><br><span class="line">        <span class="comment">//&#x6E05;&#x9664;&#x5F02;&#x5E38;</span></span><br><span class="line">        (<span class="variable">*env</span>)-&gt;ExceptionClear(<span class="keyword">env</span>);</span><br><span class="line">        <span class="comment">//&#x629B;&#x51FA;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5F02;&#x5E38;</span></span><br><span class="line">        jclass exclass = (<span class="variable">*env</span>)-&gt;FindClass(<span class="keyword">env</span>, <span class="string">&quot;java/lang/Exception&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (exclass == NULL) {</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        (<span class="variable">*env</span>)-&gt;ThrowNew(<span class="keyword">env</span>, exclass, <span class="string">&quot;Here is a Exception Occur!&quot;</span>);</span><br><span class="line">        <span class="comment">//&#x5C06;&#x7A0B;&#x5E8F;&#x6D41;&#x7EC8;&#x6B62;&#xFF0C;&#x8FD9;&#x91CC;&#x7531;&#x4E8E;&#x662F;&#x6700;&#x540E;&#x4E86;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x5904;&#x4E8E;&#x6700;&#x540E;&#x90A3;&#x4E48;&#x4E00;&#x5B9A;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x6DFB;&#x52A0;return&#x7EC8;&#x6B62;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x3002;</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android进阶/">Android进阶</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Android-JNI/">Android JNI</a>
  </div>

</div>



<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/11/Android-进阶之JNI-开发-五-JNI-异常处理/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/11/Android-进阶之JNI-开发-五-JNI-异常处理/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/3/"><span></span>Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/5/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="顯示側邊欄"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隱藏側邊欄"></a></div>
<aside class="clearfix">
<div id="authorInfo">
	
		<div class="author-img"></div>		
	
	<div class="social-info" class="clearfix">
		
		
		<a href="https://github.com/tbfungeek" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		
		<a href="mailto:tbfungeek@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		

	</div>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">分類</p>
		<ul>
		
		  
			<li><a href="/categories/Android-小经验/" title="Android 小经验">Android 小经验<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android-源码分析/" title="Android 源码分析">Android 源码分析<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android其他/" title="Android其他">Android其他<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android初步/" title="Android初步">Android初步<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android进阶/" title="Android进阶">Android进阶<sup>100</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo-使用/" title="Hexo 使用">Hexo 使用<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript理论/" title="JavaScript理论">JavaScript理论<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/OpenCV/" title="OpenCV">OpenCV<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/ROS/" title="ROS">ROS<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/个人收藏/" title="个人收藏">个人收藏<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/其他/" title="其他">其他<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/叨叨系列/" title="叨叨系列">叨叨系列<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/工作总结/" title="工作总结">工作总结<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/开源代码分析/" title="开源代码分析">开源代码分析<sup>1</sup></a></li>
		  
		
		  
		
		  
			<li><a href="/categories/树莓派/" title="树莓派">树莓派<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/版本控制/" title="版本控制">版本控制<sup>1</sup></a></li>
		  
		
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">標簽</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Android-设计模式/" title="Android 设计模式">Android 设计模式<sup>29</sup></a></li>
			
		
			
				<li><a href="/tags/Android基础/" title="Android基础">Android基础<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/AOSP-源码/" title="AOSP 源码">AOSP 源码<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/Android-常用第三方库/" title="Android 常用第三方库">Android 常用第三方库<sup>15</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo-使用/" title="Hexo 使用">Hexo 使用<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/ROS/" title="ROS">ROS<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Android-动画进阶/" title="Android 动画进阶">Android 动画进阶<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/Android性能优化/" title="Android性能优化">Android性能优化<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-自动化测试/" title="Android 自动化测试">Android 自动化测试<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/OpenCV/" title="OpenCV">OpenCV<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-绘图进阶/" title="Android 绘图进阶">Android 绘图进阶<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-JNI/" title="Android JNI">Android JNI<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Android-自定义View进阶/" title="Android 自定义View进阶">Android 自定义View进阶<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/树莓派/" title="树莓派">树莓派<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Android-开源源码/" title="Android 开源源码">Android 开源源码<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/重要控件/" title="重要控件">重要控件<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/工具的使用/" title="工具的使用">工具的使用<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Android质量管理工具/" title="Android质量管理工具">Android质量管理工具<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Android-事件处理进阶/" title="Android 事件处理进阶">Android 事件处理进阶<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/编程技巧/" title="编程技巧">编程技巧<sup>2</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">聯結</p>
    <ul>
        
          <li>
            
            	<a href="https://hexo.io" target="_blank" title="Hexo">Hexo</a>
            
          </li>
        
          <li>
            
            	<a href="https://pages.github.com/" target="_blank" title="GitHub">GitHub</a>
            
          </li>
        
          <li>
            
            	<a href="http://pf18.github.io/" target="_blank" title="PF18">PF18</a>
            
          </li>
        
          <li>
            
            	<a href="http://toutiao.io/" target="_blank" title="开发者头条">开发者头条</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.jcodecraeer.com/" target="_blank" title="泡在网上的日子">泡在网上的日子</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="atom.xml" target="_blank" title="rss">RSS 訂閱</a>
</div>

  
  <div class="tagcloudlist">
    <p class="asidetitle">標簽雲</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/AOSP-源码/" style="font-size: 18.18px;">AOSP 源码</a> <a href="/tags/Android-APK-签名/" style="font-size: 10px;">Android APK 签名</a> <a href="/tags/Android-JNI/" style="font-size: 13.64px;">Android JNI</a> <a href="/tags/Android-事件处理进阶/" style="font-size: 10.91px;">Android 事件处理进阶</a> <a href="/tags/Android-动画进阶/" style="font-size: 14.55px;">Android 动画进阶</a> <a href="/tags/Android-多线程开发/" style="font-size: 10px;">Android 多线程开发</a> <a href="/tags/Android-小经验/" style="font-size: 10px;">Android 小经验</a> <a href="/tags/Android-常用第三方库/" style="font-size: 17.27px;">Android 常用第三方库</a> <a href="/tags/Android-开发流程/" style="font-size: 10px;">Android 开发流程</a> <a href="/tags/Android-开源源码/" style="font-size: 12.73px;">Android 开源源码</a> <a href="/tags/Android-绘图进阶/" style="font-size: 13.64px;">Android 绘图进阶</a> <a href="/tags/Android-自动化测试/" style="font-size: 13.64px;">Android 自动化测试</a> <a href="/tags/Android-自定义View进阶/" style="font-size: 12.73px;">Android 自定义View进阶</a> <a href="/tags/Android-设计模式/" style="font-size: 20px;">Android 设计模式</a> <a href="/tags/Android其他/" style="font-size: 10px;">Android其他</a> <a href="/tags/Android基础/" style="font-size: 19.09px;">Android基础</a> <a href="/tags/Android开发流程/" style="font-size: 10px;">Android开发流程</a> <a href="/tags/Android性能优化/" style="font-size: 13.64px;">Android性能优化</a> <a href="/tags/Android混淆技术/" style="font-size: 10px;">Android混淆技术</a> <a href="/tags/Android质量管理工具/" style="font-size: 11.82px;">Android质量管理工具</a> <a href="/tags/Android逆向工程/" style="font-size: 10px;">Android逆向工程</a> <a href="/tags/Git-github/" style="font-size: 10px;">Git && github</a> <a href="/tags/Hexo-使用/" style="font-size: 16.36px;">Hexo 使用</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Linux-使用/" style="font-size: 10px;">Linux 使用</a> <a href="/tags/OpenCV/" style="font-size: 13.64px;">OpenCV</a> <a href="/tags/ROS/" style="font-size: 15.45px;">ROS</a> <a href="/tags/叨叨系列/" style="font-size: 10px;">叨叨系列</a> <a href="/tags/工作总结/" style="font-size: 10px;">工作总结</a> <a href="/tags/工具的使用/" style="font-size: 11.82px;">工具的使用</a> <a href="/tags/开源代码分析/" style="font-size: 10px;">开源代码分析</a> <a href="/tags/杂类/" style="font-size: 10px;">杂类</a> <a href="/tags/树莓派/" style="font-size: 12.73px;">树莓派</a> <a href="/tags/编程技巧/" style="font-size: 10.91px;">编程技巧</a> <a href="/tags/网站收藏/" style="font-size: 10px;">网站收藏</a> <a href="/tags/重要控件/" style="font-size: 11.82px;">重要控件</a>
    </div>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
		
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/hsihohuang/kiddochan" target="_blank" title="Kiddochan">Kiddochan</a> © 2017 
		
		<a href="/about" target="_blank" title="Edgar">Edgar</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?7c9443b0374f1cf6b1dbb5ab84d939cb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回頂部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
